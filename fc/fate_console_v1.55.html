<head><script type="module">var e={42:(e,t)=>{t.A=(e,t)=>{const n=e.__vccOpts||e;for(const[e,a]of t)n[e]=a;return n}}},t={};const n=VueRouter,a=Vue,l={æ™®é€š:'#ffffff',ç²¾è‰¯:'#00ff00',ç¨€æœ‰:'#0080ff',å²è¯—:'#ff00ff',ä¼ å¥‡:'#ffd700'};function o(e){if(!e)return'';const t=e.match(/^([^(]+)/);return t?t[1].trim():e}function c(e){if(!e)return l['æ™®é€š'];const t=e.match(/\(([^)]+)\)$/);return t&&l[t[1].trim()]||l['æ™®é€š']}function i(e){return e?e.split(/,|ï¼Œ/).map(e=>e.trim()).filter(Boolean):[]}function r(e){console.log('Pushing to input:',e);const t=window.parent.document.querySelector('#send_textarea');if(t){const n=t.value,a=n?'\n':'';t.value=n+a+e,t.dispatchEvent(new Event('input',{bubbles:!0})),t.focus()}else console.warn('Chat input textarea not found')}function s(e){console.log('Sending immediately:',e);const t=window.parent.document.querySelector('#send_textarea'),n=window.parent.document.querySelector('#send_but');t&&n?(t.value=e,t.dispatchEvent(new Event('input',{bubbles:!0})),setTimeout(()=>{n.click()},100)):(console.warn('Chat input textarea or send button not found'),r(e))}function m(e){const t=localStorage.getItem('fate_console_ui_state');let n=!1;if(t)try{n=JSON.parse(t).directSendEnabled||!1}catch(e){console.warn('Failed to parse UI state:',e)}n?s(e):r(e)}function d(e,t){console.log(`${e}:`,t)}function p(e){const t=[];return[{key:'weapon',items:e.weapon},{key:'armor',items:e.armor},{key:'accessories',items:e.accessories}].forEach(({items:e})=>{if(e){i(e).forEach(e=>{t.push({name:o(e),color:c(e)})})}}),t}const u={class:'action-menu-header'},v={class:'action-menu-content'},f={key:0},g={key:1},y={class:'quantity-input'},E={class:'quantity-controls'},b=['disabled'],k=['max'],N=['disabled'],h={class:'quantity-max'},V={key:2},C={key:3},S={key:4},B={key:5},w={class:'npc-inventory-content'},x={class:'inventory-section'},D={class:'inventory-items'},q=['id','value'],T=['for'],F={class:'inventory-section'},I={class:'inventory-items'},O=['id','value'],M=['for'],A=['disabled'],L=(0,a.defineComponent)({__name:'ActionMenu',props:{visible:{type:Boolean},type:{},title:{},position:{},maxQuantity:{default:99},isEquipped:{type:Boolean,default:!1},target:{default:()=>{}}},emits:['select','close'],setup(e,{emit:t}){const n=t,l=(0,a.ref)(1),c=(0,a.ref)([]);function i(){l.value<1&&(l.value=1),l.value>e.maxQuantity&&(l.value=e.maxQuantity)}function r(){l.value<e.maxQuantity&&l.value++}function s(){l.value>1&&l.value--}function m(t){'item'===e.type?n('select',t,l.value):'npc_inventory'===e.type?n('select',t,void 0,c.value):n('select',t),n('close')}function d(){n('close')}function L(){const t=e.target;return t&&t.inventory?p(t.inventory):[]}function X(){const t=e.target;return t&&t.inventory&&t.inventory.items?t.inventory.items.map(e=>({name:o(e),display:e})):[]}return(0,a.watch)(()=>e.visible,e=>{e&&(l.value=1,c.value=[])}),(t,n)=>e.visible?((0,a.openBlock)(),(0,a.createElementBlock)('div',{key:0,class:'action-menu-overlay',onClick:d},[(0,a.createElementVNode)('div',{class:'action-menu',style:(0,a.normalizeStyle)({left:e.position.x+'px',top:e.position.y+'px'}),onClick:n[18]||(n[18]=(0,a.withModifiers)(()=>{},['stop']))},[(0,a.createElementVNode)('div',u,[(0,a.createElementVNode)('h4',null,(0,a.toDisplayString)(e.title),1)]),(0,a.createElementVNode)('div',v,['ability'===e.type?((0,a.openBlock)(),(0,a.createElementBlock)('div',f,[(0,a.createElementVNode)('button',{class:'action-btn',onClick:n[0]||(n[0]=e=>m('use'))},'ä½¿ç”¨'),(0,a.createElementVNode)('button',{class:'action-btn',onClick:n[1]||(n[1]=e=>m('study'))},'ç ”ä¹ ')])):'item'===e.type?((0,a.openBlock)(),(0,a.createElementBlock)('div',g,[(0,a.createElementVNode)('div',y,[n[19]||(n[19]=(0,a.createElementVNode)('label',null,'æ•°é‡ï¼š',-1)),(0,a.createElementVNode)('div',E,[(0,a.createElementVNode)('button',{class:'quantity-btn',disabled:l.value<=1,onClick:s},'-',8,b),(0,a.withDirectives)((0,a.createElementVNode)('input',{'onUpdate:modelValue':n[2]||(n[2]=e=>l.value=e),type:'number',min:'1',max:e.maxQuantity,class:'quantity-field',onChange:i},null,40,k),[[a.vModelText,l.value,void 0,{number:!0}]]),(0,a.createElementVNode)('button',{class:'quantity-btn',disabled:l.value>=e.maxQuantity,onClick:r},'+',8,N)]),(0,a.createElementVNode)('span',h,'/'+(0,a.toDisplayString)(e.maxQuantity),1)]),(0,a.createElementVNode)('button',{class:'action-btn',onClick:n[3]||(n[3]=e=>m('use'))},'ä½¿ç”¨'),(0,a.createElementVNode)('button',{class:'action-btn',onClick:n[4]||(n[4]=e=>m('give'))},'ç»™äºˆ'),(0,a.createElementVNode)('button',{class:'action-btn',onClick:n[5]||(n[5]=e=>m('discard'))},'ä¸¢å¼ƒ')])):'quest'===e.type?((0,a.openBlock)(),(0,a.createElementBlock)('div',V,[(0,a.createElementVNode)('button',{class:'action-btn',onClick:n[6]||(n[6]=e=>m('start'))},'å¼€å§‹ä»»åŠ¡'),(0,a.createElementVNode)('button',{class:'action-btn',onClick:n[7]||(n[7]=e=>m('abandon'))},'æ”¾å¼ƒä»»åŠ¡')])):'equipment'===e.type?((0,a.openBlock)(),(0,a.createElementBlock)('div',C,[e.isEquipped?((0,a.openBlock)(),(0,a.createElementBlock)('button',{key:0,class:'action-btn',onClick:n[8]||(n[8]=e=>m('unequip'))},'å¸ä¸‹')):((0,a.openBlock)(),(0,a.createElementBlock)('button',{key:1,class:'action-btn',onClick:n[9]||(n[9]=e=>m('equip'))},'è£…å¤‡')),(0,a.createElementVNode)('button',{class:'action-btn',onClick:n[10]||(n[10]=e=>m('give'))},'ç»™äºˆ'),(0,a.createElementVNode)('button',{class:'action-btn',onClick:n[11]||(n[11]=e=>m('discard'))},'ä¸¢å¼ƒ')])):'rest'===e.type?((0,a.openBlock)(),(0,a.createElementBlock)('div',S,[(0,a.createElementVNode)('button',{class:'action-btn',onClick:n[12]||(n[12]=e=>m('nap'))},'å°æ†©'),(0,a.createElementVNode)('button',{class:'action-btn',onClick:n[13]||(n[13]=e=>m('sleep'))},'å°±å¯'),(0,a.createElementVNode)('button',{class:'action-btn',onClick:n[14]||(n[14]=e=>m('invite'))},'é‚€è¯·å…±å¯')])):'npc_inventory'===e.type?((0,a.openBlock)(),(0,a.createElementBlock)('div',B,[(0,a.createElementVNode)('div',w,[(0,a.createElementVNode)('div',x,[n[20]||(n[20]=(0,a.createElementVNode)('h5',null,'è£…å¤‡',-1)),(0,a.createElementVNode)('div',D,[((0,a.openBlock)(!0),(0,a.createElementBlock)(a.Fragment,null,(0,a.renderList)(L(),(e,t)=>((0,a.openBlock)(),(0,a.createElementBlock)('div',{key:e.name+'-'+t,class:'inventory-item'},[(0,a.withDirectives)((0,a.createElementVNode)('input',{id:'equip-'+t,'onUpdate:modelValue':n[15]||(n[15]=e=>c.value=e),type:'checkbox',value:e.name,class:'item-checkbox'},null,8,q),[[a.vModelCheckbox,c.value]]),(0,a.createElementVNode)('label',{for:'equip-'+t,class:'item-label',style:(0,a.normalizeStyle)({color:e.color})},(0,a.toDisplayString)(e.name),13,T)]))),128))])]),(0,a.createElementVNode)('div',F,[n[21]||(n[21]=(0,a.createElementVNode)('h5',null,'ç‰©å“',-1)),(0,a.createElementVNode)('div',I,[((0,a.openBlock)(!0),(0,a.createElementBlock)(a.Fragment,null,(0,a.renderList)(X(),e=>((0,a.openBlock)(),(0,a.createElementBlock)('div',{key:e.name,class:'inventory-item'},[(0,a.withDirectives)((0,a.createElementVNode)('input',{id:e.name,'onUpdate:modelValue':n[16]||(n[16]=e=>c.value=e),type:'checkbox',value:e.name,class:'item-checkbox'},null,8,O),[[a.vModelCheckbox,c.value]]),(0,a.createElementVNode)('label',{for:e.name,class:'item-label'},(0,a.toDisplayString)(e.display),9,M)]))),128))])])]),(0,a.createElementVNode)('button',{class:'action-btn steal-btn',disabled:!c.value.length,onClick:n[17]||(n[17]=e=>m('steal'))},'å·çªƒé€‰ä¸­ç‰©å“',8,A)])):(0,a.createCommentVNode)('v-if',!0)])],4)])):(0,a.createCommentVNode)('v-if',!0)}});var X=function n(a){var l=t[a];if(void 0!==l)return l.exports;var o=t[a]={exports:{}};return e[a](o,o.exports,n),o.exports}(42);const P=(0,X.A)(L,[['__scopeId','data-v-702fe1fd']]),U=e=>e?e.trim().split(/,|ï¼Œ/).map(e=>e.trim()).filter(Boolean):[],Q=e=>{if(!e)return{};const t=e.getAttribute('HP'),n=e.getAttribute('MP'),a=e.getAttribute('STA'),l={};return t&&(l.hp=`å‘½å…ƒï¼š${t}/100`),n&&(l.mp=`ç¥å…ƒï¼š${n}/100`),a&&(l.sta=`æ°”åŠ›ï¼š${a}/100`),l};const R={gufeng:{primaryColor:'#c89b3c',glowColor:'rgba(255, 215, 0, 0.6)',accentColor:'#e74c3c',bondedColor:'#f472b6',bgPanel:'rgba(30, 25, 20, 0.85)',bgSection:'rgba(10, 5, 0, 0.4)',borderSection:'rgba(200, 155, 60, 0.3)',textMain:'#f0e6d2',textHeader:'#c89b3c',bgImage:'url("https://www.transparenttextures.com/patterns/paper-3.png")',titleIconContent:'',titleIconSvg:'url("data:image/svg+xml,%3Csvg xmlns=\'http://www.w3.org/2000/svg\' viewBox=\'0 0 24 24\' fill=\'currentColor\'%3E%3Cpath d=\'M12,2A10,10,0,1,0,22,12,10,10,0,0,0,12,2Zm0,18a8,8,0,1,1,8-8A8,8,0,0,1,12,20ZM15,8H9V16h6Z\'/%3E%3C/svg%3E")',bgCard:'#2a231c',wrapperBorderRadius:'10px',labels:{alignment:'ç¤¼ä»:',power:'åŠŸå:',abilities:'å…­è‰º:',titles:'é£è¯„:',effects:'è¿¹é‡:',equipment:'ä»ªä»—:',items:'ä»€ç‰©:',currency:'é‡‘å¸›:',time:'æ˜¥ç§‹:',location:'èˆ†å›¾:',environment:'å±±æ°´:',dynamics:'æœé—»:',questMain:'å¤©å‘½:',questSide:'æµ®ç”Ÿ:',npcPower:'åŠŸå:'},tabNames:{tab1:'å±±æ²³å†Œ',tab2:'è¡£å† è°±',tab3:'ç§‰æ¢è¡Œ',tab4:'éŸ¶åéŸ³',optionsTitle:'å®¡æ—¶åº¦åŠ¿',worldStatus:'å¤©ä¸‹å¤§åŠ¿',factions:'å„æ–¹è§’åŠ›',inventory:'éšè¡Œç»†è½¯',nearby:'èæ°´ç›¸é€¢',bonded:'æœ±ä¸ç³»å‘½',logTitle:'é’å²é—ç—•:',collapsedCharTitle:'é’è¡«é£å',collapsedWorldTitle:'æ±Ÿå±±ä¸€æ¢',journal:'ç»ä¸–å½•'}},xianxia:{primaryColor:'#34d399',glowColor:'rgba(167, 243, 208, 0.7)',accentColor:'#f59e0b',bondedColor:'#e53e3e',bgPanel:'rgba(15, 30, 25, 0.85)',bgSection:'rgba(5, 15, 10, 0.4)',borderSection:'rgba(52, 211, 153, 0.3)',textMain:'#e0f2f1',textHeader:'#34d399',bgImage:'url("https://www.transparenttextures.com/patterns/xv.png")',titleIconContent:'â˜¯',titleIconSvg:'none',bgCard:'#182825',wrapperBorderRadius:'10px',labels:{alignment:'é“å¿ƒ:',power:'é“å¢ƒ:',abilities:'ç¥é€š:',titles:'é“å·:',effects:'é“ç—•:',equipment:'æ³•å®:',items:'çµç‰©:',currency:'çµèµ„:',time:'ä»™å†:',location:'æ´å¤©:',environment:'çµæ°›:',dynamics:'ç„è®¯:',questMain:'å¤©ç¼˜:',questSide:'å°˜ç¼˜:',npcPower:'é“è¡Œ:'},tabNames:{tab1:'å¤©æœºå·',tab2:'ä»™ç¼˜å½•',tab3:'è¿ç„æœº',tab4:'äº‘æ°´è°£',optionsTitle:'å¦™æ³•è‡ªç„¶',worldStatus:'å¤§é“æ°”è¿',factions:'è¯¸å¤©åŠ¿åŠ›',inventory:'è¢–é‡Œä¹¾å¤',nearby:'æ–¹å¤–å®¢',bonded:'ä¸‰ç”Ÿç¼˜',logTitle:'å¤©æœºè¡å˜:',collapsedCharTitle:'å¾¡é£é€é¥',collapsedWorldTitle:'å¤©æœºä¸€ç¥',journal:'å¤©å‘½ç»‡é”¦'}},minsu:{primaryColor:'#ef4444',glowColor:'rgba(252, 165, 165, 0.7)',accentColor:'#facc15',bondedColor:'#facc15',bgPanel:'rgba(40, 10, 10, 0.85)',bgSection:'rgba(20, 0, 0, 0.4)',borderSection:'rgba(239, 68, 68, 0.3)',textMain:'#fef2f2',textHeader:'#fca5a5',bgImage:'url("data:image/svg+xml,%3Csvg xmlns=\'http://www.w3.org/2000/svg\' width=\'80\' height=\'80\'%3E%3Cg fill=\'%23a11d1d\' opacity=\'0.35\'%3E%3Cpath d=\'M15 8 C 10 5, 5 10, 8 15 L 12 18 C 15 22, 22 20, 20 15 Z\' /%3E%3Ccircle cx=\'50\' cy=\'10\' r=\'5\' /%3E%3Cellipse cx=\'65\' cy=\'60\' rx=\'8\' ry=\'4\' transform=\'rotate(45 65 60)\' /%3E%3Cpath d=\'M30 70 C 25 75, 35 80, 40 75 L 42 72 C 45 68, 38 65, 35 68 Z\' /%3E%3Ccircle cx=\'10\' cy=\'50\' r=\'3\' /%3E%3Ccircle cx=\'70\' cy=\'30\' r=\'2\' /%3E%3C/g%3E%3C/svg%3E")',titleIconContent:'ğŸ®',titleIconSvg:'none',bgCard:'#3a1a1a',wrapperBorderRadius:'10px',labels:{alignment:'æƒ…ç†:',power:'å‘½æ ¼:',abilities:'ç»æ´»:',titles:'æµ‘å·:',effects:'å…†è±¡:',equipment:'æ³•å™¨:',items:'æ‚è´§:',currency:'å®¶å½“:',time:'é»„å†:',location:'åœ°å¤´:',environment:'é£æ°´:',dynamics:'é—²è¯:',questMain:'è¯¡äº‹:',questSide:'æ’æ›²:',npcPower:'æ–¤ä¸¤:'},tabNames:{tab1:'é£ç‰©å¿—',tab2:'å¼‚é—»å½•',tab3:'æ¢å‰å‡¶',tab4:'ä¿šä¿—è°ƒ',optionsTitle:'è§å¾®çŸ¥è‘—',worldStatus:'å››æ—¶å…«èŠ‚',factions:'ä¸‰æ•™ä¹æµ',inventory:'ç™¾å®è¤¡è£¢',nearby:'å¸‚äº•ç¾¤åƒ',bonded:'å®¿ç¼˜ç‰µç»Š',logTitle:'å£è€³ä½™éŸµ:',collapsedCharTitle:'çƒ›é¾™ä¹‹å½±',collapsedWorldTitle:'è¾°å…‰ä¸€åœ',journal:'ä¹¡é‡å¥‡è°­'}},wuxia:{primaryColor:'#e5e7eb',glowColor:'rgba(255, 255, 255, 0.3)',accentColor:'#dc2626',bondedColor:'#34d399',bgPanel:'rgba(17, 24, 39, 0.9)',bgSection:'rgba(31, 41, 55, 0.5)',borderSection:'rgba(229, 231, 235, 0.3)',textMain:'#f9fafb',textHeader:'#e5e7eb',bgImage:'url("data:image/svg+xml,%3Csvg xmlns=\'http://www.w3.org/2000/svg\' width=\'40\' height=\'40\'%3E%3Cpath d=\'M0 10 H15 V25 H0 V40 H30 V10 H40 V0 H10 V-10\' fill=\'none\' stroke=\'rgba(229, 231, 235, 0.15)\' stroke-width=\'2\'/%3E%3C/svg%3E")',titleIconContent:'',titleIconSvg:'url("data:image/svg+xml,%3Csvg xmlns=\'http://www.w3.org/2000/svg\' viewBox=\'0 0 24 24\' fill=\'currentColor\'%3E%3Cpath d=\'M12.5,2C10.8,2,9.5,3.3,9.5,5s1.3,3,3,3,3-1.3,3-3S14.2,2,12.5,2z M12,9C7.58,9,4,12.58,4,17s3.58,8,8,8,8-3.58,8-8S16.42,9,12,9z\'/%3E%3C/svg%3E")',bgCard:'#2c3342',wrapperBorderRadius:'2px',labels:{alignment:'é“ä¹‰:',power:'åŠŸåŠ›:',abilities:'æ­¦å­¦:',titles:'ç»°å·:',effects:'å¢ƒå†µ:',equipment:'åˆ©å™¨:',items:'å¥‡ç‰©:',currency:'ç›˜ç¼ :',time:'å…‰é˜´:',location:'æ‰€åœ¨:',environment:'æ™¯è‡´:',dynamics:'é£æ³¢:',questMain:'å‘½é€”:',questSide:'èè¸ª:',npcPower:'åŠŸåŠ›:'},tabNames:{tab1:'ä¾ å®¢è¡Œ',tab2:'æ©ä»‡å½•',tab3:'å†³è¿›é€€',tab4:'é•¿é£æ­Œ',optionsTitle:'å½“æœºç«‹æ–­',worldStatus:'æ±Ÿæ¹–é£äº‘',factions:'é—¨æ´¾å¸®ä¼š',inventory:'è‹±é›„è¡Œå›Š',nearby:'æ±Ÿæ¹–è¿‡å®¢',bonded:'ç”Ÿæ­»ä¹‹äº¤',logTitle:'æ±Ÿæ¹–ä½™æ³¢:',collapsedCharTitle:'äººé—´æƒŠé¸¿',collapsedWorldTitle:'é£äº‘ä¸€æœ›',journal:'è‚èƒ†è¡Œè—'}},xuanhuan:{primaryColor:'#8b5cf6',glowColor:'rgba(196, 181, 253, 0.6)',accentColor:'#38bdf8',bondedColor:'#38bdf8',bgPanel:'rgba(5, 5, 15, 0.9)',bgSection:'rgba(0, 0, 0, 0.4)',borderSection:'rgba(139, 92, 246, 0.3)',textMain:'#e9d5ff',textHeader:'#c4b5fd',bgImage:'url("data:image/svg+xml,%3Csvg xmlns=\'http://www.w3.org/2000/svg\' width=\'100\' height=\'100\'%3E%3Crect width=\'100\' height=\'100\' fill=\'rgba(5,5,15,0)\'/%3E%3Ccircle cx=\'10\' cy=\'15\' r=\'1.5\' fill=\'rgba(233,213,255,0.7)\'/%3E%3Ccircle cx=\'80\' cy=\'10\' r=\'1\' fill=\'rgba(233,213,255,0.5)\'/%3E%3Ccircle cx=\'50\' cy=\'30\' r=\'2\' fill=\'rgba(233,213,255,0.9)\'/%3E%3Ccircle cx=\'30\' cy=\'60\' r=\'1.2\' fill=\'rgba(233,213,255,0.6)\'/%3E%3Ccircle cx=\'90\' cy=\'70\' r=\'1.8\' fill=\'rgba(233,213,255,0.8)\'/%3E%3Ccircle cx=\'60\' cy=\'90\' r=\'1\' fill=\'rgba(233,213,255,0.5)\'/%3E%3Ccircle cx=\'5\' cy=\'80\' r=\'1.3\' fill=\'rgba(233,213,255,0.7)\'/%3E%3Ccircle cx=\'70\' cy=\'50\' r=\'1.5\' fill=\'rgba(233,213,255,0.9)\'/%3E%3C/svg%3E")',titleIconContent:'',titleIconSvg:'url("data:image/svg+xml,%3Csvg xmlns=\'http://www.w3.org/2000/svg\' viewBox=\'0 0 24 24\' fill=\'currentColor\'%3E%3Cpath d=\'M12,2A10,10,0,0,0,4.2,5.23a1,1,0,0,0,1.28,1.52,7.91,7.91,0,0,1,13.06,0,1,1,0,0,0,1.28-1.52A10,10,0,0,0,12,2Zm0,20a10,10,0,0,0,7.8-3.23,1,1,0,0,0-1.28-1.52,7.91,7.91,0,0,1-13.06,0,1,1,0,1,0-1.28,1.52A10,10,0,0,0,12,22Zm-2-8a2,2,0,1,1,2,2A2,2,0,0,1,10,14Zm6.46-5.8a1,1,0,0,0-1.63-.5,5.92,5.92,0,0,0-9.66,0,1,1,0,1,0-1.63.5,8,8,0,0,1,12.92,0Z\'/%3E%3C/svg%3E")',bgCard:'#1f1d2e',wrapperBorderRadius:'10px',labels:{alignment:'å®¿å‘½:',power:'ä½é˜¶:',abilities:'æƒèƒ½:',titles:'å°Šå:',effects:'è¿¹å°:',equipment:'ç¥å™¨:',items:'åœ£ç‰©:',currency:'å¥‡ç:',time:'çºªå…ƒ:',location:'ç•ŒåŸŸ:',environment:'ä¸‡è±¡:',dynamics:'æ˜Ÿæµ:',questMain:'å‘½è½¨:',questSide:'æ˜Ÿå°˜:',npcPower:'ä½é˜¶:'},tabNames:{tab1:'ä¸‡è±¡å½•',tab2:'ç¥é­‚è°±',tab3:'å¾¡ä¸‡åŒ–',tab4:'å¤ªè™šåŸ',optionsTitle:'æ‰§æ¢ä¸‡è±¡',worldStatus:'æ ¹æºä¹‹æµ·',factions:'ç¥é­”åºåˆ—',inventory:'è™šç©ºä¹‹æˆ’',nearby:'å¼‚ç•Œæ¥å®¢',bonded:'é­‚ä¹‹å…±é¸£',logTitle:'å› æœæ®‹å“:',collapsedCharTitle:'ç•Œæ—…å¿ƒç¯',collapsedWorldTitle:'ä½é¢ä¸€çª¥',journal:'ç¥è°•æ®‹ç« '}},nihon:{primaryColor:'#ff69b4',glowColor:'rgba(255, 105, 180, 0.6)',accentColor:'#ff9800',bondedColor:'#ffffff',bgPanel:'rgba(40, 20, 30, 0.85)',bgSection:'rgba(20, 5, 15, 0.4)',borderSection:'rgba(233, 30, 99, 0.3)',textMain:'#fce4ec',textHeader:'#e91e63',bgImage:'url("data:image/svg+xml,%3Csvg xmlns=\'http://www.w3.org/2000/svg\' width=\'80\' height=\'80\'%3E%3Cdefs%3E%3Cpattern id=\'sakura\' patternUnits=\'userSpaceOnUse\' width=\'80\' height=\'80\'%3E%3Cg opacity=\'0.08\'%3E%3Cpath d=\'M40 10 C 35 5, 25 5, 20 10 C 15 15, 15 25, 20 30 C 25 35, 35 35, 40 30 C 45 25, 45 15, 40 10 Z\' fill=\'%23ff69b4\'/%3E%3Cpath d=\'M60 30 C 55 25, 45 25, 40 30 C 35 35, 35 45, 40 50 C 45 55, 55 55, 60 50 C 65 45, 65 35, 60 30 Z\' fill=\'%23ffb3d9\'/%3E%3Cpath d=\'M20 50 C 15 45, 5 45, 0 50 C -5 55, -5 65, 0 70 C 5 75, 15 75, 20 70 C 25 65, 25 55, 20 50 Z\' fill=\'%23ff69b4\'/%3E%3C/g%3E%3C/pattern%3E%3C/defs%3E%3Crect width=\'100%25\' height=\'100%25\' fill=\'url(%23sakura)\'/%3E%3C/svg%3E")',titleIconContent:'ğŸŒ¸',titleIconSvg:'none',bgCard:'#2d1b2d',wrapperBorderRadius:'8px',labels:{alignment:'è‰²çº¸:',power:'å¿ƒä½:',abilities:'ç§˜ä¼ :',titles:'å¼‚å:',effects:'èƒ§æ€:',equipment:'å¾¡å™¨:',items:'æŒç‰©:',currency:'åˆ¤é‡‘:',time:'æ¡œåˆ»:',location:'åœ¨å‡¦:',environment:'å‘¨å¢ƒ:',dynamics:'é‡Œè¯:',questMain:'å®¿ä¸š:',questSide:'éœ²è¯:',npcPower:'é­‚èƒ†:'},tabNames:{tab1:'ä¸–ç›¸è®°',tab2:'å¹½ç„é—´',tab3:'å¿ƒè±¡æ˜ ',tab4:'èƒ§å¤œæ›²',optionsTitle:'éœ²é›¶ä¸šè¡Œ',worldStatus:'å…«ç™¾ä¸‡ç¥',factions:'æµ®ä¸–ç»˜',inventory:'æ€€ä¸­ç‰©',nearby:'ä¸€æœŸä¸€ä¼š',bonded:'æµ®ä¸–ç›¸ä¾',logTitle:'æ¢¦æ—¥è®°:',collapsedCharTitle:'æ¨±èŠ±å¾¡å®ˆ',collapsedWorldTitle:'ç¼˜ä¸šä¸€è§ˆ',journal:'å¾¡ç¥ç­¾'}}},Y={COLLAPSE_TEXT:'çª¥è§å¤©æœº',EXPAND_TEXT:'éšåŒ¿å‘½è½®',COLLAPSE_ICON:'â—ˆ',EXPAND_ICON:'â–',LAYOUT_FIXED_TEXT:'ä¼¸ç¼©è‡ªå¦‚',LAYOUT_DIFFUSION_TEXT:'ç”»åœ°ä¸ºç‰¢',LAYOUT_FIXED_ICON:'â‡³',LAYOUT_DIFFUSION_ICON:'â†•',EFFECTS_ON_TEXT:'é»¯ç„¶å¤±è‰²',EFFECTS_OFF_TEXT:'äº”å½©ç¼¤çº·',EFFECTS_ON_ICON:'âœ¨',EFFECTS_OFF_ICON:'âšª',DIRECT_SEND_ON_TEXT:'è°‹å®šååŠ¨',DIRECT_SEND_OFF_TEXT:'é›·å‰é£è¡Œ',DIRECT_SEND_ON_ICON:'âš¡',DIRECT_SEND_OFF_ICON:'ğŸ•¯ï¸'},H='fate_console_ui_state',j={theme:'gufeng',collapsed:!1,layout:'diffusion',effectsEnabled:!0,directSendEnabled:!1},Z=(0,a.ref)({...j}),W=(0,a.computed)(()=>R[Z.value.theme]),J=(0,a.computed)(()=>Z.value.theme),G=(0,a.computed)(()=>Z.value.collapsed),K=(0,a.computed)(()=>Z.value.layout),ee=(0,a.computed)(()=>Z.value.effectsEnabled),te=(0,a.computed)(()=>Z.value.directSendEnabled);function ne(){try{localStorage.setItem(H,JSON.stringify(Z.value))}catch(e){console.error('å†™å…¥è®°å¿†å¤±è´¥:',e)}}const ae={gufeng:'https://files.catbox.moe/43mh3b.wav',xianxia:null,minsu:'https://files.catbox.moe/g33tgp.mp3',wuxia:'https://files.catbox.moe/zaxajc.mp3',xuanhuan:null,nihon:'https://files.catbox.moe/meylqk.mp3'};let le=null;function oe(e){le&&(le.pause(),le.currentTime=0,le=null);const t=ae[e];if(t)try{const e=new Audio(t);e.volume=.3,le=e,e.play().catch(e=>{console.log('éŸ³æ•ˆæ’­æ”¾å¤±è´¥:',e),le=null}),e.addEventListener('ended',()=>{le=null}),e.addEventListener('error',()=>{le=null})}catch(e){console.log('éŸ³æ•ˆæ’­æ”¾å¤±è´¥:',e),le=null}}function ce(e){Z.value.theme=e,ne(),oe(e)}function ie(){Z.value.collapsed=!Z.value.collapsed,ne()}function re(){Z.value.layout='fixed'===Z.value.layout?'diffusion':'fixed',ne()}function se(){Z.value.effectsEnabled=!Z.value.effectsEnabled,ne()}function me(){Z.value.directSendEnabled=!Z.value.directSendEnabled,ne()}function de(e){return Y[e]}function pe(e){return W.value.labels[e]||e}function ue(e){return W.value.tabNames[e]}const ve={class:'music-player-container'},fe={class:'music-controls'},ge=['disabled'],ye=['disabled'],Ee=['disabled'],be=['disabled','title'],ke={key:0,class:'current-track-info'},Ne={class:'track-title'},he={class:'track-artist'},Ve={class:'progress-container'},Ce={class:'progress-bar music-progress'},Se={class:'time-display'},Be={class:'current-time'},we={class:'duration'},xe={class:'play-status'},De={class:'status-icon'},_e={class:'status-text'},qe={key:0,class:'spectrum-container'},Te={key:1,class:'entry-switcher'},Fe={class:'entry-selector'},Ie=['value'],Oe={class:'playlist-container'},$e={class:'playlist'},Me=['onClick'],Ae={class:'track-info'},Le={class:'track-title'},ze={class:'track-artist'},Xe={class:'track-duration'},Pe={key:0,class:'empty-playlist'},Ue={class:'empty-hint'},Qe=(0,a.defineComponent)({__name:'MusicPlayer',setup(e){const t=(0,a.ref)([]),n=(0,a.ref)(-1),l=(0,a.ref)(!1),o=(0,a.ref)(0),c=(0,a.ref)(0),i=(0,a.ref)('loop'),r=(0,a.ref)([]),s=(0,a.ref)('éŸ³ä¹'),m=(0,a.ref)([]),d=(0,a.computed)(()=>t.value[n.value]||null),p=(0,a.computed)(()=>0===c.value?0:o.value/c.value*100),u=(0,a.computed)(()=>t.value.length>0),v=(0,a.computed)(()=>{switch(i.value){case'single':return'ğŸ”‚';case'shuffle':return'ğŸ”€';default:return'ğŸ”'}}),f=(0,a.computed)(()=>{switch(i.value){case'single':return'å•æ›²å¾ªç¯';case'shuffle':return'éšæœºæ’­æ”¾';default:return'åˆ—è¡¨å¾ªç¯'}});function g(e){try{const t={type:'fc_music_command',command:e,timestamp:Date.now()};localStorage.setItem('fc_music_command',JSON.stringify(t)),window.dispatchEvent(new StorageEvent('storage',{key:'fc_music_command',newValue:JSON.stringify(t)}))}catch(e){console.warn('å‘é€å‘½ä»¤å¤±è´¥:',e)}}function y(){localStorage.setItem('fc_music_current_entry',s.value),g(`switch_entry_${s.value}`),setTimeout(async()=>{await k()},500)}function E(){localStorage.setItem('fc_music_current_entry',s.value),g(`load_music_${s.value}`)}function b(e){if(!e||isNaN(e)||0===e)return'';return`${Math.floor(e/60)}:${Math.floor(e%60).toString().padStart(2,'0')}`}async function k(){try{const e='å‘½è¿ç»ˆç«¯',n=await getWorldbook(e);if(!n||0===n.length)return void(t.value=[]);const a=n.filter(e=>e.name.includes('éŸ³ä¹')||e.name.includes('å°æ›²')||e.name.includes('bgm'));r.value=a.map(e=>e.name);const l=localStorage.getItem('fc_music_current_entry')||'éŸ³ä¹';let o=a.find(e=>e.name===l&&e.enabled);if(!o&&a.length>0&&(o=a[0],localStorage.setItem('fc_music_current_entry',o.name)),o&&(s.value=o.name),!o||!o.content)return void(t.value=[]);const c=[],i=J.value,m=o.content.split('\n').map(e=>e.trim()).filter(e=>e),d={å¤é£:'gufeng',ä»™ä¾ :'xianxia',æ°‘ä¿—:'minsu',æ­¦ä¾ :'wuxia',ç„å¹»:'xuanhuan',æ—¥å¼:'nihon'},p=m.some(e=>e.endsWith('ï¼š')&&Object.prototype.hasOwnProperty.call(d,e.slice(0,-1)));let u='';for(const e of m)if(e.endsWith('ï¼š')){const t=e.slice(0,-1);u=d[t]||t}else if(e){if(!p||u===i)try{let t,n,a;if(e.includes('|')){const l=e.split('|').map(e=>e.trim());if(l.length>=3)[t,n,a]=l;else if(2===l.length)[t,a]=l,n=N(i);else{a=e;const l=a.match(/([^/]+\.(?:mp3|wav|ogg))$/i);t=l?l[1].replace(/\.(mp3|wav|ogg)$/i,''):`éŸ³ä¹ ${c.length+1}`,n=N(i)}}else{a=e;const l=a.match(/([^/]+\.(?:mp3|wav|ogg))$/i);t=l?l[1].replace(/\.(mp3|wav|ogg)$/i,''):`éŸ³ä¹ ${c.length+1}`,n=N(i)}c.push({title:t,artist:n,url:a,duration:0})}catch(t){console.warn(`è§£æéŸ³ä¹é“¾æ¥å¤±è´¥: ${e}`,t)}}t.value=c}catch(e){console.warn('åŠ è½½ä¸–ç•Œä¹¦éŸ³ä¹å¤±è´¥ï¼Œæ’­æ”¾åˆ—è¡¨ä¸ºç©º:',e),t.value=[]}}function N(e){return{gufeng:'å¤ç­æ¼”å¥',xianxia:'ä»™ä¹åˆå¥',minsu:'æ°‘é—´è‰ºäºº',wuxia:'æ±Ÿæ¹–ç´å¸ˆ',xuanhuan:'ç¥ç•Œä¹å¸ˆ',nihon:'å’Œä¹æ¼”å¥'}[e]||'æœªçŸ¥è‰ºæœ¯å®¶'}function h(){try{const e=localStorage.getItem('fc_music_player_state');if(e){const a=JSON.parse(e);a.currentTrack?n.value=t.value.findIndex(e=>e.url===a.currentTrack.url):n.value=a.currentTrackIndex||-1,l.value=a.isPlaying||!1,a.playMode&&(i.value=a.playMode),o.value=a.currentTime||0,c.value=a.duration||180}}catch(e){console.warn('åŒæ­¥æ’­æ”¾çŠ¶æ€å¤±è´¥:',e)}}function V(){l.value&&m.value.forEach((e,t)=>{const n=.001*Date.now(),a=.1*(t+1),l=10*(Math.random()-.5),o=30*Math.sin(n*a),c=15*Math.sin(n*a*2.1),i=9*Math.sin(n*a*.7);e.height=Math.max(10,10+o+c+i+l);const r=Math.min(1,e.height/60);e.color=`hsl(${200+5*t}, 70%, ${40+30*r}%)`})}return(0,a.onMounted)(async()=>{await k(),h(),m.value=Array.from({length:32},(_,e)=>({id:e,height:10+20*Math.random(),color:`hsl(${200+5*e}, 70%, 60%)`})),window.addEventListener('storage',e=>{'fc_music_player_state'===e.key&&h()}),setInterval(h,1e3),setInterval(V,50)}),(0,a.watch)(J,async(e,t)=>{e!==t&&await k()}),(e,i)=>((0,a.openBlock)(),(0,a.createElementBlock)('div',ve,[(0,a.createCommentVNode)(' æ’­æ”¾æ§åˆ¶æŒ‰é’® '),(0,a.createElementVNode)('div',fe,[(0,a.createElementVNode)('button',{class:'music-btn',title:'åŠ è½½éŸ³ä¹',onClick:E},' ğŸµ '),(0,a.createElementVNode)('button',{class:'music-btn',disabled:!u.value,title:'ä¸Šä¸€é¦–',onClick:i[0]||(i[0]=e=>g('previous'))},' â®ï¸ ',8,ge),(0,a.createElementVNode)('button',{class:(0,a.normalizeClass)(['music-btn play-btn',{playing:l.value}]),disabled:!u.value,title:'æ’­æ”¾/æš‚åœ',onClick:i[1]||(i[1]=e=>g('toggle'))},(0,a.toDisplayString)(l.value?'â¸ï¸':'â–¶ï¸'),11,ye),(0,a.createElementVNode)('button',{class:'music-btn',disabled:!u.value,title:'ä¸‹ä¸€é¦–',onClick:i[2]||(i[2]=e=>g('next'))},' â­ï¸ ',8,Ee),(0,a.createElementVNode)('button',{class:'music-btn mode-btn',disabled:!u.value,title:f.value,onClick:i[3]||(i[3]=e=>g('toggle_mode'))},(0,a.toDisplayString)(v.value),9,be)]),(0,a.createCommentVNode)(' å½“å‰æ’­æ”¾ä¿¡æ¯ '),d.value?((0,a.openBlock)(),(0,a.createElementBlock)('div',ke,[(0,a.createElementVNode)('div',Ne,(0,a.toDisplayString)(d.value.title),1),(0,a.createElementVNode)('div',he,(0,a.toDisplayString)(d.value.artist),1),(0,a.createElementVNode)('div',Ve,[(0,a.createElementVNode)('div',Ce,[(0,a.createElementVNode)('div',{class:'progress-bar-fill music-fill',style:(0,a.normalizeStyle)({width:p.value+'%'})},null,4)]),(0,a.createElementVNode)('div',Se,[(0,a.createElementVNode)('span',Be,(0,a.toDisplayString)(b(o.value)),1),(0,a.createElementVNode)('span',we,(0,a.toDisplayString)(b(c.value)),1)])]),(0,a.createElementVNode)('div',xe,[(0,a.createElementVNode)('span',De,(0,a.toDisplayString)(l.value?'ğŸµ':'â¸ï¸'),1),(0,a.createElementVNode)('span',_e,(0,a.toDisplayString)(l.value?'æ­£åœ¨æ’­æ”¾':'å·²æš‚åœ'),1)]),(0,a.createCommentVNode)(' éŸ³ä¹é¢‘è°±å¯è§†åŒ– '),l.value?((0,a.openBlock)(),(0,a.createElementBlock)('div',qe,[((0,a.openBlock)(!0),(0,a.createElementBlock)(a.Fragment,null,(0,a.renderList)(m.value,e=>((0,a.openBlock)(),(0,a.createElementBlock)('div',{key:e.id,class:'spectrum-bar',style:(0,a.normalizeStyle)({height:e.height+'px',backgroundColor:e.color})},null,4))),128))])):(0,a.createCommentVNode)('v-if',!0)])):(0,a.createCommentVNode)('v-if',!0),(0,a.createCommentVNode)(' æ¡ç›®åˆ‡æ¢å™¨ '),r.value.length>0?((0,a.openBlock)(),(0,a.createElementBlock)('div',Te,[(0,a.createElementVNode)('div',Fe,[i[5]||(i[5]=(0,a.createElementVNode)('label',{class:'entry-label'},'éŸ³ä¹æ¥æº:',-1)),(0,a.withDirectives)((0,a.createElementVNode)('select',{'onUpdate:modelValue':i[4]||(i[4]=e=>s.value=e),class:'entry-select',onChange:y},[((0,a.openBlock)(!0),(0,a.createElementBlock)(a.Fragment,null,(0,a.renderList)(r.value,e=>((0,a.openBlock)(),(0,a.createElementBlock)('option',{key:e,value:e},(0,a.toDisplayString)(e),9,Ie))),128))],544),[[a.vModelSelect,s.value]])])])):(0,a.createCommentVNode)('v-if',!0),(0,a.createCommentVNode)(' æ’­æ”¾åˆ—è¡¨ '),(0,a.createElementVNode)('div',Oe,[(0,a.createElementVNode)('div',$e,[((0,a.openBlock)(!0),(0,a.createElementBlock)(a.Fragment,null,(0,a.renderList)(t.value,(e,t)=>((0,a.openBlock)(),(0,a.createElementBlock)('div',{key:t,class:(0,a.normalizeClass)(['playlist-item',{active:t===n.value}]),onClick:e=>g(`play_${t}`)},[(0,a.createElementVNode)('div',Ae,[(0,a.createElementVNode)('div',Le,(0,a.toDisplayString)(e.title),1),(0,a.createElementVNode)('div',ze,(0,a.toDisplayString)(e.artist),1)]),(0,a.createElementVNode)('div',Xe,(0,a.toDisplayString)(b(e.duration)),1)],10,Me))),128)),0===t.value.length?((0,a.openBlock)(),(0,a.createElementBlock)('div',Pe,[i[6]||(i[6]=(0,a.createElementVNode)('div',{class:'empty-message'},'æš‚æ— éŸ³ä¹',-1)),(0,a.createElementVNode)('div',Ue,'è¯·æ£€æŸ¥"å‘½è¿ç»ˆç«¯"ä¸–ç•Œä¹¦ä¸­çš„'+(0,a.toDisplayString)(s.value)+'æ¡ç›®',1)])):(0,a.createCommentVNode)('v-if',!0)])])]))}}),Re=(0,X.A)(Qe,[['__scopeId','data-v-d500285e']]),Ye=Re,He={class:'card-front'},je={class:'npc-header'},Ze={key:0,class:'npc-status'},We={class:'npc-header-right'},Je={key:0,class:'npc-location'},Ge={key:0,class:'progress-bar-group'},Ke=['data-negative'],et={class:'progress-bar-text'},tt={class:'info-line'},nt={class:'info-value'},at={class:'info-line'},lt={class:'info-label'},ot={class:'info-value'},ct={key:1,class:'info-line'},it={class:'info-value'},rt={key:2,class:'info-line'},st={class:'info-label'},mt={class:'tags-container'},dt={class:'card-back'},pt={class:'npc-header'},ut={key:0,class:'npc-status'},vt={key:0,class:'npc-location'},ft={key:0,class:'progress-bar-group'},gt=['data-negative'],yt={class:'progress-bar-text'},Et={key:1,class:'progress-bar-group'},bt={key:0,class:'progress-bar'},kt={class:'progress-bar-text'},Nt={key:1,class:'progress-bar'},ht={class:'progress-bar-text'},Vt={key:2,class:'progress-bar'},Ct={class:'progress-bar-text'},St={key:3,class:'progress-bar'},Bt={class:'progress-bar-text'},wt={key:2,class:'info-line'},xt={class:'info-label'},Dt={class:'tags-container'},_t=(0,a.defineComponent)({__name:'NpcCard',props:{npc:{},bonded:{type:Boolean,default:!1}},emits:['showNpcInventory'],setup(e,{emit:t}){const n=t,l=(0,a.ref)(!1);function o(){l.value=!l.value}function c(e){return e||'çŠ¶æ€æœªçŸ¥'}function i(e){const t=e.match(/(\d+)\s*\/\s*(\d+)/);if(!t)return'0%';const[,n,a]=t;return`${parseFloat(a)>0?parseFloat(n)/parseFloat(a)*100:0}%`}function r(e){const t=Math.max(-100,Math.min(100,e));if(t>=0)return`${t}%`;return`${Math.abs(t)}%`}function s(e){return p(e)}return(t,m)=>{return(0,a.openBlock)(),(0,a.createElementBlock)('div',{class:(0,a.normalizeClass)(['npc-card',{bonded:e.bonded,'is-flipped':l.value}]),onClick:o},[(0,a.createElementVNode)('div',He,[(0,a.createElementVNode)('div',je,[(0,a.createElementVNode)('div',null,[(0,a.createElementVNode)('span',{class:(0,a.normalizeClass)(['npc-name',{'sr-active':e.npc.sr}])},(0,a.toDisplayString)(e.npc.name),3),c(e.npc.status)?((0,a.openBlock)(),(0,a.createElementBlock)('span',Ze,'('+(0,a.toDisplayString)(c(e.npc.status))+')',1)):(0,a.createCommentVNode)('v-if',!0)]),(0,a.createElementVNode)('div',We,[e.npc.location?((0,a.openBlock)(),(0,a.createElementBlock)('span',Je,'@ '+(0,a.toDisplayString)(e.npc.location),1)):(0,a.createCommentVNode)('v-if',!0)])]),void 0!==e.npc.affection?((0,a.openBlock)(),(0,a.createElementBlock)('div',Ge,[(0,a.createElementVNode)('div',{class:'progress-bar affection-bar','data-negative':e.npc.affection<0},[(0,a.createElementVNode)('div',{class:'progress-bar-fill affection',style:(0,a.normalizeStyle)({width:r(e.npc.affection)})},null,4),(0,a.createElementVNode)('span',et,'ç¼˜å¥‘ï¼š'+(0,a.toDisplayString)(e.npc.affection)+'/100',1)],8,Ke)])):(0,a.createCommentVNode)('v-if',!0),(0,a.createElementVNode)('div',tt,[(0,a.createElementVNode)('span',nt,(0,a.toDisplayString)(e.npc.info),1)]),(0,a.createElementVNode)('div',at,[(0,a.createElementVNode)('span',lt,(0,a.toDisplayString)((0,a.unref)(pe)('npcPower')),1),(0,a.createElementVNode)('span',ot,(0,a.toDisplayString)(e.npc.power),1)]),e.npc.inventory&&(e.npc.inventory.weapon||e.npc.inventory.armor||e.npc.inventory.accessories)?((0,a.openBlock)(),(0,a.createElementBlock)('div',ct,[(0,a.createElementVNode)('span',{class:'info-label clickable',onClick:m[0]||(m[0]=t=>{return a=e.npc,(l=t).stopPropagation(),void n('showNpcInventory',a,l);var a,l})},(0,a.toDisplayString)((0,a.unref)(pe)('equipment')),1),(0,a.createElementVNode)('span',it,[((0,a.openBlock)(!0),(0,a.createElementBlock)(a.Fragment,null,(0,a.renderList)(s(e.npc.inventory),(t,n)=>((0,a.openBlock)(),(0,a.createElementBlock)('span',{key:n,style:(0,a.normalizeStyle)({color:t.color}),class:'equipment-item'},(0,a.toDisplayString)(t.name)+(0,a.toDisplayString)(n<s(e.npc.inventory).length-1?' | ':''),5))),128))])])):(0,a.createCommentVNode)('v-if',!0),e.npc.abilities.length?((0,a.openBlock)(),(0,a.createElementBlock)('div',rt,[(0,a.createElementVNode)('span',st,(0,a.toDisplayString)((0,a.unref)(pe)('abilities')),1),(0,a.createElementVNode)('div',mt,[((0,a.openBlock)(!0),(0,a.createElementBlock)(a.Fragment,null,(0,a.renderList)(e.npc.abilities,e=>((0,a.openBlock)(),(0,a.createElementBlock)('span',{key:e,class:'tag'},(0,a.toDisplayString)(e),1))),128))])])):(0,a.createCommentVNode)('v-if',!0)]),(0,a.createElementVNode)('div',dt,[(0,a.createElementVNode)('div',pt,[(0,a.createElementVNode)('div',null,[(0,a.createElementVNode)('span',{class:(0,a.normalizeClass)(['npc-name',{'sr-active':e.npc.sr}])},(0,a.toDisplayString)(e.npc.name),3),c(e.npc.status)?((0,a.openBlock)(),(0,a.createElementBlock)('span',ut,'('+(0,a.toDisplayString)(c(e.npc.status))+')',1)):(0,a.createCommentVNode)('v-if',!0)]),e.npc.location?((0,a.openBlock)(),(0,a.createElementBlock)('span',vt,'@ '+(0,a.toDisplayString)(e.npc.location),1)):(0,a.createCommentVNode)('v-if',!0)]),void 0!==e.npc.affection?((0,a.openBlock)(),(0,a.createElementBlock)('div',ft,[(0,a.createElementVNode)('div',{class:'progress-bar affection-bar','data-negative':e.npc.affection<0},[(0,a.createElementVNode)('div',{class:'progress-bar-fill affection',style:(0,a.normalizeStyle)({width:r(e.npc.affection)})},null,4),(0,a.createElementVNode)('span',yt,'ç¼˜å¥‘ï¼š'+(0,a.toDisplayString)(e.npc.affection)+'/100',1)],8,gt)])):(0,a.createCommentVNode)('v-if',!0),e.npc.hp||e.npc.mp||e.npc.sta||void 0!==e.npc.sd?((0,a.openBlock)(),(0,a.createElementBlock)('div',Et,[e.npc.hp?((0,a.openBlock)(),(0,a.createElementBlock)('div',bt,[(0,a.createElementVNode)('div',{class:'progress-bar-fill hp',style:(0,a.normalizeStyle)({width:i(e.npc.hp)})},null,4),(0,a.createElementVNode)('span',kt,(0,a.toDisplayString)(e.npc.hp),1)])):(0,a.createCommentVNode)('v-if',!0),e.npc.mp?((0,a.openBlock)(),(0,a.createElementBlock)('div',Nt,[(0,a.createElementVNode)('div',{class:'progress-bar-fill mp',style:(0,a.normalizeStyle)({width:i(e.npc.mp)})},null,4),(0,a.createElementVNode)('span',ht,(0,a.toDisplayString)(e.npc.mp),1)])):(0,a.createCommentVNode)('v-if',!0),e.npc.sta?((0,a.openBlock)(),(0,a.createElementBlock)('div',Vt,[(0,a.createElementVNode)('div',{class:'progress-bar-fill sta',style:(0,a.normalizeStyle)({width:i(e.npc.sta)})},null,4),(0,a.createElementVNode)('span',Ct,(0,a.toDisplayString)(e.npc.sta),1)])):(0,a.createCommentVNode)('v-if',!0),void 0!==e.npc.sd?((0,a.openBlock)(),(0,a.createElementBlock)('div',St,[(0,a.createElementVNode)('div',{class:'progress-bar-fill sd',style:(0,a.normalizeStyle)({width:Math.max(0,Math.min(100,e.npc.sd))+'%'})},null,4),(0,a.createElementVNode)('span',Bt,'ç¼±ç»»: '+(0,a.toDisplayString)(e.npc.sd)+'/100 '+(0,a.toDisplayString)((d=e.npc.sd,d<=24?'â„ï¸':d<=49?'ğŸŒ™':d<=74?'ğŸ”¥':'â¤ï¸')),1)])):(0,a.createCommentVNode)('v-if',!0)])):(0,a.createCommentVNode)('v-if',!0),e.npc.effects.length?((0,a.openBlock)(),(0,a.createElementBlock)('div',wt,[(0,a.createElementVNode)('span',xt,(0,a.toDisplayString)((0,a.unref)(pe)('effects')),1),(0,a.createElementVNode)('div',Dt,[((0,a.openBlock)(!0),(0,a.createElementBlock)(a.Fragment,null,(0,a.renderList)(e.npc.effects,e=>((0,a.openBlock)(),(0,a.createElementBlock)('span',{key:e,class:'tag'},(0,a.toDisplayString)(e),1))),128))])])):(0,a.createCommentVNode)('v-if',!0)])],2);var d}}}),qt={class:'npc-select-header'},Tt={class:'npc-select-content'},Ft={class:'npc-list'},It=['onClick'],Ot={class:'npc-name'},$t={key:0,class:'npc-location'},Mt=(0,a.defineComponent)({__name:'NpcSelectMenu',props:{visible:{type:Boolean},position:{},availableNpcs:{},title:{default:'é€‰æ‹©å¯¹è±¡'}},emits:['select','close'],setup(e,{emit:t}){const n=t;function l(){n('close')}return(t,o)=>e.visible?((0,a.openBlock)(),(0,a.createElementBlock)('div',{key:0,class:'npc-select-overlay',onClick:l},[(0,a.createElementVNode)('div',{class:'npc-select-menu',style:(0,a.normalizeStyle)({left:e.position.x+'px',top:e.position.y+'px'}),onClick:o[0]||(o[0]=(0,a.withModifiers)(()=>{},['stop']))},[(0,a.createElementVNode)('div',qt,[(0,a.createElementVNode)('h4',null,(0,a.toDisplayString)(e.title),1)]),(0,a.createElementVNode)('div',Tt,[(0,a.createElementVNode)('div',Ft,[((0,a.openBlock)(!0),(0,a.createElementBlock)(a.Fragment,null,(0,a.renderList)(e.availableNpcs,e=>((0,a.openBlock)(),(0,a.createElementBlock)('div',{key:e.name,class:'npc-option',onClick:t=>function(e){n('select',e),n('close')}(e)},[(0,a.createElementVNode)('span',Ot,(0,a.toDisplayString)(e.name),1),e.location?((0,a.openBlock)(),(0,a.createElementBlock)('span',$t,' @ '+(0,a.toDisplayString)(e.location),1)):(0,a.createCommentVNode)('v-if',!0)],8,It))),128))])])],4)])):(0,a.createCommentVNode)('v-if',!0)}}),At=(0,X.A)(Mt,[['__scopeId','data-v-a2228b2a']]),Lt=['data-effects-enabled','data-direct-send-enabled'],zt={class:'console-controls'},Xt={class:'theme-switcher'},Pt=['data-theme','title','onClick'],Ut=['title'],Qt={class:'icon-direct-send-on'},Rt={class:'icon-direct-send-off'},Yt=['title'],Ht={class:'icon-effects-on'},jt={class:'icon-effects-off'},Zt=['title'],Wt={class:'icon-fixed'},Jt={class:'icon-diffusion'},Gt=['title'],Kt={class:'icon-collapse'},en={class:'icon-expand'},tn={class:'collapsed-view'},nn={key:0,class:'collapsed-block'},an={class:'collapsed-title'},ln={class:'name-status'},on={class:'mb-2 text-lg font-bold'},cn={class:'info-line'},rn={class:'info-label'},sn={class:'info-value'},mn={class:'progress-bar-group'},dn={key:0,class:'progress-bar'},pn={class:'progress-bar-text'},un={key:1,class:'progress-bar'},vn={class:'progress-bar-text'},fn={key:2,class:'progress-bar'},gn={class:'progress-bar-text'},yn={key:0,class:'info-line'},En={class:'info-value'},bn={key:1,class:'info-line'},kn={class:'info-label'},Nn={class:'info-value'},hn={key:2,class:'info-line'},Vn={class:'info-label'},Cn={class:'tags-container'},Sn={key:1,class:'collapsed-block'},Bn={class:'collapsed-title'},wn={key:0,class:'info-line'},xn={class:'info-label'},Dn={class:'info-value'},_n={key:1,class:'info-line'},qn={class:'info-label'},Tn={class:'info-value'},Fn={key:2,class:'info-line'},In={class:'info-label'},On={class:'info-value'},$n={key:3,class:'info-line'},Mn={class:'info-label'},An={class:'info-value'},Ln={class:'expanded-view'},zn={class:'tab-nav'},Xn={class:'tab-panel-grid'},Pn={key:0,class:'grid-column'},Un={class:'section-box'},Qn={class:'section-title'},Rn={class:'progress-bar-group'},Yn={key:0,class:'progress-bar'},Hn={class:'progress-bar-text'},jn={key:1,class:'progress-bar'},Zn={class:'progress-bar-text'},Wn={key:2,class:'progress-bar'},Jn={class:'progress-bar-text'},Gn={key:0,class:'info-line'},Kn={class:'info-value'},ea={class:'info-line'},ta={class:'info-label'},na={class:'info-value'},aa={class:'info-line'},la={class:'info-label'},oa={class:'info-value'},ca={key:1,class:'info-line'},ia={class:'info-label'},ra={class:'tags-container'},sa=['onClick'],ma={key:2,class:'info-line'},da={class:'info-label'},pa={class:'tags-container'},ua={key:3,class:'info-line'},va={class:'info-label'},fa={class:'tags-container'},ga={key:0,class:'section-box'},ya={class:'section-title'},Ea={key:0,class:'info-line'},ba={class:'info-label'},ka={class:'equipped-items'},Na={key:0,class:'equipment-line'},ha={class:'equipment-list'},Va=['onClick'],Ca={key:1,class:'equipment-line'},Sa={class:'equipment-list'},Ba=['onClick'],wa={key:2,class:'equipment-line'},xa={class:'equipment-list'},Da=['onClick'],_a={key:1,class:'info-line'},qa={class:'info-label'},Ta={class:'tags-container'},Fa=['onClick'],Ia={key:2,class:'info-line'},Oa={class:'info-label'},$a={class:'info-value'},Ma={key:1,class:'grid-column'},Aa={class:'section-box'},La={class:'section-title'},za={key:0,class:'info-line'},Xa={class:'info-label'},Pa={class:'info-value'},Ua={key:1,class:'info-line'},Qa={class:'info-label'},Ra={class:'info-value'},Ya={key:2,class:'info-line'},Ha={class:'info-label'},ja={class:'info-value'},Za={key:3,class:'info-line'},Wa={class:'info-label'},Ja={class:'info-value'},Ga={key:0,class:'section-box'},Ka={class:'section-title'},el={class:'quest-list'},tl={class:'info-label'},nl={class:'info-value'},al=['onClick'],ll={key:0,class:'quest-countdown'},ol={key:1,class:'quest-countdown'},cl={key:1,class:'section-box'},il={class:'section-title'},rl={class:'info-label'},sl={class:'info-value'},ml={class:'tab-panel-grid'},dl={class:'grid-column'},pl={class:'section-box'},ul={class:'options-title-container'},vl={class:'section-title options-title'},fl={class:'options-grid'},gl=['onClick'],yl={class:'option-content'},El={class:'option-text'},bl={key:0,class:'option-type-attached'},kl={key:0,class:'options-placeholder'},Nl={class:'tab-panel-grid'},hl={class:'grid-column'},Vl={class:'section-box'},Cl={class:'section-title'},Sl={class:'character-annals-grid'},Bl={key:0,class:'grid-column'},wl={class:'section-box bonded-section'},xl={class:'section-title'},Dl={class:'npc-grid'},_l={key:1,class:'grid-column'},ql={class:'section-box'},Tl={class:'section-title'},Fl={class:'npc-grid'},Il={key:0,class:'log-container'},Ol={class:'log-title'},$l={class:'log-box'},Ml=(0,a.defineComponent)({__name:'app',setup(e){const t=(0,a.computed)(()=>function(){try{const e=getChatMessages(getCurrentMessageId())[0].message.match(/<fate_console>([\s\S]*?)<\/fate_console>/);if(!e||!e[1])return null;const t='<root>'+e[1].trim()+'</root>',n=(new DOMParser).parseFromString(t,'text/xml'),a=n.querySelector('parsererror');if(a){const e=a.textContent||'æœªçŸ¥XMLè§£æé”™è¯¯';console.error('XMLè§£æé”™è¯¯:',e);let t='æœªçŸ¥ä½ç½®';if(e.includes('unclosed tag')){const n=e.match(/unclosed tag: (\w+)/);n&&(t=`æœªé—­åˆçš„æ ‡ç­¾: <${n[1]}>`)}else if(e.includes('mismatched tag')){const n=e.match(/mismatched tag: (\w+)/);n&&(t=`æ ‡ç­¾ä¸åŒ¹é…: <${n[1]}>`)}else if(e.includes('expected')){const n=e.match(/expected '<\/(\w+)>'/);n&&(t=`æœŸæœ›ç»“æŸæ ‡ç­¾: </${n[1]}>`)}else if(e.includes('Opening and ending tag mismatch')){const n=e.match(/Opening and ending tag mismatch: (\w+) line (\d+) and (\w+)/);n&&(t=`æ ‡ç­¾ä¸åŒ¹é…: <${n[1]}> å’Œ </${n[3]}>`)}return{nearbyNpcs:[],bondedNpcs:[],options:[],log:`XMLè§£æå¤±è´¥: ${e}\nä½ç½®ï¼š ${t}ï¼Œè¯·æ£€æŸ¥AIç”Ÿæˆçš„XMLæ ¼å¼ã€‚`}}const l=(e,t=n)=>t.querySelector(e),o=(e,t=n)=>t.querySelectorAll(e),c=(e,t=n)=>{try{const n=t.querySelector(e);return n&&n.textContent||''}catch(t){return console.warn(`è§£ææ ‡ç­¾ ${e} æ—¶å‡ºé”™:`,t),'æ•°æ®å¼‚å¸¸'}},i={nearbyNpcs:[],bondedNpcs:[],options:[],log:c('log')},r=n.querySelector('character');if(r)try{const e=l('name',r),t=e?.textContent?.trim()||'',a=e?.getAttribute('alias')?.trim();i.character={name:t,alias:a,status:c('status',r),alignment:c('alignment',r).trim(),power:c('power',r).trim(),info:c('info',r).trim(),ov:parseInt(l('info',r)?.getAttribute('ov')||'0',10),kv:parseInt(l('info',r)?.getAttribute('kv')||'0',10),abilities:U(c('abilities',r)),titles:U(a),effects:U(c('effects',r)),thought:c('thought',r).trim()};const o=l('status',r);Object.assign(i.character,Q(o));const s=n.querySelector('inventory');if(s){const e=l('items',s);i.character.inventory={items:U(c('items',s)),currency:c('currency',s).trim(),weapon:e?.getAttribute('weapon')?.trim()||'',armor:e?.getAttribute('armor')?.trim()||'',accessories:e?.getAttribute('accessories')?.trim()||''}}}catch(e){console.error('è§£æè§’è‰²æ•°æ®æ—¶å‡ºé”™:',e),i.character={name:'æ•°æ®å¼‚å¸¸',status:'æ•°æ®å¼‚å¸¸',alignment:'æ•°æ®å¼‚å¸¸',power:'æ•°æ®å¼‚å¸¸',abilities:['æ•°æ®å¼‚å¸¸'],titles:['æ•°æ®å¼‚å¸¸'],effects:['æ•°æ®å¼‚å¸¸']}}const s=n.querySelector('world');if(s)try{i.world={time:c('time',s).trim(),location:c('location',s).trim(),environment:c('environment',s).trim(),dynamics:c('dynamics',s).trim(),quests:[],factions:[]},o('journal > quest').forEach(e=>{try{const t=e.getAttribute('type')||'æ”¯çº¿',n=e.textContent?.trim()||'',a=e.getAttribute('bcd')?.trim(),l=e.getAttribute('ecd')?.trim();i.world.quests.push({type:t,content:n,bcd:a,ecd:l})}catch(e){console.warn('è§£æä»»åŠ¡æ•°æ®æ—¶å‡ºé”™:',e),i.world.quests.push({type:'æ•°æ®å¼‚å¸¸',content:'æ•°æ®å¼‚å¸¸'})}}),o('factions > faction').forEach(e=>{try{const t=e.getAttribute('name')||'',n=e.textContent?.trim()||'';i.world.factions.push({name:t,value:n})}catch(e){console.warn('è§£ææ´¾ç³»æ•°æ®æ—¶å‡ºé”™:',e),i.world.factions.push({name:'æ•°æ®å¼‚å¸¸',value:'æ•°æ®å¼‚å¸¸'})}})}catch(e){console.error('è§£æä¸–ç•Œæ•°æ®æ—¶å‡ºé”™:',e),i.world={time:'æ•°æ®å¼‚å¸¸',location:'æ•°æ®å¼‚å¸¸',environment:'æ•°æ®å¼‚å¸¸',dynamics:'æ•°æ®å¼‚å¸¸',quests:[{type:'æ•°æ®å¼‚å¸¸',content:'æ•°æ®å¼‚å¸¸'}],factions:[{name:'æ•°æ®å¼‚å¸¸',value:'æ•°æ®å¼‚å¸¸'}]}}const m=e=>{try{const t=c('name',e).trim(),n=c('status',e),a=e.getAttribute('sr'),o=e.getAttribute('sd'),i=e.getAttribute('affection'),r={name:t,info:c('info',e).trim(),power:c('power',e).trim(),status:n,location:e.getAttribute('location')?.trim(),sr:'æ˜¯'===a,sd:o?parseInt(o,10):void 0,affection:i?parseInt(i,10):void 0,abilities:U(c('abilities',e)),effects:U(c('effects',e))},s=l('items',e);if(s){const t=c('items',e);r.inventory={items:t?U(t):[],weapon:s.getAttribute('weapon')?.trim()||'',armor:s.getAttribute('armor')?.trim()||'',accessories:s.getAttribute('accessories')?.trim()||''}}const m=l('status',e);return Object.assign(r,Q(m)),r}catch(e){return console.warn('è§£æNPCæ•°æ®æ—¶å‡ºé”™:',e),{name:'æ•°æ®å¼‚å¸¸',info:'æ•°æ®å¼‚å¸¸',power:'æ•°æ®å¼‚å¸¸',status:'æ•°æ®å¼‚å¸¸',abilities:['æ•°æ®å¼‚å¸¸'],effects:['æ•°æ®å¼‚å¸¸']}}};o('nearby_npcs > npc').forEach(e=>{i.nearbyNpcs.push(m(e))}),o('bonded_characters > npc').forEach(e=>{i.bondedNpcs.push(m(e))});const d=n.querySelector('options');if(d)try{o('option',d).forEach(e=>{try{const t=e.getAttribute('id')||'',n=e.getAttribute('type')||'',a='true'===e.getAttribute('disabled'),l=e.textContent?.trim()||'';i.options.push({id:t,content:l,type:n,disabled:a})}catch(e){console.warn('è§£æé€‰é¡¹æ•°æ®æ—¶å‡ºé”™:',e),i.options.push({id:'æ•°æ®å¼‚å¸¸',content:'æ•°æ®å¼‚å¸¸',disabled:!0})}})}catch(e){console.error('è§£æé€‰é¡¹èŠ‚ç‚¹æ—¶å‡ºé”™:',e),i.options=[{id:'æ•°æ®å¼‚å¸¸',content:'æ•°æ®å¼‚å¸¸',disabled:!0}]}return i}catch(e){return console.error('å‘½è¿ç»ˆç«¯æ•°æ®è§£æå¤±è´¥:',e),null}}()),n=(0,a.ref)('fate-scroll'),l=['gufeng','xianxia','minsu','wuxia','xuanhuan','nihon'],r=(0,a.ref)({visible:!1,type:'ability',title:'',position:{x:0,y:0},target:null,equipmentType:'',isEquipped:!1,maxQuantity:99}),s=(0,a.ref)({visible:!1,position:{x:0,y:0},itemName:'',quantity:1,actionType:'give',title:'é€‰æ‹©å¯¹è±¡'}),p=(0,a.computed)(()=>({'console-wrapper':!0,[`theme-${J.value}`]:!0,collapsed:G.value,'fixed-layout':'fixed'===K.value})),u=(0,a.computed)(()=>G.value?de('COLLAPSE_TEXT'):de('EXPAND_TEXT')),v=(0,a.computed)(()=>G.value?de('COLLAPSE_ICON'):de('EXPAND_ICON')),f=(0,a.computed)(()=>'fixed'===K.value?de('LAYOUT_FIXED_TEXT'):de('LAYOUT_DIFFUSION_TEXT')),g=(0,a.computed)(()=>'fixed'===K.value?de('LAYOUT_FIXED_ICON'):de('LAYOUT_DIFFUSION_ICON')),y=(0,a.computed)(()=>ee.value?de('EFFECTS_ON_TEXT'):de('EFFECTS_OFF_TEXT')),E=(0,a.computed)(()=>te.value?de('DIRECT_SEND_ON_TEXT'):de('DIRECT_SEND_OFF_TEXT')),b=(0,a.computed)(()=>te.value?de('DIRECT_SEND_ON_ICON'):de('DIRECT_SEND_OFF_ICON')),k=(0,a.computed)(()=>de('EFFECTS_ON_ICON')),N=(0,a.computed)(()=>de('EFFECTS_OFF_ICON')),h=(0,a.computed)(()=>t.value?.log?t.value.log.split(/\r?\n/).filter(e=>''!==e.trim()).map(e=>e.trim()):[]);function V(e){return{gufeng:'å¤é£',xianxia:'ä»™ä¾ ',minsu:'æ°‘ä¿—',wuxia:'æ­¦ä¾ ',xuanhuan:'ç„å¹»',nihon:'æ—¥å¼'}[e]||e}function C(e,t,n){const a=r.value.target?.name||r.value.target;var l,o;'ability'===r.value.type?'use'===e?(d('Using ability',o=a),m(`ä½¿ç”¨ï¼š${o}`)):'study'===e&&function(e){d('Studying ability',e),m(`ç ”ä¹ ï¼š${e}`)}(a):'item'===r.value.type?'use'===e&&t?function(e,t){d(`Using ${t} of item`,e),m(`ä½¿ç”¨ï¼š${e} x${t}`)}(a,t):'give'===e&&t?function(e,t){d(`Giving ${t} of item`,e),s.value={visible:!0,position:{x:300,y:200},itemName:e,quantity:t,actionType:'give',title:'é€‰æ‹©ç»™äºˆå¯¹è±¡'}}(a,t):'discard'===e&&t&&function(e,t){d(`Discarding ${t} of item`,e),m(`ä¸¢å¼ƒï¼š${e} x${t}`)}(a,t):'quest'===r.value.type?'start'===e?function(e){const t=D(e);d('Starting quest',t),m(`å¼€å§‹ä»»åŠ¡ï¼š${t}`)}(a):'abandon'===e&&function(e){const t=D(e);d('Abandoning quest',t),m(`æ”¾å¼ƒä»»åŠ¡ï¼š${t}`)}(a):'equipment'===r.value.type?'equip'===e?(d('Equipping item',l=a),m(`è£…ä¸Š${l}`)):'unequip'===e?function(e){d('Unequipping item',e),m(`å¸ä¸‹${e}`)}(a):'give'===e?function(e){d('Giving item',e),s.value={visible:!0,position:{x:300,y:200},itemName:e,quantity:1,actionType:'give',title:'é€‰æ‹©ç»™äºˆå¯¹è±¡'}}(a):'discard'===e&&function(e){d('Discarding equipped item',e),m(`ä¸¢å¼ƒ${e}`)}(a):'rest'===r.value.type?'nap'===e?(d('Taking a nap',''),m('å°æ†©ä¸€ä¼šå„¿ï¼Œæš‚æ—¶ä¸æƒ³å…¶ä»–çš„äº‹æƒ…ã€‚')):'sleep'===e?(d('Going to sleep',''),m('ç›´æ¥å°±å¯ï¼Œæ—¶é—´æ¥åˆ°ç¬¬äºŒå¤©ã€‚')):'invite'===e&&(d('Inviting to sleep',''),s.value={visible:!0,position:{x:300,y:200},itemName:'é‚€è¯·å…±å¯',quantity:1,actionType:'invite',title:'é€‰æ‹©é‚€è¯·å¯¹è±¡'}):'npc_inventory'===r.value.type&&'steal'===e&&n&&function(e,t){if(0===t.length)return;const n=e?.name||e,a=t.join('ã€');d('Stealing items from',n),m(`å·çªƒï¼š${n}çš„${a}`)}(a,n)}function S(){r.value.visible=!1}function B(){const e=[];return t.value?.bondedNpcs&&t.value.bondedNpcs.forEach(t=>{e.push({name:t.name,location:t.location})}),t.value?.nearbyNpcs&&t.value.nearbyNpcs.forEach(t=>{e.push({name:t.name,location:t.location})}),e}function w(e){const t=s.value.itemName,n=s.value.quantity,a=s.value.actionType;let l='';if('give'===a){const a=n>1?` x${n}`:'';l=`ç»™äºˆ${e.name}ï¼š${t}${a}`}else'invite'===a&&(l=`é‚€è¯·${e.name}å…±å¯ï¼Œå¹¶ä¸æ‰“ç®—è½»æ˜“ç¡å»ã€‚`);d('NPC interaction',l),m(l),x()}function x(){s.value.visible=!1}function D(e){const t=e.match(/^\(([^)]+)\)/);return t?t[1]:e}function q(e){return e||'çŠ¶æ€æœªçŸ¥'}function T(){return t.value?.character?.ov||0}function F(){return t.value?.character?.kv||0}let I='',O=0,M=0;function A(e,t){if(e!==O||t!==M){let n,a;O=e,M=t,n=e<=-33?'æ··ä¹±':e<=33?'ä¸­ç«‹':'å®ˆåº',a=t<=-33?'é‚ªæ¶':t<=33?'ä¸­ç«‹':'å–„è‰¯',I='å®ˆåº'===n&&'å–„è‰¯'===a?'å®ˆåºå–„è‰¯':'å®ˆåº'===n&&'ä¸­ç«‹'===a?'å®ˆåºä¸­ç«‹':'å®ˆåº'===n&&'é‚ªæ¶'===a?'å®ˆåºé‚ªæ¶':'ä¸­ç«‹'===n&&'å–„è‰¯'===a?'ä¸­ç«‹å–„è‰¯':'ä¸­ç«‹'===n&&'ä¸­ç«‹'===a?'ç»å¯¹ä¸­ç«‹':'ä¸­ç«‹'===n&&'é‚ªæ¶'===a?'ä¸­ç«‹é‚ªæ¶':'æ··ä¹±'===n&&'å–„è‰¯'===a?'æ··ä¹±å–„è‰¯':'æ··ä¹±'===n&&'ä¸­ç«‹'===a?'æ··ä¹±ä¸­ç«‹':'æ··ä¹±'===n&&'é‚ªæ¶'===a?'æ··ä¹±é‚ªæ¶':'æœªçŸ¥é˜µè¥'}return I}function L(e){const t=e.match(/(\d+)\s*\/\s*(\d+)/);if(!t)return'0%';const[,n,a]=t;return`${parseFloat(a)>0?parseFloat(n)/parseFloat(a)*100:0}%`}function X(e){return e<-33?'#FFA500':e>33?'#00BFFF':'#6b7280'}function R(e){return e<-33?'#DC143C':e>33?'#00FF7F':'#6b7280'}function Y(e){return i(e).map(e=>({name:o(e),color:c(e)}))}function W(){const e=t.value?.character?.inventory;return!!(e?.weapon||e?.armor||e?.accessories)}function ne(e,t,n){d('Showing equipment menu for',e),r.value={visible:!0,type:'equipment',title:e,position:{x:n.clientX,y:n.clientY},target:{name:e},equipmentType:t,isEquipped:!0,maxQuantity:99}}function ae(e,t){d('Showing NPC inventory for',e.name),r.value={visible:!0,type:'npc_inventory',title:`${e.name}çš„ç‰©å“`,position:{x:t.clientX,y:t.clientY},target:e,equipmentType:'',isEquipped:!1,maxQuantity:99}}return(0,a.onMounted)(()=>{!function(){try{const e=localStorage.getItem(H);if(e){const t=JSON.parse(e);Z.value={...j,...t}}}catch(e){console.error('è¯»å–è®°å¿†å¤±è´¥:',e)}}()}),(e,c)=>((0,a.openBlock)(),(0,a.createElementBlock)('div',{class:(0,a.normalizeClass)(['fate-console',p.value]),'data-effects-enabled':(0,a.unref)(ee)?'true':'false','data-direct-send-enabled':(0,a.unref)(te)?'true':'false'},[(0,a.createCommentVNode)(' æ§åˆ¶é¢æ¿ '),(0,a.createElementVNode)('div',zt,[(0,a.createElementVNode)('div',Xt,[((0,a.openBlock)(),(0,a.createElementBlock)(a.Fragment,null,(0,a.renderList)(l,e=>(0,a.createElementVNode)('div',{key:e,class:(0,a.normalizeClass)(['theme-stone',{active:(0,a.unref)(J)===e}]),'data-theme':e,title:V(e),onClick:t=>(0,a.unref)(ce)(e)},null,10,Pt)),64))]),(0,a.createElementVNode)('div',{id:'direct-send-toggle-btn',class:'console-control-btn',title:E.value,onClick:c[0]||(c[0]=(...e)=>(0,a.unref)(me)&&(0,a.unref)(me)(...e))},[(0,a.createElementVNode)('span',Qt,(0,a.toDisplayString)(b.value),1),(0,a.createElementVNode)('span',Rt,(0,a.toDisplayString)(b.value),1)],8,Ut),(0,a.createElementVNode)('div',{id:'effects-toggle-btn',class:'console-control-btn',title:y.value,onClick:c[1]||(c[1]=(...e)=>(0,a.unref)(se)&&(0,a.unref)(se)(...e))},[(0,a.createElementVNode)('span',Ht,(0,a.toDisplayString)(k.value),1),(0,a.createElementVNode)('span',jt,(0,a.toDisplayString)(N.value),1)],8,Yt),(0,a.createElementVNode)('div',{id:'layout-toggle-btn',class:'console-control-btn',title:f.value,onClick:c[2]||(c[2]=(...e)=>(0,a.unref)(re)&&(0,a.unref)(re)(...e))},[(0,a.createElementVNode)('span',Wt,(0,a.toDisplayString)(g.value),1),(0,a.createElementVNode)('span',Jt,(0,a.toDisplayString)(g.value),1)],8,Zt),(0,a.createElementVNode)('div',{id:'console-toggle-btn',class:'console-control-btn',title:u.value,onClick:c[3]||(c[3]=(...e)=>(0,a.unref)(ie)&&(0,a.unref)(ie)(...e))},[(0,a.createElementVNode)('span',Kt,(0,a.toDisplayString)(v.value),1),(0,a.createElementVNode)('span',en,(0,a.toDisplayString)(v.value),1)],8,Gt)]),(0,a.createCommentVNode)(' æŠ˜å è§†å›¾ '),(0,a.createElementVNode)('div',tn,[t.value?.character?((0,a.openBlock)(),(0,a.createElementBlock)('div',nn,[(0,a.createElementVNode)('h3',an,(0,a.toDisplayString)((0,a.unref)(ue)('collapsedCharTitle')),1),(0,a.createElementVNode)('div',ln,[(0,a.createElementVNode)('div',on,(0,a.toDisplayString)(t.value.character.name)+' - '+(0,a.toDisplayString)(q(t.value.character.status)),1),(0,a.createElementVNode)('div',cn,[(0,a.createElementVNode)('span',rn,(0,a.toDisplayString)((0,a.unref)(pe)('alignment')),1),(0,a.createElementVNode)('span',sn,(0,a.toDisplayString)(A(T(),F())),1),(0,a.createElementVNode)('div',{class:'alignment-circle ov-circle',style:(0,a.normalizeStyle)({background:X(T())})},(0,a.toDisplayString)(T()),5),(0,a.createElementVNode)('div',{class:'alignment-circle kv-circle',style:(0,a.normalizeStyle)({background:R(F())})},(0,a.toDisplayString)(F()),5)])]),(0,a.createElementVNode)('div',mn,[t.value.character.hp?((0,a.openBlock)(),(0,a.createElementBlock)('div',dn,[(0,a.createElementVNode)('div',{class:'progress-bar-fill hp',style:(0,a.normalizeStyle)({width:L(t.value.character.hp)})},null,4),(0,a.createElementVNode)('span',pn,(0,a.toDisplayString)(t.value.character.hp),1)])):(0,a.createCommentVNode)('v-if',!0),t.value.character.mp?((0,a.openBlock)(),(0,a.createElementBlock)('div',un,[(0,a.createElementVNode)('div',{class:'progress-bar-fill mp',style:(0,a.normalizeStyle)({width:L(t.value.character.mp)})},null,4),(0,a.createElementVNode)('span',vn,(0,a.toDisplayString)(t.value.character.mp),1)])):(0,a.createCommentVNode)('v-if',!0),t.value.character.sta?((0,a.openBlock)(),(0,a.createElementBlock)('div',fn,[(0,a.createElementVNode)('div',{class:'progress-bar-fill sta',style:(0,a.normalizeStyle)({width:L(t.value.character.sta)})},null,4),(0,a.createElementVNode)('span',gn,(0,a.toDisplayString)(t.value.character.sta),1)])):(0,a.createCommentVNode)('v-if',!0)]),t.value.character.info?((0,a.openBlock)(),(0,a.createElementBlock)('div',yn,[(0,a.createElementVNode)('span',En,(0,a.toDisplayString)(t.value.character.info),1)])):(0,a.createCommentVNode)('v-if',!0),t.value.character.power?((0,a.openBlock)(),(0,a.createElementBlock)('div',bn,[(0,a.createElementVNode)('span',kn,(0,a.toDisplayString)((0,a.unref)(pe)('power')),1),(0,a.createElementVNode)('span',Nn,(0,a.toDisplayString)(t.value.character.power),1)])):(0,a.createCommentVNode)('v-if',!0),t.value.character.effects.length?((0,a.openBlock)(),(0,a.createElementBlock)('div',hn,[(0,a.createElementVNode)('span',Vn,(0,a.toDisplayString)((0,a.unref)(pe)('effects')),1),(0,a.createElementVNode)('div',Cn,[((0,a.openBlock)(!0),(0,a.createElementBlock)(a.Fragment,null,(0,a.renderList)(t.value.character.effects,e=>((0,a.openBlock)(),(0,a.createElementBlock)('span',{key:e,class:'tag'},(0,a.toDisplayString)(e),1))),128))])])):(0,a.createCommentVNode)('v-if',!0)])):(0,a.createCommentVNode)('v-if',!0),t.value?.world?((0,a.openBlock)(),(0,a.createElementBlock)('div',Sn,[(0,a.createElementVNode)('h3',Bn,(0,a.toDisplayString)((0,a.unref)(ue)('collapsedWorldTitle')),1),t.value.world.time?((0,a.openBlock)(),(0,a.createElementBlock)('div',wn,[(0,a.createElementVNode)('span',xn,(0,a.toDisplayString)((0,a.unref)(pe)('time')),1),(0,a.createElementVNode)('span',Dn,(0,a.toDisplayString)(t.value.world.time),1)])):(0,a.createCommentVNode)('v-if',!0),t.value.world.location?((0,a.openBlock)(),(0,a.createElementBlock)('div',_n,[(0,a.createElementVNode)('span',qn,(0,a.toDisplayString)((0,a.unref)(pe)('location')),1),(0,a.createElementVNode)('span',Tn,(0,a.toDisplayString)(t.value.world.location),1)])):(0,a.createCommentVNode)('v-if',!0),t.value.world.environment?((0,a.openBlock)(),(0,a.createElementBlock)('div',Fn,[(0,a.createElementVNode)('span',In,(0,a.toDisplayString)((0,a.unref)(pe)('environment')),1),(0,a.createElementVNode)('span',On,(0,a.toDisplayString)(t.value.world.environment),1)])):(0,a.createCommentVNode)('v-if',!0),t.value.world.dynamics?((0,a.openBlock)(),(0,a.createElementBlock)('div',$n,[(0,a.createElementVNode)('span',Mn,(0,a.toDisplayString)((0,a.unref)(pe)('dynamics')),1),(0,a.createElementVNode)('span',An,(0,a.toDisplayString)(t.value.world.dynamics),1)])):(0,a.createCommentVNode)('v-if',!0)])):(0,a.createCommentVNode)('v-if',!0)]),(0,a.createCommentVNode)(' å±•å¼€è§†å›¾ '),(0,a.createElementVNode)('div',Ln,[(0,a.createElementVNode)('nav',zn,[(0,a.createElementVNode)('button',{class:(0,a.normalizeClass)(['tab-btn',{active:'fate-scroll'===n.value}]),onClick:c[4]||(c[4]=e=>n.value='fate-scroll')},(0,a.toDisplayString)((0,a.unref)(ue)('tab1')),3),(0,a.createElementVNode)('button',{class:(0,a.normalizeClass)(['tab-btn',{active:'annals'===n.value}]),onClick:c[5]||(c[5]=e=>n.value='annals')},(0,a.toDisplayString)((0,a.unref)(ue)('tab2')),3),(0,a.createElementVNode)('button',{class:(0,a.normalizeClass)(['tab-btn',{active:'fate-scroll-2'===n.value}]),onClick:c[6]||(c[6]=e=>n.value='fate-scroll-2')},(0,a.toDisplayString)((0,a.unref)(ue)('tab3')),3),(0,a.createElementVNode)('button',{class:(0,a.normalizeClass)(['tab-btn',{active:'music-player'===n.value}]),onClick:c[7]||(c[7]=e=>n.value='music-player')},(0,a.toDisplayString)((0,a.unref)(ue)('tab4')),3)]),(0,a.createCommentVNode)(' å±±æ²³å†Œ/å¤©æœºå·/é£ç‰©å¿—/æ­¦æ—è°±/ä¸‡è±¡å½• æ ‡ç­¾é¡µ '),(0,a.createElementVNode)('div',{id:'fate-scroll',class:(0,a.normalizeClass)(['tab-panel',{active:'fate-scroll'===n.value}])},[(0,a.createElementVNode)('div',Xn,[(0,a.createCommentVNode)(' è§’è‰²ä¿¡æ¯åˆ— '),t.value?.character?((0,a.openBlock)(),(0,a.createElementBlock)('div',Pn,[(0,a.createElementVNode)('div',Un,[(0,a.createElementVNode)('h2',Qn,[(0,a.createElementVNode)('span',{class:'char-name clickable',onClick:c[8]||(c[8]=e=>{return t=e,d('Showing rest menu',''),void(r.value={visible:!0,type:'rest',title:'ä¼‘æ¯é€‰é¡¹',position:{x:t.clientX,y:t.clientY},target:{name:'rest'},equipmentType:'',isEquipped:!1,maxQuantity:99});var t})},(0,a.toDisplayString)(t.value.character.name),1),c[9]||(c[9]=(0,a.createElementVNode)('span',null,'-',-1)),(0,a.createElementVNode)('span',null,(0,a.toDisplayString)(q(t.value.character.status)),1)]),(0,a.createElementVNode)('div',Rn,[t.value.character.hp?((0,a.openBlock)(),(0,a.createElementBlock)('div',Yn,[(0,a.createElementVNode)('div',{class:'progress-bar-fill hp',style:(0,a.normalizeStyle)({width:L(t.value.character.hp)})},null,4),(0,a.createElementVNode)('span',Hn,(0,a.toDisplayString)(t.value.character.hp),1)])):(0,a.createCommentVNode)('v-if',!0),t.value.character.mp?((0,a.openBlock)(),(0,a.createElementBlock)('div',jn,[(0,a.createElementVNode)('div',{class:'progress-bar-fill mp',style:(0,a.normalizeStyle)({width:L(t.value.character.mp)})},null,4),(0,a.createElementVNode)('span',Zn,(0,a.toDisplayString)(t.value.character.mp),1)])):(0,a.createCommentVNode)('v-if',!0),t.value.character.sta?((0,a.openBlock)(),(0,a.createElementBlock)('div',Wn,[(0,a.createElementVNode)('div',{class:'progress-bar-fill sta',style:(0,a.normalizeStyle)({width:L(t.value.character.sta)})},null,4),(0,a.createElementVNode)('span',Jn,(0,a.toDisplayString)(t.value.character.sta),1)])):(0,a.createCommentVNode)('v-if',!0)]),t.value.character.info?((0,a.openBlock)(),(0,a.createElementBlock)('div',Gn,[(0,a.createElementVNode)('span',Kn,(0,a.toDisplayString)(t.value.character.info),1)])):(0,a.createCommentVNode)('v-if',!0),(0,a.createElementVNode)('div',ea,[(0,a.createElementVNode)('span',ta,(0,a.toDisplayString)((0,a.unref)(pe)('alignment')),1),(0,a.createElementVNode)('span',na,(0,a.toDisplayString)(A(T(),F())),1),(0,a.createElementVNode)('div',{class:'alignment-circle ov-circle',style:(0,a.normalizeStyle)({background:X(T())})},(0,a.toDisplayString)(T()),5),(0,a.createElementVNode)('div',{class:'alignment-circle kv-circle',style:(0,a.normalizeStyle)({background:R(F())})},(0,a.toDisplayString)(F()),5)]),(0,a.createElementVNode)('div',aa,[(0,a.createElementVNode)('span',la,(0,a.toDisplayString)((0,a.unref)(pe)('power')),1),(0,a.createElementVNode)('span',oa,(0,a.toDisplayString)(t.value.character.power),1)]),t.value.character.abilities.length?((0,a.openBlock)(),(0,a.createElementBlock)('div',ca,[(0,a.createElementVNode)('span',ia,(0,a.toDisplayString)((0,a.unref)(pe)('abilities')),1),(0,a.createElementVNode)('div',ra,[((0,a.openBlock)(!0),(0,a.createElementBlock)(a.Fragment,null,(0,a.renderList)(t.value.character.abilities,e=>((0,a.openBlock)(),(0,a.createElementBlock)('span',{key:e,class:'tag clickable',onClick:t=>function(e,t){console.log('Showing ability menu for:',e),r.value={visible:!0,type:'ability',title:`${e}`,position:{x:t.clientX,y:t.clientY},target:{name:e},equipmentType:'',isEquipped:!1,maxQuantity:99}}(e,t)},(0,a.toDisplayString)(e),9,sa))),128))])])):(0,a.createCommentVNode)('v-if',!0),t.value.character.titles.length?((0,a.openBlock)(),(0,a.createElementBlock)('div',ma,[(0,a.createElementVNode)('span',da,(0,a.toDisplayString)((0,a.unref)(pe)('titles')),1),(0,a.createElementVNode)('div',pa,[((0,a.openBlock)(!0),(0,a.createElementBlock)(a.Fragment,null,(0,a.renderList)(t.value.character.titles,e=>((0,a.openBlock)(),(0,a.createElementBlock)('span',{key:e,class:'tag'},(0,a.toDisplayString)(e),1))),128))])])):(0,a.createCommentVNode)('v-if',!0),t.value.character.effects.length?((0,a.openBlock)(),(0,a.createElementBlock)('div',ua,[(0,a.createElementVNode)('span',va,(0,a.toDisplayString)((0,a.unref)(pe)('effects')),1),(0,a.createElementVNode)('div',fa,[((0,a.openBlock)(!0),(0,a.createElementBlock)(a.Fragment,null,(0,a.renderList)(t.value.character.effects,e=>((0,a.openBlock)(),(0,a.createElementBlock)('span',{key:e,class:'tag'},(0,a.toDisplayString)(e),1))),128))])])):(0,a.createCommentVNode)('v-if',!0)]),(0,a.createCommentVNode)(' ç‰©å“æ  '),t.value.character.inventory?((0,a.openBlock)(),(0,a.createElementBlock)('div',ga,[(0,a.createElementVNode)('h2',ya,(0,a.toDisplayString)((0,a.unref)(ue)('inventory')),1),(0,a.createCommentVNode)(' ç©¿æˆ´è£…å¤‡ '),W()?((0,a.openBlock)(),(0,a.createElementBlock)('div',Ea,[(0,a.createElementVNode)('span',ba,(0,a.toDisplayString)((0,a.unref)(pe)('equipment')),1),(0,a.createElementVNode)('div',ka,[t.value.character.inventory.weapon?((0,a.openBlock)(),(0,a.createElementBlock)('div',Na,[c[10]||(c[10]=(0,a.createElementVNode)('span',{class:'equipment-icon'},'âš”ï¸',-1)),(0,a.createElementVNode)('span',ha,[((0,a.openBlock)(!0),(0,a.createElementBlock)(a.Fragment,null,(0,a.renderList)(Y(t.value.character.inventory.weapon),(e,n)=>((0,a.openBlock)(),(0,a.createElementBlock)('span',{key:n,style:(0,a.normalizeStyle)({color:e.color}),class:'equipment-item clickable',onClick:t=>ne(e.name,'weapon',t)},(0,a.toDisplayString)(e.name)+(0,a.toDisplayString)(n<Y(t.value.character.inventory.weapon).length-1?', ':''),13,Va))),128))])])):(0,a.createCommentVNode)('v-if',!0),t.value.character.inventory.armor?((0,a.openBlock)(),(0,a.createElementBlock)('div',Ca,[c[11]||(c[11]=(0,a.createElementVNode)('span',{class:'equipment-icon'},'ğŸ›¡ï¸',-1)),(0,a.createElementVNode)('span',Sa,[((0,a.openBlock)(!0),(0,a.createElementBlock)(a.Fragment,null,(0,a.renderList)(Y(t.value.character.inventory.armor),(e,n)=>((0,a.openBlock)(),(0,a.createElementBlock)('span',{key:n,style:(0,a.normalizeStyle)({color:e.color}),class:'equipment-item clickable',onClick:t=>ne(e.name,'armor',t)},(0,a.toDisplayString)(e.name)+(0,a.toDisplayString)(n<Y(t.value.character.inventory.armor).length-1?', ':''),13,Ba))),128))])])):(0,a.createCommentVNode)('v-if',!0),t.value.character.inventory.accessories?((0,a.openBlock)(),(0,a.createElementBlock)('div',wa,[c[12]||(c[12]=(0,a.createElementVNode)('span',{class:'equipment-icon'},'ğŸ’',-1)),(0,a.createElementVNode)('span',xa,[((0,a.openBlock)(!0),(0,a.createElementBlock)(a.Fragment,null,(0,a.renderList)(Y(t.value.character.inventory.accessories),(e,n)=>((0,a.openBlock)(),(0,a.createElementBlock)('span',{key:n,style:(0,a.normalizeStyle)({color:e.color}),class:'equipment-item clickable',onClick:t=>ne(e.name,'accessories',t)},(0,a.toDisplayString)(e.name)+(0,a.toDisplayString)(n<Y(t.value.character.inventory.accessories).length-1?', ':''),13,Da))),128))])])):(0,a.createCommentVNode)('v-if',!0)])])):(0,a.createCommentVNode)('v-if',!0),t.value.character.inventory.items?.length?((0,a.openBlock)(),(0,a.createElementBlock)('div',_a,[(0,a.createElementVNode)('span',qa,(0,a.toDisplayString)((0,a.unref)(pe)('items')),1),(0,a.createElementVNode)('div',Ta,[((0,a.openBlock)(!0),(0,a.createElementBlock)(a.Fragment,null,(0,a.renderList)(t.value.character.inventory.items,e=>((0,a.openBlock)(),(0,a.createElementBlock)('span',{key:e,class:'tag clickable',onClick:t=>function(e,t){if(d('Showing item menu for',e),!e.match(/\((æ™®é€š|ç²¾è‰¯|ç¨€æœ‰|å²è¯—|ä¼ å¥‡)\)$/)){const n=e.match(/\((\d+)\)$/),a=n?parseInt(n[1],10):1,l=e.replace(/\s*\(\d+\)$/,'');r.value={visible:!0,type:'item',title:l,position:{x:t.clientX,y:t.clientY},target:{name:l},equipmentType:'',isEquipped:!1,maxQuantity:a}}else{const n=o(e);r.value={visible:!0,type:'equipment',title:n,position:{x:t.clientX,y:t.clientY},target:{name:n},equipmentType:'weapon',isEquipped:!1,maxQuantity:99}}}(e,t)},(0,a.toDisplayString)(e),9,Fa))),128))])])):(0,a.createCommentVNode)('v-if',!0),t.value.character.inventory.currency?((0,a.openBlock)(),(0,a.createElementBlock)('div',Ia,[(0,a.createElementVNode)('span',Oa,(0,a.toDisplayString)((0,a.unref)(pe)('currency')),1),(0,a.createElementVNode)('span',$a,(0,a.toDisplayString)(t.value.character.inventory.currency),1)])):(0,a.createCommentVNode)('v-if',!0)])):(0,a.createCommentVNode)('v-if',!0)])):(0,a.createCommentVNode)('v-if',!0),(0,a.createCommentVNode)(' ä¸–ç•Œä¿¡æ¯åˆ— '),t.value?.world?((0,a.openBlock)(),(0,a.createElementBlock)('div',Ma,[(0,a.createElementVNode)('div',Aa,[(0,a.createElementVNode)('h2',La,(0,a.toDisplayString)((0,a.unref)(ue)('worldStatus')),1),t.value.world.time?((0,a.openBlock)(),(0,a.createElementBlock)('div',za,[(0,a.createElementVNode)('span',Xa,(0,a.toDisplayString)((0,a.unref)(pe)('time')),1),(0,a.createElementVNode)('span',Pa,(0,a.toDisplayString)(t.value.world.time),1)])):(0,a.createCommentVNode)('v-if',!0),t.value.world.location?((0,a.openBlock)(),(0,a.createElementBlock)('div',Ua,[(0,a.createElementVNode)('span',Qa,(0,a.toDisplayString)((0,a.unref)(pe)('location')),1),(0,a.createElementVNode)('span',Ra,(0,a.toDisplayString)(t.value.world.location),1)])):(0,a.createCommentVNode)('v-if',!0),t.value.world.environment?((0,a.openBlock)(),(0,a.createElementBlock)('div',Ya,[(0,a.createElementVNode)('span',Ha,(0,a.toDisplayString)((0,a.unref)(pe)('environment')),1),(0,a.createElementVNode)('span',ja,(0,a.toDisplayString)(t.value.world.environment),1)])):(0,a.createCommentVNode)('v-if',!0),t.value.world.dynamics?((0,a.openBlock)(),(0,a.createElementBlock)('div',Za,[(0,a.createElementVNode)('span',Wa,(0,a.toDisplayString)((0,a.unref)(pe)('dynamics')),1),(0,a.createElementVNode)('span',Ja,(0,a.toDisplayString)(t.value.world.dynamics),1)])):(0,a.createCommentVNode)('v-if',!0)]),(0,a.createCommentVNode)(' ä»»åŠ¡æ—¥å¿— '),t.value.world.quests.length?((0,a.openBlock)(),(0,a.createElementBlock)('div',Ga,[(0,a.createElementVNode)('h2',Ka,(0,a.toDisplayString)((0,a.unref)(ue)('journal')),1),(0,a.createElementVNode)('div',el,[((0,a.openBlock)(!0),(0,a.createElementBlock)(a.Fragment,null,(0,a.renderList)(t.value.world.quests,e=>{return(0,a.openBlock)(),(0,a.createElementBlock)('div',{key:e.content,class:(0,a.normalizeClass)(['info-line','quest-'+('ä¸»çº¿'===e.type?'main':'side')])},[(0,a.createElementVNode)('span',tl,(0,a.toDisplayString)((0,a.unref)(pe)('ä¸»çº¿'===e.type?'questMain':'questSide')),1),(0,a.createElementVNode)('span',nl,[(0,a.createElementVNode)('span',{class:'quest-title clickable',onClick:t=>function(e,t){console.log('Showing quest menu for:',e),r.value={visible:!0,type:'quest',title:`ä»»åŠ¡ï¼š${D(e.content)}`,position:{x:t.clientX,y:t.clientY},target:{name:e.content},equipmentType:'',isEquipped:!1,maxQuantity:99}}(e,t)},(0,a.toDisplayString)(D(e.content)),9,al),(0,a.createTextVNode)(' '+(0,a.toDisplayString)((t=e.content,t.replace(/^\([^)]+\)\s*/,'')))+' ',1),void 0!==e.bcd?((0,a.openBlock)(),(0,a.createElementBlock)('span',ll,'æœªå¼€å§‹ï¼š'+(0,a.toDisplayString)(e.bcd)+'åå¼€å§‹',1)):void 0!==e.ecd?((0,a.openBlock)(),(0,a.createElementBlock)('span',ol,'è¿›è¡Œä¸­ï¼š'+(0,a.toDisplayString)(e.ecd)+'åç»“æŸ',1)):(0,a.createCommentVNode)('v-if',!0)])],2);var t}),128))])])):(0,a.createCommentVNode)('v-if',!0),(0,a.createCommentVNode)(' æ´¾ç³» '),t.value.world.factions.length?((0,a.openBlock)(),(0,a.createElementBlock)('div',cl,[(0,a.createElementVNode)('h2',il,(0,a.toDisplayString)((0,a.unref)(ue)('factions')),1),((0,a.openBlock)(!0),(0,a.createElementBlock)(a.Fragment,null,(0,a.renderList)(t.value.world.factions,e=>((0,a.openBlock)(),(0,a.createElementBlock)('div',{key:e.name,class:'info-line'},[(0,a.createElementVNode)('span',rl,(0,a.toDisplayString)(e.name)+':',1),(0,a.createElementVNode)('span',sl,(0,a.toDisplayString)(e.value),1)]))),128))])):(0,a.createCommentVNode)('v-if',!0)])):(0,a.createCommentVNode)('v-if',!0)])],2),(0,a.createCommentVNode)(' ç¬¬ä¸‰ä¸ªæ ‡ç­¾é¡µ - é€‰é¡¹åŒºåŸŸ '),(0,a.createElementVNode)('div',{id:'fate-scroll-2',class:(0,a.normalizeClass)(['tab-panel',{active:'fate-scroll-2'===n.value}])},[(0,a.createElementVNode)('div',ml,[(0,a.createElementVNode)('div',dl,[(0,a.createElementVNode)('div',pl,[(0,a.createElementVNode)('div',ul,[(0,a.createElementVNode)('h2',vl,(0,a.toDisplayString)((0,a.unref)(ue)('optionsTitle')),1)]),(0,a.createElementVNode)('div',fl,[((0,a.openBlock)(!0),(0,a.createElementBlock)(a.Fragment,null,(0,a.renderList)(t.value?.options,e=>((0,a.openBlock)(),(0,a.createElementBlock)('div',{key:e.id,class:(0,a.normalizeClass)(['option-card',{disabled:e.disabled}]),onClick:t=>!e.disabled&&function(e){d('Selected option',e.content),m(e.content)}(e)},[(0,a.createElementVNode)('div',yl,[(0,a.createElementVNode)('span',El,[(0,a.createTextVNode)((0,a.toDisplayString)(e.content),1),e.type?((0,a.openBlock)(),(0,a.createElementBlock)('span',bl,'('+(0,a.toDisplayString)(e.type)+')',1)):(0,a.createCommentVNode)('v-if',!0)])])],10,gl))),128)),t.value?.options?.length?(0,a.createCommentVNode)('v-if',!0):((0,a.openBlock)(),(0,a.createElementBlock)('div',kl,'æš‚æ— é€‰é¡¹'))])])])])],2),(0,a.createCommentVNode)(' éŸ¶åéŸ³/äº‘æ°´è°£/ä¿šä¿—è°ƒ/é•¿é£æ­Œ/å¤ªè™šåŸ/èƒ§å¤œæ›² æ ‡ç­¾é¡µ '),(0,a.createElementVNode)('div',{id:'music-player',class:(0,a.normalizeClass)(['tab-panel',{active:'music-player'===n.value}])},[(0,a.createElementVNode)('div',Nl,[(0,a.createElementVNode)('div',hl,[(0,a.createElementVNode)('div',Vl,[(0,a.createElementVNode)('h2',Cl,(0,a.toDisplayString)((0,a.unref)(ue)('tab4')),1),(0,a.createVNode)(Ye)])])])],2),(0,a.createCommentVNode)(' è¡£å† è°±/ä»™ç¼˜å½•/å¼‚é—»å½•/æ©ä»‡å½•/ç¥é­‚è°± æ ‡ç­¾é¡µ '),(0,a.createElementVNode)('div',{id:'annals',class:(0,a.normalizeClass)(['tab-panel',{active:'annals'===n.value}])},[(0,a.createElementVNode)('div',Sl,[(0,a.createCommentVNode)(' ç¾ç»Šè§’è‰² '),t.value?.bondedNpcs.length?((0,a.openBlock)(),(0,a.createElementBlock)('div',Bl,[(0,a.createElementVNode)('div',wl,[(0,a.createElementVNode)('h2',xl,(0,a.toDisplayString)((0,a.unref)(ue)('bonded')),1),(0,a.createElementVNode)('div',Dl,[((0,a.openBlock)(!0),(0,a.createElementBlock)(a.Fragment,null,(0,a.renderList)(t.value.bondedNpcs,e=>((0,a.openBlock)(),(0,a.createBlock)(_t,{key:e.name,npc:e,bonded:!0,onShowNpcInventory:ae},null,8,['npc']))),128))])])])):(0,a.createCommentVNode)('v-if',!0),(0,a.createCommentVNode)(' é™„è¿‘NPC '),t.value?.nearbyNpcs.length?((0,a.openBlock)(),(0,a.createElementBlock)('div',_l,[(0,a.createElementVNode)('div',ql,[(0,a.createElementVNode)('h2',Tl,(0,a.toDisplayString)((0,a.unref)(ue)('nearby')),1),(0,a.createElementVNode)('div',Fl,[((0,a.openBlock)(!0),(0,a.createElementBlock)(a.Fragment,null,(0,a.renderList)(t.value.nearbyNpcs,e=>((0,a.openBlock)(),(0,a.createBlock)(_t,{key:e.name,npc:e,bonded:!1,onShowNpcInventory:ae},null,8,['npc']))),128))])])])):(0,a.createCommentVNode)('v-if',!0)])],2)]),(0,a.createCommentVNode)(' æ—¥å¿—åŒºåŸŸ '),t.value?.log?((0,a.openBlock)(),(0,a.createElementBlock)('div',Il,[(0,a.createElementVNode)('h3',Ol,(0,a.toDisplayString)((0,a.unref)(ue)('logTitle')),1),(0,a.createElementVNode)('div',$l,[((0,a.openBlock)(!0),(0,a.createElementBlock)(a.Fragment,null,(0,a.renderList)(h.value,e=>((0,a.openBlock)(),(0,a.createElementBlock)('p',{key:e,class:'log-entry'},(0,a.toDisplayString)(e),1))),128))])])):(0,a.createCommentVNode)('v-if',!0),(0,a.createCommentVNode)(' åŠ¨ä½œèœå• '),(0,a.createVNode)(P,{visible:r.value.visible,type:r.value.type,title:r.value.title,position:r.value.position,'max-quantity':r.value.maxQuantity,'is-equipped':r.value.isEquipped,target:r.value.target,onSelect:C,onClose:S},null,8,['visible','type','title','position','max-quantity','is-equipped','target']),(0,a.createCommentVNode)(' NPCé€‰æ‹©èœå• '),(0,a.createVNode)(At,{visible:s.value.visible,position:s.value.position,'available-npcs':B(),title:s.value.title,'action-type':s.value.actionType,onSelect:w,onClose:x},null,8,['visible','position','available-npcs','title','action-type'])],10,Lt))}}),Al=(0,n.createRouter)({history:(0,n.createMemoryHistory)(),routes:[{path:'/',component:Ml}]});Al.replace('/'),$(()=>{(0,a.createApp)(Ml).use(Al).mount('#app')});</script><style>.action-menu-overlay[data-v-702fe1fd]{position:fixed;top:0;left:0;right:0;bottom:0;background:rgba(0,0,0,.3);z-index:1000;display:flex;align-items:center;justify-content:center}.action-menu[data-v-702fe1fd]{background:var(--bg-panel);border:2px solid var(--primary-color);border-radius:8px;box-shadow:0 4px 20px rgba(0,0,0,.5);min-width:200px;max-width:400px;z-index:1001}.action-menu-header[data-v-702fe1fd]{padding:12px 16px;border-bottom:1px solid var(--border-section);background:var(--bg-section)}.action-menu-header h4[data-v-702fe1fd]{margin:0;color:var(--text-header);font-size:1.1em;font-weight:bold}.action-menu-content[data-v-702fe1fd]{padding:12px 16px}.action-menu-content .action-btn[data-v-702fe1fd]{display:block;width:100%;padding:8px 12px;margin:4px 0;background:var(--primary-color);color:#000;font-weight:bold;border:none;border-radius:4px;cursor:pointer;font-size:.9em;transition:all .2s ease}.action-menu-content .action-btn[data-v-702fe1fd]:hover{background:var(--glow-color);transform:translateY(-1px)}.action-menu-content .quantity-input[data-v-702fe1fd]{display:flex;align-items:center;gap:4px;margin-bottom:12px}.action-menu-content .quantity-input label[data-v-702fe1fd]{color:var(--text-main);font-size:.9em}.action-menu-content .quantity-input .quantity-controls[data-v-702fe1fd]{display:flex;align-items:center;gap:2px}.action-menu-content .quantity-input .quantity-controls .quantity-btn[data-v-702fe1fd]{width:24px;height:24px;padding:0;border:1px solid var(--border-section);border-radius:4px;background:var(--bg-card);color:var(--text-main);font-size:1em;font-weight:bold;display:flex;align-items:center;justify-content:center;transition:transform .2s ease}.action-menu-content .quantity-input .quantity-controls .quantity-btn[data-v-702fe1fd]:hover:not(:disabled){background:var(--bg-card);border-color:var(--border-section)}.action-menu-content .quantity-input .quantity-controls .quantity-btn[data-v-702fe1fd]:active:not(:disabled){transform:scale(0.95)}.action-menu-content .quantity-input .quantity-controls .quantity-btn[data-v-702fe1fd]:disabled{cursor:not-allowed;opacity:.5}.action-menu-content .quantity-input .quantity-controls .quantity-field[data-v-702fe1fd]{width:50px;padding:4px 6px;border:1px solid var(--border-section);border-radius:4px;background:var(--bg-card);color:var(--text-main);text-align:center;-webkit-appearance:none;appearance:textfield}.action-menu-content .quantity-input .quantity-controls .quantity-field[data-v-702fe1fd]:focus{outline:none;border-color:var(--primary-color)}.action-menu-content .quantity-input .quantity-controls .quantity-field[data-v-702fe1fd]::-webkit-outer-spin-button,.action-menu-content .quantity-input .quantity-controls .quantity-field[data-v-702fe1fd]::-webkit-inner-spin-button{-webkit-appearance:none;appearance:none;margin:0}.action-menu-content .quantity-input .quantity-controls .quantity-field[data-v-702fe1fd]::-moz-number-spin-box{display:none}.action-menu-content .quantity-input .quantity-max[data-v-702fe1fd]{color:var(--text-main);font-size:.9em;opacity:.8}.action-menu-content .npc-inventory-content[data-v-702fe1fd]{max-height:300px;overflow-y:auto}.action-menu-content .npc-inventory-content .inventory-section[data-v-702fe1fd]{margin-bottom:16px}.action-menu-content .npc-inventory-content .inventory-section h5[data-v-702fe1fd]{margin:0 0 8px 0;color:var(--text-header);font-size:1em;font-weight:bold;border-bottom:1px solid var(--border-section);padding-bottom:4px}.action-menu-content .npc-inventory-content .inventory-section .inventory-items .inventory-item[data-v-702fe1fd]{display:flex;align-items:center;gap:8px;margin-bottom:4px;padding:4px;border-radius:4px;background:var(--bg-card);border:1px solid var(--border-section)}.action-menu-content .npc-inventory-content .inventory-section .inventory-items .inventory-item .item-checkbox[data-v-702fe1fd]{margin:0;width:16px;height:16px}.action-menu-content .npc-inventory-content .inventory-section .inventory-items .inventory-item .item-label[data-v-702fe1fd]{flex:1;cursor:pointer;font-size:.9em;color:var(--text-main);margin:0}.action-menu-content .npc-inventory-content .inventory-section .inventory-items .inventory-item[data-v-702fe1fd]:hover{background:var(--bg-card);border-color:var(--primary-color)}.action-menu-content .steal-btn[data-v-702fe1fd]{background:crimson !important;color:#fff !important}.action-menu-content .steal-btn[data-v-702fe1fd]:hover:not(:disabled){background:#b22222 !important}.action-menu-content .steal-btn[data-v-702fe1fd]:disabled{background:#666 !important;cursor:not-allowed;opacity:.6}
.music-player-container[data-v-d500285e]{display:flex;flex-direction:column;gap:15px;width:100%;height:100%;min-height:400px}.music-controls[data-v-d500285e]{display:flex;justify-content:center;align-items:center;gap:15px;padding:15px;background:var(--bg-section);border-radius:8px;border:1px solid var(--border-section)}.music-btn[data-v-d500285e]{background:var(--primary-color);color:#000;border:2px solid var(--primary-color);border-radius:50%;width:50px;height:50px;display:flex;align-items:center;justify-content:center;cursor:pointer;font-size:1.2em;transition:all .3s ease;position:relative;overflow:hidden}.music-btn[data-v-d500285e]:hover:not(:disabled){background:var(--glow-color);transform:scale(1.1);box-shadow:0 0 15px var(--glow-color)}.music-btn[data-v-d500285e]:active:not(:disabled){transform:scale(0.95)}.music-btn[data-v-d500285e]:disabled{opacity:.5;cursor:not-allowed}.music-btn.play-btn[data-v-d500285e]{width:60px;height:60px;font-size:1.5em;background:var(--accent-color);border-color:var(--accent-color)}.music-btn.play-btn.playing[data-v-d500285e]{animation:pulse-playing-d500285e 1.5s ease-in-out infinite}.music-btn.shuffle-btn.active[data-v-d500285e],.music-btn.repeat-btn.active[data-v-d500285e],.music-btn.volume-btn.muted[data-v-d500285e],.music-btn.mode-btn[data-v-d500285e]{background:var(--primary-color);border-color:var(--primary-color);color:#000}.music-btn.shuffle-btn.active[data-v-d500285e]:hover:not(:disabled),.music-btn.repeat-btn.active[data-v-d500285e]:hover:not(:disabled),.music-btn.volume-btn.muted[data-v-d500285e]:hover:not(:disabled),.music-btn.mode-btn[data-v-d500285e]:hover:not(:disabled){background:var(--glow-color);border-color:var(--glow-color);box-shadow:0 0 15px var(--glow-color)}@keyframes pulse-playing-d500285e{0%,100%{transform:scale(1)}50%{transform:scale(1.05)}}.current-track-info[data-v-d500285e]{background:var(--bg-section);border:1px solid var(--border-section);border-radius:8px;padding:15px;text-align:center}.track-title[data-v-d500285e]{font-size:1.3em;font-weight:bold;color:var(--text-header);margin-bottom:5px;text-shadow:0 0 8px var(--glow-color)}.track-artist[data-v-d500285e]{font-size:1em;color:var(--text-main);opacity:.8;margin-bottom:10px}.progress-container[data-v-d500285e]{margin-bottom:10px}.music-progress[data-v-d500285e]{margin-bottom:5px}.music-fill[data-v-d500285e]{background:linear-gradient(90deg,var(--primary-color),var(--accent-color));transition:width .3s ease}.time-display[data-v-d500285e]{display:flex;justify-content:space-between;font-size:.9em;color:var(--text-main);opacity:.8}.entry-switcher[data-v-d500285e]{background:var(--bg-section);border:1px solid var(--border-section);border-radius:8px;padding:12px;margin-bottom:15px}.entry-selector[data-v-d500285e]{display:flex;align-items:center;gap:10px}.entry-label[data-v-d500285e]{font-size:.9em;color:var(--text-main);font-weight:500}.entry-select[data-v-d500285e]{background:var(--bg-card);border:1px solid var(--border-section);border-radius:6px;padding:6px 10px;color:var(--text-main);font-size:.9em;min-width:120px;cursor:pointer}.entry-select[data-v-d500285e]:focus{outline:none;border-color:var(--primary-color);box-shadow:0 0 0 2px rgba(102,126,234,.2)}.entry-select option[data-v-d500285e]{background:var(--bg-card);color:var(--text-main)}.playlist-container[data-v-d500285e]{background:var(--bg-section);border:1px solid var(--border-section);border-radius:8px;padding:15px;flex:1;min-height:200px;max-height:300px}.playlist-title[data-v-d500285e]{font-size:1.2em;color:var(--text-header);margin-bottom:15px;text-align:center;text-shadow:0 0 8px var(--glow-color)}.playlist[data-v-d500285e]{display:flex;flex-direction:column;gap:8px;overflow-y:auto;max-height:100%}.playlist-item[data-v-d500285e]{display:flex;justify-content:space-between;align-items:center;padding:10px 12px;background:var(--bg-card);border:1px solid var(--border-section);border-radius:6px;cursor:pointer;transition:all .3s ease}.playlist-item[data-v-d500285e]:hover{background:var(--bg-card);border-color:var(--primary-color);transform:translateY(-2px);box-shadow:0 4px 8px rgba(0,0,0,.2)}.playlist-item.active[data-v-d500285e]{background:var(--primary-color);border-color:var(--primary-color);color:#000;box-shadow:0 0 15px var(--glow-color)}.track-info[data-v-d500285e]{flex:1}.track-duration[data-v-d500285e]{font-size:.9em;color:var(--text-main);opacity:.7;margin-left:15px}.spectrum-container[data-v-d500285e]{display:flex;align-items:flex-end;justify-content:center;gap:2px;height:80px;margin-top:15px;padding:10px;background:rgba(0,0,0,.2);border-radius:8px;border:1px solid rgba(102,126,234,.3)}.spectrum-bar[data-v-d500285e]{width:6px;min-height:4px;border-radius:3px;transition:height .1s ease-out;box-shadow:0 0 4px currentColor}
.npc-select-overlay[data-v-a2228b2a]{position:fixed;top:0;left:0;right:0;bottom:0;background:rgba(0,0,0,.3);z-index:1000;display:flex;align-items:center;justify-content:center}.npc-select-menu[data-v-a2228b2a]{background:var(--bg-panel);border:2px solid var(--primary-color);border-radius:8px;box-shadow:0 4px 20px rgba(0,0,0,.5);min-width:200px;max-width:300px;z-index:1001}.npc-select-header[data-v-a2228b2a]{padding:12px 16px;border-bottom:1px solid var(--border-section);background:var(--bg-section)}.npc-select-header h4[data-v-a2228b2a]{margin:0;color:var(--text-header);font-size:1.1em;font-weight:bold}.npc-select-content[data-v-a2228b2a]{padding:8px 0;max-height:300px;overflow-y:auto}.npc-select-content .npc-list .npc-option[data-v-a2228b2a]{display:flex;align-items:center;justify-content:space-between;padding:10px 16px;cursor:pointer;transition:background-color .2s ease}.npc-select-content .npc-list .npc-option[data-v-a2228b2a]:hover{background:var(--bg-card)}.npc-select-content .npc-list .npc-option .npc-name[data-v-a2228b2a]{color:var(--text-main);font-weight:500}.npc-select-content .npc-list .npc-option .npc-location[data-v-a2228b2a]{color:var(--text-secondary);font-size:.9em}
:root{--bg-card:#2a231c;--card-texture:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAKCAYAAACNMs+9AAAAAXNSR0IArs4c6QAAAD5JREFUKFN1jKENADAIAsie//9n7g5W1sAIgtA54h7M47n4LpweR45zYAUkI5Oi6VEvrp/fGBsQhAEd8q23fQGWbALfWzvxjAAAAABJRU5ErkJggg==");--font-header:"Ma Shan Zheng",cursive;--font-body:"Noto Serif SC",serif;--primary-color:#c89b3c;--glow-color:rgba(255,215,0,0.6);--accent-color:#e74c3c;--bonded-color:#f472b6;--bg-panel:rgba(30,25,20,0.85);--bg-section:rgba(10,5,0,0.4);--border-section:rgba(200,155,60,0.3);--text-main:#f0e6d2;--text-header:var(--primary-color);--hp-color:#c0392b;--mp-color:#2980b9;--sta-color:#27ae60;--sd-color:#e879f9;--affection-color:#f1c40f;--bg-image:url("https://www.transparenttextures.com/patterns/paper-3.png");--title-icon-content:"";--title-icon-svg:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='currentColor'%3E%3Cpath d='M12,2A10,10,0,1,0,22,12,10,10,0,0,0,12,2Zm0,18a8,8,0,1,1,8-8A8,8,0,0,1,12,20ZM15,8H9V16h6Z'/%3E%3C/svg%3E");--wrapper-border-radius:10px}.theme-xianxia{--primary-color:#34d399;--glow-color:rgba(167,243,208,0.7);--accent-color:#f59e0b;--bonded-color:#e53e3e;--bg-panel:rgba(15,30,25,0.85);--bg-section:rgba(5,15,10,0.4);--border-section:rgba(52,211,153,0.3);--text-main:#e0f2f1;--text-header:var(--primary-color);--bg-image:url("https://www.transparenttextures.com/patterns/xv.png");--title-icon-content:"â˜¯";--title-icon-svg:none;--bg-card:#182825}.theme-minsu{--primary-color:#ef4444;--glow-color:rgba(252,165,165,0.7);--accent-color:#facc15;--bonded-color:var(--accent-color);--bg-panel:rgba(40,10,10,0.85);--bg-section:rgba(20,0,0,0.4);--border-section:rgba(239,68,68,0.3);--text-main:#fef2f2;--text-header:#fca5a5;--bg-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='80' height='80'%3E%3Cg fill='%23a11d1d' opacity='0.35'%3E%3Cpath d='M15 8 C 10 5, 5 10, 8 15 L 12 18 C 15 22, 22 20, 20 15 Z' /%3E%3Ccircle cx='50' cy='10' r='5' /%3E%3Cellipse cx='65' cy='60' rx='8' ry='4' transform='rotate(45 65 60)' /%3E%3Cpath d='M30 70 C 25 75, 35 80, 40 75 L 42 72 C 45 68, 38 65, 35 68 Z' /%3E%3Ccircle cx='10' cy='50' r='3' /%3E%3Ccircle cx='70' cy='30' r='2' /%3E%3C/g%3E%3C/svg%3E");--title-icon-content:"ğŸ®";--title-icon-svg:none;--bg-card:#3a1a1a}.theme-wuxia{--primary-color:#e5e7eb;--glow-color:rgba(255,255,255,0.3);--accent-color:#dc2626;--bonded-color:#34d399;--bg-panel:rgba(17,24,39,0.9);--bg-section:rgba(31,41,55,0.5);--border-section:rgba(229,231,235,0.3);--text-main:#f9fafb;--text-header:var(--primary-color);--bg-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='40' height='40'%3E%3Cpath d='M0 10 H15 V25 H0 V40 H30 V10 H40 V0 H10 V-10' fill='none' stroke='rgba(229, 231, 235, 0.15)' stroke-width='2'/%3E%3C/svg%3E");--title-icon-content:"";--title-icon-svg:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='currentColor'%3E%3Cpath d='M12.5,2C10.8,2,9.5,3.3,9.5,5s1.3,3,3,3,3-1.3,3-3S14.2,2,12.5,2z M12,9C7.58,9,4,12.58,4,17s3.58,8,8,8,8-3.58,8-8S16.42,9,12,9z'/%3E%3C/svg%3E");--wrapper-border-radius:2px;--bg-card:#2c3342}.theme-xuanhuan{--primary-color:#8b5cf6;--glow-color:rgba(196,181,253,0.6);--accent-color:#38bdf8;--bonded-color:var(--accent-color);--bg-panel:rgba(5,5,15,0.9);--bg-section:rgba(0,0,0,0.4);--border-section:rgba(139,92,246,0.3);--text-main:#e9d5ff;--text-header:#c4b5fd;--bg-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='100' height='100'%3E%3Crect width='100' height='100' fill='rgba(5,5,15,0)'/%3E%3Ccircle cx='10' cy='15' r='1.5' fill='rgba(233,213,255,0.7)'/%3E%3Ccircle cx='80' cy='10' r='1' fill='rgba(233,213,255,0.5)'/%3E%3Ccircle cx='50' cy='30' r='2' fill='rgba(233,213,255,0.9)'/%3E%3Ccircle cx='30' cy='60' r='1.2' fill='rgba(233,213,255,0.6)'/%3E%3Ccircle cx='90' cy='70' r='1.8' fill='rgba(233,213,255,0.8)'/%3E%3Ccircle cx='60' cy='90' r='1' fill='rgba(233,213,255,0.5)'/%3E%3Ccircle cx='5' cy='80' r='1.3' fill='rgba(233,213,255,0.7)'/%3E%3Ccircle cx='70' cy='50' r='1.5' fill='rgba(233,213,255,0.9)'/%3E%3C/svg%3E");--title-icon-content:"";--title-icon-svg:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='currentColor'%3E%3Cpath d='M12,2A10,10,0,0,0,4.2,5.23a1,1,0,0,0,1.28,1.52,7.91,7.91,0,0,1,13.06,0,1,1,0,0,0,1.28-1.52A10,10,0,0,0,12,2Zm0,20a10,10,0,0,0,7.8-3.23,1,1,0,0,0-1.28-1.52,7.91,7.91,0,0,1-13.06,0,1,1,0,1,0-1.28,1.52A10,10,0,0,0,12,22Zm-2-8a2,2,0,1,1,2,2A2,2,0,0,1,10,14Zm6.46-5.8a1,1,0,0,0-1.63-.5,5.92,5.92,0,0,0-9.66,0,1,1,0,1,0-1.63.5,8,8,0,0,1,12.92,0Z'/%3E%3C/svg%3E");--bg-card:#1f1d2e}.theme-nihon{--primary-color:#ff69b4;--glow-color:rgba(255,105,180,0.6);--accent-color:#ff9800;--bonded-color:#ffffff;--bg-panel:rgba(40,20,30,0.85);--bg-section:rgba(20,5,15,0.4);--border-section:rgba(233,30,99,0.3);--text-main:#fce4ec;--text-header:#e91e63;--bg-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='80' height='80'%3E%3Cdefs%3E%3Cpattern id='sakura' patternUnits='userSpaceOnUse' width='80' height='80'%3E%3Cg opacity='0.08'%3E%3Cpath d='M40 10 C 35 5, 25 5, 20 10 C 15 15, 15 25, 20 30 C 25 35, 35 35, 40 30 C 45 25, 45 15, 40 10 Z' fill='%23ff69b4'/%3E%3Cpath d='M60 30 C 55 25, 45 25, 40 30 C 35 35, 35 45, 40 50 C 45 55, 55 55, 60 50 C 65 45, 65 35, 60 30 Z' fill='%23ffb3d9'/%3E%3Cpath d='M20 50 C 15 45, 5 45, 0 50 C -5 55, -5 65, 0 70 C 5 75, 15 75, 20 70 C 25 65, 25 55, 20 50 Z' fill='%23ff69b4'/%3E%3C/g%3E%3C/pattern%3E%3C/defs%3E%3Crect width='100%25' height='100%25' fill='url(%23sakura)'/%3E%3C/svg%3E");--title-icon-content:"ğŸŒ¸";--title-icon-svg:none;--bg-card:#2d1b2d}.fate-console{position:relative;font-family:var(--font-body);background-color:var(--bg-panel);background-image:var(--bg-image);border:3px solid rgba(0,0,0,0);border-image:linear-gradient(to bottom right,var(--primary-color),#ffd700,var(--primary-color)) 1;border-radius:var(--wrapper-border-radius);padding:15px;padding-top:45px;margin:10px 0;box-shadow:0 0 20px var(--glow-color),inset 0 0 15px rgba(0,0,0,.7),0 0 0 1px hsla(0,0%,100%,.1),0 4px 8px rgba(0,0,0,.3);color:var(--text-main);backdrop-filter:blur(3px);transition:all .4s ease-in-out;animation:fade-in .6s ease-out;transition:all .3s ease;overflow:hidden}.fate-console[data-effects-enabled=true]::after{content:"";position:absolute;top:-3px;left:-3px;right:-3px;bottom:-3px;background:linear-gradient(45deg,transparent,var(--primary-color),transparent,var(--glow-color),transparent,var(--primary-color),transparent);background-size:400% 400%;border-radius:var(--wrapper-border-radius);opacity:.3;animation:shimmer 3s ease-in-out infinite;pointer-events:none;z-index:-1}.fate-console[data-effects-enabled=true]::before{content:"";position:absolute;top:-2px;left:-2px;right:-2px;bottom:-2px;background:repeating-linear-gradient(0deg,transparent,transparent 3px,rgba(255,255,255,0.1) 3px,rgba(255,255,255,0.1) 6px),repeating-linear-gradient(90deg,transparent,transparent 3px,rgba(255,255,255,0.1) 3px,rgba(255,255,255,0.1) 6px),linear-gradient(135deg,var(--primary-color),transparent,var(--primary-color));background-size:20px 20px,20px 20px,100% 100%;border-radius:var(--wrapper-border-radius);opacity:.3;animation:border-pattern 8s linear infinite;pointer-events:none;-webkit-mask:linear-gradient(#fff 0 0) content-box,linear-gradient(#fff 0 0);mask:linear-gradient(#fff 0 0) content-box,linear-gradient(#fff 0 0);-webkit-mask-composite:xor;mask-composite:xor;-webkit-mask:linear-gradient(#fff 0 0) content-box,linear-gradient(#fff 0 0);-webkit-mask-composite:xor;padding:2px}@keyframes border-pattern{0%{background-position:0 0,0 0,0 0}100%{background-position:20px 20px,20px 20px,100% 100%}}.theme-xianxia .fate-console{border-image:none;border:3px solid rgba(0,0,0,0);box-shadow:0 0 10px var(--primary-color),0 0 25px var(--glow-color),inset 0 0 15px rgba(0,0,0,.7)}.theme-minsu .fate-console{border-image:none;border:3px dashed var(--primary-color)}.theme-wuxia .fate-console{border-image-source:url("data:image/svg+xml;charset=utf-8,%3Csvg width='100' height='100' viewBox='0 0 100 100' xmlns='http://www.w3.org/2000/svg'%3E%3Cstyle%3Epath%7Bfill:%23e5e7eb%7D%3C/style%3E%3Cpath d='M2.1-2.1c-1.7 1.7-1.7 4.5 0 6.1l6.1 6.1c1.7 1.7 4.5 1.7 6.1 0l-6.1-6.1c-1.7-1.7-4.4-1.7-6.1 0zM10.3 6.1c-1.7 1.7-1.7 4.5 0 6.1l6.1 6.1c1.7 1.7 4.5 1.7 6.1 0l-6.1-6.1c-1.7-1.7-4.4-1.7-6.1 0zM18.4 14.2c-1.7 1.7-1.7 4.5 0 6.1l6.1 6.1c1.7 1.7 4.5 1.7 6.1 0l-6.1-6.1c-1.7-1.7-4.4-1.7-6.1 0zM26.5 22.3c-1.7 1.7-1.7 4.5 0 6.1l6.1 6.1c1.7 1.7 4.5 1.7 6.1 0l-6.1-6.1c-1.7-1.7-4.4-1.7-6.1 0zM34.6 30.4c-1.7 1.7-1.7 4.5 0 6.1l6.1 6.1c1.7 1.7 4.5 1.7 6.1 0l-6.1-6.1c-1.7-1.7-4.4-1.7-6.1 0zM42.7 38.5c-1.7 1.7-1.7 4.5 0 6.1l6.1 6.1c1.7 1.7 4.5 1.7 6.1 0l-6.1-6.1c-1.7-1.7-4.4-1.7-6.1 0zM50.8 46.6c-1.7 1.7-1.7 4.5 0 6.1l6.1 6.1c1.7 1.7 4.5 1.7 6.1 0l-6.1-6.1c-1.7-1.7-4.4-1.7-6.1 0zM58.9 54.7c-1.7 1.7-1.7 4.5 0 6.1l6.1 6.1c1.7 1.7 4.5 1.7 6.1 0l-6.1-6.1c-1.7-1.7-4.4-1.7-6.1 0zM67.1 62.9c-1.7 1.7-1.7 4.5 0 6.1l6.1 6.1c1.7 1.7 4.5 1.7 6.1 0l-6.1-6.1c-1.7-1.7-4.4-1.7-6.1 0zM75.2 71c-1.7 1.7-1.7 4.5 0 6.1l6.1 6.1c1.7 1.7 4.5 1.7 6.1 0l-6.1-6.1c-1.7-1.7-4.4-1.7-6.1 0zM83.3 79.1c-1.7 1.7-1.7 4.5 0 6.1l6.1 6.1c1.7 1.7 4.5 1.7 6.1 0l-6.1-6.1c-1.7-1.7-4.4-1.7-6.1 0zM91.4 87.2c-1.7 1.7-1.7 4.5 0 6.1l6.1 6.1c1.7 1.7 4.5 1.7 6.1 0l-6.1-6.1c-1.7-1.7-4.4-1.7-6.1 0z'/%3E%3C/svg%3E");border-image-slice:5;border-image-width:5px;border-image-repeat:stretch;border-width:5px}.theme-xuanhuan .fate-console{border-image:none;border:3px solid rgba(0,0,0,0);box-shadow:0 0 8px var(--glow-color),0 0 16px var(--primary-color),0 0 24px var(--accent-color),inset 0 0 15px rgba(0,0,0,.7)}.theme-nihon .fate-console{border-image:none;border:3px solid rgba(0,0,0,0);box-shadow:0 0 10px var(--glow-color),0 0 20px var(--primary-color),inset 0 0 15px rgba(0,0,0,.7)}.theme-nihon .section-title::before{background-color:rgba(0,0,0,0);filter:drop-shadow(0 0 3px var(--primary-color))}@keyframes fade-in{from{opacity:0;transform:scale(0.98)}to{opacity:1;transform:scale(1)}}@keyframes shimmer{0%{background-position:-200% 0}100%{background-position:200% 0}}@keyframes float{0%,100%{transform:translateY(0px)}50%{transform:translateY(-5px)}}@keyframes sparkle{0%,100%{opacity:0;transform:scale(0.8)}50%{opacity:1;transform:scale(1.2)}}@keyframes aurora{0%{background-position:0% 50%}50%{background-position:100% 50%}100%{background-position:0% 50%}}@keyframes rotate-slow{from{transform:rotate(0deg)}to{transform:rotate(360deg)}}@keyframes shake{0%,100%{transform:translateX(0)}10%,30%,50%,70%,90%{transform:translateX(-2px)}20%,40%,60%,80%{transform:translateX(2px)}}@keyframes sway{0%,100%{transform:rotate(-5deg)}50%{transform:rotate(5deg)}}@keyframes card-glow{0%,100%{box-shadow:0 6px 20px rgba(0,0,0,.5),0 0 8px var(--glow-color),0 0 15px var(--primary-color),inset 0 1px 3px rgba(0,0,0,.5)}50%{box-shadow:0 8px 25px rgba(0,0,0,.6),0 0 12px var(--glow-color),0 0 20px var(--primary-color),inset 0 1px 3px rgba(0,0,0,.5)}}@keyframes bonded-card-glow{0%,100%{box-shadow:0 6px 20px rgba(0,0,0,.4),0 0 15px var(--bonded-color),0 0 25px var(--bonded-color),inset 0 1px 3px rgba(0,0,0,.5)}50%{box-shadow:0 8px 25px rgba(0,0,0,.5),0 0 20px var(--bonded-color),0 0 35px var(--bonded-color),inset 0 1px 3px rgba(0,0,0,.5)}}@keyframes button-click{0%{transform:scale(1)}50%{transform:scale(0.95)}100%{transform:scale(1)}}.console-controls{position:absolute;top:10px;right:12px;display:flex;align-items:center;gap:8px;z-index:10}.console-control-btn{font-size:1.2em;color:var(--primary-color);cursor:pointer;transition:transform .2s,color .2s;font-family:sans-serif;position:relative;overflow:hidden}.console-control-btn::before{content:"";position:absolute;top:50%;left:50%;width:0;height:0;background:radial-gradient(circle,var(--glow-color) 0%,transparent 70%);border-radius:50%;transform:translate(-50%,-50%);transition:width .3s ease,height .3s ease;pointer-events:none}.console-control-btn:hover::before{width:40px;height:40px}.console-control-btn:hover{color:var(--glow-color);transform:scale(1.15)}.fate-console.collapsed .console-control-btn .icon-collapse{display:none}.fate-console.collapsed .console-control-btn .icon-expand{display:block}.fate-console.fixed-layout .console-control-btn .icon-fixed{display:none}.fate-console.fixed-layout .console-control-btn .icon-diffusion{display:block}.fate-console[data-effects-enabled=false] .console-control-btn .icon-effects-on{display:none}.fate-console[data-effects-enabled=false] .console-control-btn .icon-effects-off{display:block}.fate-console[data-effects-enabled=true] .console-control-btn .icon-effects-on{display:block}.fate-console[data-effects-enabled=true] .console-control-btn .icon-effects-off{display:none}.fate-console[data-direct-send-enabled=false] .console-control-btn .icon-direct-send-on{display:block}.fate-console[data-direct-send-enabled=false] .console-control-btn .icon-direct-send-off{display:none}.fate-console[data-direct-send-enabled=true] .console-control-btn .icon-direct-send-on{display:none}.fate-console[data-direct-send-enabled=true] .console-control-btn .icon-direct-send-off{display:block}.icon-expand,.icon-diffusion,.icon-effects-off,.icon-direct-send-off{display:none}.theme-switcher{display:flex;gap:6px}.theme-stone{width:18px;height:18px;border-radius:50%;cursor:pointer;border:2px solid hsla(0,0%,100%,.3);transition:all .2s;position:relative;overflow:hidden}.theme-stone::before{content:"";position:absolute;top:50%;left:50%;width:0;height:0;background:radial-gradient(circle,rgba(255,255,255,0.8) 0%,transparent 70%);border-radius:50%;transform:translate(-50%,-50%);transition:width .3s ease,height .3s ease;pointer-events:none}.theme-stone:hover::before{width:30px;height:30px}.theme-stone:hover{transform:scale(1.2)}.theme-stone.active{border-color:#fff;transform:scale(1.1);box-shadow:0 0 10px #fff}.theme-stone[data-theme=gufeng]{background:#c89b3c}.theme-stone[data-theme=xianxia]{background:#34d399}.theme-stone[data-theme=minsu]{background:#ef4444}.theme-stone[data-theme=wuxia]{background:#e5e7eb}.theme-stone[data-theme=xuanhuan]{background:#8b5cf6}.theme-stone[data-theme=nihon]{background:#e91e63}.collapsed-view{display:none}.fate-console.collapsed{padding:15px;padding-top:45px}.fate-console.collapsed .expanded-view,.fate-console.collapsed .log-container{display:none}.fate-console.collapsed .collapsed-view{display:grid;grid-template-columns:1fr 1fr;gap:12px}.collapsed-block{background:var(--bg-section);border:1px solid var(--border-section);border-radius:6px;padding:10px 12px}.collapsed-title{font-family:"Ma Shan Zheng","åæ–‡è¡Œæ¥·","åæ–‡æ¥·ä½“","KaiTi",cursive;font-size:1.5em;color:var(--text-header);margin-bottom:8px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;font-weight:normal;letter-spacing:.15em;text-shadow:0 0 8px var(--glow-color);transform:rotate(-1deg)}.fate-console.fixed-layout .expanded-view{height:70vw;overflow-y:auto;padding-right:8px;scrollbar-width:thin;scrollbar-color:var(--primary-color) rgba(0,0,0,.2)}.fate-console.fixed-layout .expanded-view::-webkit-scrollbar{width:6px}.fate-console.fixed-layout .expanded-view::-webkit-scrollbar-track{background:rgba(0,0,0,.2);border-radius:3px}.fate-console.fixed-layout .expanded-view::-webkit-scrollbar-thumb{background-color:var(--primary-color);border-radius:3px}.tab-nav{display:flex;gap:5px;border-bottom:2px solid var(--primary-color);margin-bottom:15px}.tab-btn{font-family:"Ma Shan Zheng","åæ–‡è¡Œæ¥·","åæ–‡æ¥·ä½“","KaiTi",cursive;font-size:1.8em;color:gray;background:rgba(0,0,0,.2);border:2px solid var(--primary-color);border-bottom:none;padding:5px 20px;border-radius:8px 8px 0 0;cursor:pointer;transform:translateY(2px);transition:all .2s ease;font-weight:normal;letter-spacing:.08em}.tab-btn:hover{color:var(--text-header);background:rgba(50,40,30,.4)}.tab-btn.active{color:var(--text-header);background:var(--bg-section);border-color:var(--primary-color);text-shadow:0 0 8px var(--glow-color)}.tab-panel{display:none}.tab-panel.active{display:block;animation:fade-in .4s}.tab-panel-grid,.character-annals-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(350px,1fr));gap:20px}.grid-column{display:flex;flex-direction:column;gap:15px}.section-box{background:var(--bg-section);border:1px solid var(--border-section);border-radius:6px;padding:12px;overflow:hidden;position:relative}.section-box::before{content:"";position:absolute;top:-1px;left:-1px;right:-1px;bottom:-1px;background:linear-gradient(135deg,transparent 0%,var(--primary-color) 20%,transparent 40%,var(--primary-color) 60%,transparent 80%,var(--primary-color) 100%);background-size:200% 200%;border-radius:6px;opacity:.2;animation:section-glow 4s ease-in-out infinite alternate;pointer-events:none}@keyframes section-glow{0%{opacity:.1;background-position:0% 0%}100%{opacity:.3;background-position:100% 100%}}.section-title{font-family:"Ma Shan Zheng","åæ–‡è¡Œæ¥·","åæ–‡æ¥·ä½“","KaiTi",cursive;font-size:1.8em;color:var(--text-header);text-shadow:0 0 8px var(--glow-color);padding-bottom:10px;margin:0 0 10px 0;display:flex;align-items:center;justify-content:center;gap:10px;border-bottom:none;font-weight:normal;letter-spacing:.1em;position:relative}.section-title::before{content:var(--title-icon-content,"");font-family:sans-serif;font-size:1.2em;color:var(--primary-color);display:inline-block;width:1.2em;height:1.2em;line-height:1.2em;text-align:center;flex-shrink:0;background-color:var(--primary-color);-webkit-mask-image:var(--title-icon-svg);mask-image:var(--title-icon-svg);-webkit-mask-repeat:no-repeat;mask-repeat:no-repeat;-webkit-mask-size:contain;mask-size:contain;-webkit-mask-position:center;mask-position:center}.theme-xianxia .section-title::before,.theme-minsu .section-title::before{background-color:rgba(0,0,0,0)}.theme-xianxia .section-title::before{animation:rotate-slow 8s linear infinite}.theme-nihon .section-title::before{animation:rotate-slow 6s linear infinite reverse}.theme-minsu .section-title::before{animation:sway 4s ease-in-out infinite;filter:drop-shadow(0 0 6px var(--primary-color)) drop-shadow(0 0 12px var(--accent-color))}.theme-wuxia .section-title::before{animation:pulse-icon 3s ease-in-out infinite}.theme-xuanhuan .section-title::before{animation:glow-icon 2s ease-in-out infinite alternate;filter:drop-shadow(0 0 4px var(--primary-color)) drop-shadow(0 0 8px var(--accent-color))}.theme-gufeng .section-title::before{animation:breathe-glow 3s ease-in-out infinite;filter:drop-shadow(0 0 6px var(--primary-color)) drop-shadow(0 0 12px var(--glow-color));transform-origin:center}@keyframes pulse-icon{0%,100%{transform:scale(1);opacity:.8}50%{transform:scale(1.1);opacity:1}}@keyframes glow-icon{0%{filter:drop-shadow(0 0 4px var(--primary-color)) drop-shadow(0 0 8px var(--accent-color)) brightness(1);transform:scale(1)}100%{filter:drop-shadow(0 0 12px var(--primary-color)) drop-shadow(0 0 20px var(--accent-color)) brightness(1.2);transform:scale(1.05)}}@keyframes shake-icon{0%,100%{transform:translateX(0px) rotate(0deg);filter:drop-shadow(0 0 6px var(--primary-color)) drop-shadow(0 0 12px var(--glow-color))}10%,30%,50%,70%,90%{transform:translateX(-1px) rotate(-1deg);filter:drop-shadow(0 0 8px var(--primary-color)) drop-shadow(0 0 15px var(--glow-color))}20%,40%,60%,80%{transform:translateX(1px) rotate(1deg);filter:drop-shadow(0 0 8px var(--primary-color)) drop-shadow(0 0 15px var(--glow-color))}}@keyframes breathe-glow{0%,100%{opacity:.8;transform:scale(1);filter:drop-shadow(0 0 6px var(--primary-color)) drop-shadow(0 0 12px var(--glow-color))}50%{opacity:1;transform:scale(1.05);filter:drop-shadow(0 0 10px var(--primary-color)) drop-shadow(0 0 20px var(--glow-color))}}.section-title::after{content:"";flex-grow:1;height:1px;background:linear-gradient(to right,var(--primary-color),transparent)}.char-name{font-size:1.2em;font-weight:bold}.progress-bar-group{display:flex;flex-direction:column;gap:8px;margin:10px 0}.progress-bar{width:100%;height:20px;background-color:#2c1d12;border-radius:5px;overflow:hidden;position:relative;border:1px solid #4a3c2d;box-shadow:inset 0 1px 3px rgba(0,0,0,.5);box-sizing:border-box}.progress-bar-fill{height:100%;transition:width .5s ease-in-out;background-image:repeating-linear-gradient(-45deg,transparent,transparent 5px,rgba(255,255,255,0.1) 5px,rgba(255,255,255,0.1) 10px)}.progress-bar-fill.hp{background-color:var(--hp-color)}.progress-bar-fill.mp{background-color:var(--mp-color)}.progress-bar-fill.sta{background-color:var(--sta-color)}.progress-bar-fill.sd{background-color:var(--sd-color)}.progress-bar-fill.affection{background-color:var(--affection-color)}.progress-bar-text{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);color:#fff;font-size:.8em;font-weight:bold;text-shadow:1px 1px 2px #000;white-space:nowrap}.info-line{display:flex;margin:6px 0;align-items:baseline}.alignment-circles{display:flex;gap:6px;margin-left:8px;align-items:center}.alignment-circle{width:24px;height:24px;border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:.75em;font-weight:bold;color:#fff;text-shadow:1px 1px 2px rgba(0,0,0,.8);border:1px solid hsla(0,0%,100%,.3);box-shadow:0 2px 4px rgba(0,0,0,.2);transition:transform .2s ease}.alignment-circle:hover{transform:scale(1.1)}.ov-circle{background:linear-gradient(135deg,#3b82f6,#1d4ed8)}.kv-circle{background:linear-gradient(135deg,#8b5cf6,#7c3aed)}.info-label{color:var(--text-header);font-weight:bold;margin-right:8px;white-space:nowrap;flex-shrink:0}.tags-container{display:flex;flex-wrap:wrap;gap:6px;margin-top:5px}.tag{background:rgba(200,155,60,.15);border:1px solid var(--primary-color);color:var(--text-main);padding:3px 10px;border-radius:4px;font-size:.85em;position:relative;overflow:hidden;transition:all .3s ease}.tag::before{content:"";position:absolute;top:0;left:-100%;width:100%;height:100%;background:linear-gradient(90deg,transparent,rgba(255,255,255,0.2),transparent);transition:left .5s ease}.tag:hover::before{left:100%}.tag.clickable{cursor:pointer;transition:all .2s ease}.tag.clickable:hover{background:rgba(200,155,60,.3);border-color:var(--glow-color);transform:translateY(-1px);box-shadow:0 2px 4px rgba(0,0,0,.2)}.quest-title{background:rgba(200,155,60,.15);border:1px solid var(--primary-color);color:var(--text-main);padding:3px 10px;border-radius:4px;font-size:1em;font-weight:bold;cursor:pointer;transition:all .2s ease}.quest-title:hover{background:rgba(200,155,60,.3);border-color:var(--glow-color);transform:translateY(-1px);box-shadow:0 2px 4px rgba(0,0,0,.2)}.equipped-items{display:flex;flex-direction:column;gap:6px;margin-top:8px}.equipment-line{display:flex;align-items:center;gap:8px}.equipment-icon{font-size:1.2em;min-width:20px;text-align:center}.equipment-list{flex:1;line-height:1.4}.equipment-item{font-weight:bold;margin-right:4px}.quest-list .info-line{border-left:3px solid var(--primary-color);padding-left:10px}.quest-list .quest-main .info-label{color:#f1c40f}.quest-list .quest-side .info-label{color:#3498db}.quest-countdown{display:inline;font-size:.85em;color:var(--text-header);opacity:.8;margin-left:8px;font-style:italic}.npc-grid{display:grid;grid-template-columns:1fr;gap:15px}.bonded-section .section-title::after{content:"âˆ";color:var(--bonded-color);font-size:1.2em;animation:pulse-red 2.5s infinite ease-in-out;background:none;margin-left:auto;flex-grow:0}@keyframes pulse-red{0%{opacity:.7}50%{opacity:1}100%{opacity:.7}}.npc-card{position:relative;cursor:pointer;border:1px solid var(--primary-color);border-radius:8px;padding:10px;box-sizing:border-box;box-shadow:inset 0 1px 3px rgba(0,0,0,.5);transition:transform .3s ease,box-shadow .3s ease,border-color .3s ease;background:linear-gradient(145deg,rgba(255,255,255,0.08),transparent),var(--card-texture),var(--bg-card);overflow:hidden}.npc-card::before{content:"";position:absolute;top:-2px;left:-2px;right:-2px;bottom:-2px;background:linear-gradient(45deg,transparent,rgba(255,255,255,0.1),transparent,var(--primary-color),transparent);border-radius:10px;opacity:0;transition:opacity .3s ease;pointer-events:none;z-index:-1}.npc-card:hover::before{opacity:.6;animation:shimmer 2s ease-in-out infinite}.npc-card:hover{transform:translateY(-5px) scale(1.03);border-color:var(--primary-color);box-shadow:0 6px 20px rgba(0,0,0,.5),0 0 8px var(--glow-color),0 0 15px var(--primary-color),inset 0 1px 3px rgba(0,0,0,.5)}.npc-card::after{content:"â†º";position:absolute;bottom:5px;right:10px;color:var(--primary-color);opacity:.5;transition:opacity .3s,transform .3s;z-index:5}.npc-card:hover::after{opacity:1;transform:rotate(360deg)}.npc-card.bonded{border-color:var(--bonded-color);box-shadow:0 0 10px var(--bonded-color),inset 0 1px 3px rgba(0,0,0,.5)}.npc-card.bonded:hover{border-color:var(--bonded-color);animation:bonded-card-glow 2s ease-in-out infinite}.npc-card.bonded::after{color:var(--bonded-color)}.npc-header{display:flex;justify-content:space-between;align-items:center;border-bottom:1px dashed var(--primary-color);padding-bottom:5px;margin-bottom:8px;flex-shrink:0}.npc-info-section{margin-right:20px}.npc-name{font-size:1.2em;font-weight:bold;color:#e67e22}.npc-name.sr-active{color:#ff6b6b}.npc-status{font-size:.9em;color:var(--text-main);font-weight:normal;margin-left:6px}.npc-location{font-size:.8em;color:#bdc3c7;font-style:italic}.affection-bar-horizontal{width:100%;height:8px;background:rgba(0,0,0,.3);border-radius:4px;margin-top:8px;overflow:hidden;border:1px solid hsla(0,0%,100%,.2)}.affection-fill-horizontal{height:100%;transition:all .5s ease;border-radius:3px}.affection-fill.affection{background:#e91e63}.affection-fill.affection.affection-gray{background:#7f8c8d}.affection-fill.affection.affection-white{background:#fff}.affection-fill.affection.affection-yellow{background:#f1c40f}.affection-fill.affection.affection-pink{background:#e91e63}.progress-bar-fill.affection{background:var(--affection-color)}.affection-bar{position:relative}.affection-bar .progress-bar-fill.affection{background:var(--affection-color);background-image:repeating-linear-gradient(-45deg,transparent,transparent 5px,rgba(255,255,255,0.1) 5px,rgba(255,255,255,0.1) 10px);transition:background-color .3s ease}.affection-bar[data-negative=true] .progress-bar-fill.affection{background:linear-gradient(135deg,#87ceeb,#add8e6);background-image:repeating-linear-gradient(-45deg,transparent,transparent 5px,rgba(255,255,255,0.2) 5px,rgba(255,255,255,0.2) 10px);box-shadow:inset 0 0 8px rgba(173,216,230,.8)}.affection-bar[data-negative=true]{border:2px solid skyblue;box-shadow:inset 0 0 10px rgba(173,216,230,.5)}.affection-bar[data-negative=true]::before{content:"";position:absolute;top:0;left:0;right:0;bottom:0;background:linear-gradient(45deg,rgba(173,216,230,0.2) 0%,transparent 25%,rgba(173,216,230,0.2) 50%,transparent 75%,rgba(173,216,230,0.2) 100%);background-size:20px 20px;animation:ice-effect 2s linear infinite;pointer-events:none}@keyframes ice-effect{0%{background-position:0 0}100%{background-position:20px 20px}}.card-front{display:block}.card-back{display:none}.is-flipped .card-front{display:none}.is-flipped .card-back{display:block;animation:fade-in .3s}.log-container{margin-top:15px}.log-title{font-family:"Ma Shan Zheng","åæ–‡è¡Œæ¥·","åæ–‡æ¥·ä½“","KaiTi",cursive;margin:0 0 8px 4px;color:var(--text-main);font-size:1em;font-weight:normal;letter-spacing:.05em;text-shadow:0 0 5px var(--glow-color)}.log-box{background:rgba(0,0,0,.4);border-left:4px solid var(--primary-color);padding:8px 12px;max-height:3.7rem;overflow-y:auto;scrollbar-width:thin;scrollbar-color:var(--primary-color) rgba(0,0,0,.2)}.log-box::-webkit-scrollbar{width:6px}.log-box::-webkit-scrollbar-track{background:rgba(0,0,0,.2);border-radius:3px}.log-box::-webkit-scrollbar-thumb{background-color:var(--primary-color);border-radius:3px}.log-entry{margin:0 0 5px;font-style:italic;color:#bdc3c7;line-height:1.5}.log-entry:last-child{margin-bottom:0}.options-placeholder{color:var(--text-main);opacity:.7;font-style:italic;text-align:center;padding:20px}.options-section{display:block;padding:0}.options-grid{display:flex;flex-direction:column;gap:8px;width:100%;padding:20px;padding-top:60px}.options-title-container{position:relative;width:100%;margin-bottom:20px}.options-title{text-align:center;justify-content:center;position:absolute;left:50%;top:0;transform:translateX(-50%);z-index:10;background:rgba(0,0,0,0);padding:0 10px}.option-card{position:relative;cursor:pointer;border:1px solid var(--primary-color);border-radius:8px;padding:8px 30px;box-sizing:border-box;box-shadow:inset 0 1px 3px rgba(0,0,0,.5),0 0 15px rgba(200,155,60,.15),0 2px 4px rgba(0,0,0,.1);transition:transform .3s ease,box-shadow .3s ease,border-color .3s ease;background:linear-gradient(145deg,rgba(255,255,255,0.1),rgba(200,155,60,0.02)),radial-gradient(circle at 30% 30%,rgba(255,215,0,0.05) 0%,transparent 50%),radial-gradient(circle at 70% 70%,rgba(200,155,60,0.03) 0%,transparent 50%),var(--bg-card);width:100%;display:flex;flex-direction:column;min-height:40px;justify-content:center}.option-card::before{content:"âœ¦";position:absolute;top:50%;left:8px;transform:translateY(-50%);color:var(--primary-color);font-size:1.4em;opacity:.8;pointer-events:none}.option-card::after{content:"âœ¦";position:absolute;top:50%;right:8px;transform:translateY(-50%);color:var(--primary-color);font-size:1.4em;opacity:.8;pointer-events:none}.option-card:hover{transform:translateY(-3px) scale(1.02);border-color:var(--primary-color);box-shadow:0 4px 15px rgba(0,0,0,.3),0 0 8px var(--glow-color),0 0 12px var(--primary-color),inset 0 1px 3px rgba(0,0,0,.5)}.option-card:active{transform:translateY(-1px) scale(0.98);transition:transform .1s ease}.option-card.disabled{opacity:.5;cursor:not-allowed;border-color:#666}.option-card.disabled:hover{transform:none;box-shadow:inset 0 1px 3px rgba(0,0,0,.5)}.option-header{display:none}.option-id{display:none}.option-type{font-size:.9em;color:var(--text-header);background:rgba(200,155,60,.2);padding:2px 8px;border-radius:4px;border:1px solid var(--primary-color)}.option-content{color:var(--text-main);line-height:1.4;white-space:pre-wrap;text-align:center;flex:1;display:flex;align-items:center;justify-content:center;min-height:30px}.option-text{display:inline;font-size:1.2em;font-family:"KaiTi","æ¥·ä½“","æ¥·ä½“_GB2312",serif;font-weight:normal;letter-spacing:.05em}.music-player-container{display:flex;flex-direction:column;gap:20px}.music-controls{display:flex;justify-content:center;align-items:center;gap:15px;padding:15px;background:var(--bg-section);border-radius:8px;border:1px solid var(--border-section)}.music-btn{background:var(--primary-color);color:#000;border:2px solid var(--primary-color);border-radius:50%;width:50px;height:50px;display:flex;align-items:center;justify-content:center;cursor:pointer;font-size:1.2em;transition:all .3s ease;position:relative;overflow:hidden}.music-btn:hover:not(:disabled){background:var(--glow-color);transform:scale(1.1);box-shadow:0 0 15px var(--glow-color)}.music-btn:active:not(:disabled){transform:scale(0.95)}.music-btn:disabled{opacity:.5;cursor:not-allowed}.music-btn.play-btn{width:60px;height:60px;font-size:1.5em;background:var(--accent-color);border-color:var(--accent-color)}.music-btn.play-btn.playing{animation:pulse-playing 1.5s ease-in-out infinite}.music-btn.shuffle-btn.active,.music-btn.repeat-btn.active{background:var(--glow-color);border-color:var(--glow-color);box-shadow:0 0 10px var(--glow-color)}@keyframes pulse-playing{0%,100%{transform:scale(1)}50%{transform:scale(1.05)}}.current-track-info{background:var(--bg-section);border:1px solid var(--border-section);border-radius:8px;padding:15px;text-align:center}.track-title{font-size:1.3em;font-weight:bold;color:var(--text-header);margin-bottom:5px;text-shadow:0 0 8px var(--glow-color)}.track-artist{font-size:1em;color:var(--text-main);opacity:.8;margin-bottom:10px}.progress-container{margin-bottom:10px}.music-progress{margin-bottom:5px}.music-fill{background:linear-gradient(90deg,var(--primary-color),var(--accent-color));transition:width .3s ease}.time-display{display:flex;justify-content:space-between;font-size:.9em;color:var(--text-main);opacity:.8}.playlist-container{background:var(--bg-section);border:1px solid var(--border-section);border-radius:8px;padding:15px;max-height:300px;overflow-y:auto}.playlist-title{font-size:1.2em;color:var(--text-header);margin-bottom:15px;text-align:center;text-shadow:0 0 8px var(--glow-color)}.playlist{display:flex;flex-direction:column;gap:8px}.playlist-item{display:flex;justify-content:space-between;align-items:center;padding:10px 12px;background:var(--bg-card);border:1px solid var(--border-section);border-radius:6px;cursor:pointer;transition:all .3s ease}.playlist-item:hover{background:var(--bg-card);border-color:var(--primary-color);transform:translateY(-2px);box-shadow:0 4px 8px rgba(0,0,0,.2)}.playlist-item.active{background:var(--primary-color);border-color:var(--primary-color);color:#000;box-shadow:0 0 15px var(--glow-color)}.track-info{flex:1}.track-duration{font-size:.9em;color:var(--text-main);opacity:.7;margin-left:15px}@media (max-width:768px){.fate-console{padding:10px;padding-top:45px}.tab-panel-grid,.character-annals-grid,.fate-console.collapsed .collapsed-view{grid-template-columns:1fr;gap:15px}.tab-btn{font-size:1.4em;padding:5px 10px}.section-title{font-size:1.5em}.console-controls{gap:8px;right:8px}.theme-stone{width:16px;height:16px}.console-control-btn{font-size:1.4em}.fate-console.fixed-layout .expanded-view{height:120vw}.options-grid{padding:15px;padding-top:50px}.option-card{min-height:35px}}
</style></head><body><div id="app"></div></body>