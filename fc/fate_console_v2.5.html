<head><script type="module">var e={42:(e,t)=>{t.A=(e,t)=>{const n=e.__vccOpts||e;for(const[e,a]of t)n[e]=a;return n}}},t={};const n=Vue,a={class:'action-menu-header'},l={class:'menu-icon'},o={class:'action-menu-content'},c={key:0},i={key:0,class:'ability-info'},s={key:0,class:'info-line'},r={class:'info-value'},m={key:1,class:'info-line'},d={class:'info-value'},u={key:1},p={key:0,class:'item-info'},v={key:0,class:'info-line'},f={class:'info-value'},y={key:1,class:'info-line'},k={class:'info-value'},g={key:2,class:'info-line'},E={class:'info-value'},b={key:3,class:'info-line'},N={class:'info-value'},h={class:'quantity-input'},V={class:'quantity-controls'},C=['disabled'],B=['max'],S=['disabled'],w={class:'quantity-max'},x={key:2},D={key:3},q={key:0,class:'equipment-info'},M={key:0,class:'info-line'},T={class:'info-value'},I={key:1,class:'info-line'},F={class:'info-value'},O={key:2,class:'info-line'},A={class:'info-value'},L={key:4},P={key:5},j={key:0,class:'faction-info'},X={key:0,class:'info-line'},Y={class:'info-value'},U={key:1,class:'info-line'},R={class:'info-value'},W={key:2,class:'info-line'},H={class:'info-value'},Q={key:1,class:'no-info'},Z={key:6},J={key:0,class:'effect-info'},G={key:0,class:'info-line'},K={class:'info-value'},ee={key:1,class:'info-line'},te={class:'info-value'},ne={key:1,class:'no-info'},ae={key:7},le={key:0,class:'equipment-list'},oe={class:'equipment-select-all'},ce={class:'checkbox-label'},ie={class:'equipment-item-info'},se={class:'checkbox-label'},re=['value'],me=['onClick'],de={key:0,class:'equipment-equipped-indicator'},ue={key:0,class:'equipment-batch-actions'},pe={key:1,class:'no-info'},ve={key:8},fe={key:0,class:'custom-info'},ye={class:'custom-header'},ke={class:'info-label'},ge={class:'custom-content'},Ee={class:'info-value'},be={key:1,class:'no-info'},Ne=(0,n.defineComponent)({__name:'ActionMenu',props:{visible:{type:Boolean},type:{},title:{},position:{},maxQuantity:{default:99},isEquipped:{type:Boolean,default:!1},target:{default:()=>{}}},emits:['select','close'],setup(e,{emit:t}){const Ne=t,he=(0,n.ref)(1),Ve=(0,n.ref)([]),Ce=(0,n.ref)(!1);function Be(){const t=e.target?.count||e.maxQuantity;he.value<1&&(he.value=1),he.value>t&&(he.value=t)}function Se(){const t=e.target?.count||e.maxQuantity;he.value<t&&he.value++}function we(){he.value>1&&he.value--}function xe(t){'item'===e.type?Ne('select',t,he.value):Ne('select',t),Ne('close')}function De(){Ne('close')}function qe(){Ce.value?Ve.value=Object.keys(e.target?.equipment||{}):Ve.value=[]}function Me(e){if(0===Ve.value.length)return;const t=Ve.value.join('ã€');Ne('select',`${e}:${t}`),Ne('close')}return(0,n.watch)(()=>e.visible,e=>{e&&(he.value=1,Ve.value=[],Ce.value=!1)}),(0,n.watch)(()=>Ve.value,t=>{const n=Object.keys(e.target?.equipment||{}).length;Ce.value=n>0&&t.length===n},{immediate:!0}),(t,Te)=>{return e.visible?((0,n.openBlock)(),(0,n.createElementBlock)('div',{key:0,class:'action-menu-overlay',onClick:De},[(0,n.createElementVNode)('div',{class:'action-menu',style:(0,n.normalizeStyle)({left:e.position.x+'px',top:e.position.y+'px'}),onClick:Te[21]||(Te[21]=(0,n.withModifiers)(()=>{},['stop']))},[(0,n.createElementVNode)('div',a,[(0,n.createElementVNode)('h4',null,[(0,n.createElementVNode)('span',l,(0,n.toDisplayString)(($e=e.type,{ability:'ğŸª„',item:'ğŸˆ',quest:'ğŸ“œ',equipment:'ğŸ›¡ï¸',rest:'ğŸ˜´',faction:'â›©ï¸',effect:'ğŸŒ€',custom:'â­•','equipment-list':'ğŸ›¡ï¸'}[$e]||'ğŸ“„')),1),(0,n.createTextVNode)(' '+(0,n.toDisplayString)(e.title),1)])]),(0,n.createElementVNode)('div',o,['ability'===e.type?((0,n.openBlock)(),(0,n.createElementBlock)('div',c,[e.target?.proficiency||e.target?.effect?((0,n.openBlock)(),(0,n.createElementBlock)('div',i,[e.target?.proficiency?((0,n.openBlock)(),(0,n.createElementBlock)('div',s,[Te[22]||(Te[22]=(0,n.createElementVNode)('span',{class:'info-label'},'ç†Ÿç»ƒåº¦ï¼š',-1)),(0,n.createElementVNode)('span',r,(0,n.toDisplayString)(e.target.proficiency),1)])):(0,n.createCommentVNode)('v-if',!0),e.target?.effect?((0,n.openBlock)(),(0,n.createElementBlock)('div',m,[Te[23]||(Te[23]=(0,n.createElementVNode)('span',{class:'info-label'},'æ•ˆæœï¼š',-1)),(0,n.createElementVNode)('span',d,(0,n.toDisplayString)(e.target.effect),1)])):(0,n.createCommentVNode)('v-if',!0)])):(0,n.createCommentVNode)('v-if',!0),(0,n.createElementVNode)('button',{class:'action-btn',onClick:Te[0]||(Te[0]=e=>xe('use'))},'ä½¿ç”¨'),(0,n.createElementVNode)('button',{class:'action-btn',onClick:Te[1]||(Te[1]=e=>xe('study'))},'ç ”ä¹ ')])):'item'===e.type?((0,n.openBlock)(),(0,n.createElementBlock)('div',u,[e.target?.type||e.target?.effect||e.target?.description||e.target?.bonus?((0,n.openBlock)(),(0,n.createElementBlock)('div',p,[e.target?.type?((0,n.openBlock)(),(0,n.createElementBlock)('div',v,[Te[24]||(Te[24]=(0,n.createElementVNode)('span',{class:'info-label'},'ç±»å‹ï¼š',-1)),(0,n.createElementVNode)('span',f,(0,n.toDisplayString)(e.target.type),1)])):(0,n.createCommentVNode)('v-if',!0),e.target?.effect?((0,n.openBlock)(),(0,n.createElementBlock)('div',y,[Te[25]||(Te[25]=(0,n.createElementVNode)('span',{class:'info-label'},'æ•ˆæœï¼š',-1)),(0,n.createElementVNode)('span',k,(0,n.toDisplayString)(e.target.effect),1)])):(0,n.createCommentVNode)('v-if',!0),e.target?.bonus?((0,n.openBlock)(),(0,n.createElementBlock)('div',g,[Te[26]||(Te[26]=(0,n.createElementVNode)('span',{class:'info-label'},'åŠ æˆï¼š',-1)),(0,n.createElementVNode)('span',E,(0,n.toDisplayString)(e.target.bonus),1)])):(0,n.createCommentVNode)('v-if',!0),e.target?.description?((0,n.openBlock)(),(0,n.createElementBlock)('div',b,[Te[27]||(Te[27]=(0,n.createElementVNode)('span',{class:'info-label'},'æè¿°ï¼š',-1)),(0,n.createElementVNode)('span',N,(0,n.toDisplayString)(e.target.description),1)])):(0,n.createCommentVNode)('v-if',!0)])):(0,n.createCommentVNode)('v-if',!0),(0,n.createElementVNode)('div',h,[Te[28]||(Te[28]=(0,n.createElementVNode)('label',null,'æ•°é‡ï¼š',-1)),(0,n.createElementVNode)('div',V,[(0,n.createElementVNode)('button',{class:'quantity-btn',disabled:he.value<=1,onClick:we},'-',8,C),(0,n.withDirectives)((0,n.createElementVNode)('input',{'onUpdate:modelValue':Te[2]||(Te[2]=e=>he.value=e),type:'number',min:'1',max:e.target?.count||e.maxQuantity,class:'quantity-field',onChange:Be},null,40,B),[[n.vModelText,he.value,void 0,{number:!0}]]),(0,n.createElementVNode)('button',{class:'quantity-btn',disabled:he.value>=(e.target?.count||e.maxQuantity),onClick:Se},'+',8,S)]),(0,n.createElementVNode)('span',w,'/'+(0,n.toDisplayString)(e.target?.count||e.maxQuantity),1)]),(0,n.createElementVNode)('button',{class:'action-btn',onClick:Te[3]||(Te[3]=e=>xe('use'))},'ä½¿ç”¨'),(0,n.createElementVNode)('button',{class:'action-btn',onClick:Te[4]||(Te[4]=e=>xe('give'))},'ç»™äºˆ'),(0,n.createElementVNode)('button',{class:'action-btn',onClick:Te[5]||(Te[5]=e=>xe('discard'))},'ä¸¢å¼ƒ')])):'quest'===e.type?((0,n.openBlock)(),(0,n.createElementBlock)('div',x,[(0,n.createElementVNode)('button',{class:'action-btn',onClick:Te[6]||(Te[6]=e=>xe('start'))},'å¼€å§‹ä»»åŠ¡'),(0,n.createElementVNode)('button',{class:'action-btn',onClick:Te[7]||(Te[7]=e=>xe('abandon'))},'æ”¾å¼ƒä»»åŠ¡')])):'equipment'===e.type?((0,n.openBlock)(),(0,n.createElementBlock)('div',D,[e.target?.type||e.target?.bonus||e.target?.description?((0,n.openBlock)(),(0,n.createElementBlock)('div',q,[e.target?.type?((0,n.openBlock)(),(0,n.createElementBlock)('div',M,[Te[29]||(Te[29]=(0,n.createElementVNode)('span',{class:'info-label'},'ç±»å‹ï¼š',-1)),(0,n.createElementVNode)('span',T,(0,n.toDisplayString)(e.target.type),1)])):(0,n.createCommentVNode)('v-if',!0),e.target?.bonus?((0,n.openBlock)(),(0,n.createElementBlock)('div',I,[Te[30]||(Te[30]=(0,n.createElementVNode)('span',{class:'info-label'},'åŠ æˆï¼š',-1)),(0,n.createElementVNode)('span',F,(0,n.toDisplayString)(e.target.bonus),1)])):(0,n.createCommentVNode)('v-if',!0),e.target?.description?((0,n.openBlock)(),(0,n.createElementBlock)('div',O,[Te[31]||(Te[31]=(0,n.createElementVNode)('span',{class:'info-label'},'æè¿°ï¼š',-1)),(0,n.createElementVNode)('span',A,(0,n.toDisplayString)(e.target.description),1)])):(0,n.createCommentVNode)('v-if',!0)])):(0,n.createCommentVNode)('v-if',!0),e.isEquipped?((0,n.openBlock)(),(0,n.createElementBlock)('button',{key:1,class:'action-btn',onClick:Te[8]||(Te[8]=e=>xe('unequip'))},'å¸ä¸‹')):((0,n.openBlock)(),(0,n.createElementBlock)('button',{key:2,class:'action-btn',onClick:Te[9]||(Te[9]=e=>xe('equip'))},'è£…å¤‡')),(0,n.createElementVNode)('button',{class:'action-btn',onClick:Te[10]||(Te[10]=e=>xe('give'))},'ç»™äºˆ'),(0,n.createElementVNode)('button',{class:'action-btn',onClick:Te[11]||(Te[11]=e=>xe('discard'))},'ä¸¢å¼ƒ')])):'rest'===e.type?((0,n.openBlock)(),(0,n.createElementBlock)('div',L,[(0,n.createElementVNode)('button',{class:'action-btn',onClick:Te[12]||(Te[12]=e=>xe('nap'))},'å°æ†©'),(0,n.createElementVNode)('button',{class:'action-btn',onClick:Te[13]||(Te[13]=e=>xe('sleep'))},'å°±å¯'),(0,n.createElementVNode)('button',{class:'action-btn',onClick:Te[14]||(Te[14]=e=>xe('invite'))},'é‚€è¯·å…±å¯')])):'faction'===e.type?((0,n.openBlock)(),(0,n.createElementBlock)('div',P,[e.target?.location||e.target?.alignment||e.target?.relationDesc?((0,n.openBlock)(),(0,n.createElementBlock)('div',j,[e.target?.location?((0,n.openBlock)(),(0,n.createElementBlock)('div',X,[Te[32]||(Te[32]=(0,n.createElementVNode)('span',{class:'info-label'},'ä½ç½®ï¼š',-1)),(0,n.createElementVNode)('span',Y,(0,n.toDisplayString)(e.target.location),1)])):(0,n.createCommentVNode)('v-if',!0),e.target?.alignment?((0,n.openBlock)(),(0,n.createElementBlock)('div',U,[Te[33]||(Te[33]=(0,n.createElementVNode)('span',{class:'info-label'},'é˜µè¥ï¼š',-1)),(0,n.createElementVNode)('span',R,(0,n.toDisplayString)(e.target.alignment),1)])):(0,n.createCommentVNode)('v-if',!0),e.target?.relationDesc?((0,n.openBlock)(),(0,n.createElementBlock)('div',W,[Te[34]||(Te[34]=(0,n.createElementVNode)('span',{class:'info-label'},'å…³ç³»ï¼š',-1)),(0,n.createElementVNode)('span',H,(0,n.toDisplayString)(e.target.relationDesc),1)])):(0,n.createCommentVNode)('v-if',!0)])):((0,n.openBlock)(),(0,n.createElementBlock)('div',Q,[...Te[35]||(Te[35]=[(0,n.createElementVNode)('span',{class:'no-info-text'},'æš‚æ— è¯¦ç»†ä¿¡æ¯',-1)])])),(0,n.createElementVNode)('button',{class:'action-btn',onClick:Te[15]||(Te[15]=e=>xe('visit'))},'æ‹œè®¿')])):'effect'===e.type?((0,n.openBlock)(),(0,n.createElementBlock)('div',Z,[e.target?.description||void 0!==e.target?.remainingRounds?((0,n.openBlock)(),(0,n.createElementBlock)('div',J,[e.target?.description?((0,n.openBlock)(),(0,n.createElementBlock)('div',G,[Te[36]||(Te[36]=(0,n.createElementVNode)('span',{class:'info-label'},'æè¿°ï¼š',-1)),(0,n.createElementVNode)('span',K,(0,n.toDisplayString)(e.target.description),1)])):(0,n.createCommentVNode)('v-if',!0),void 0!==e.target?.remainingRounds?((0,n.openBlock)(),(0,n.createElementBlock)('div',ee,[Te[37]||(Te[37]=(0,n.createElementVNode)('span',{class:'info-label'},'å‰©ä½™å›åˆï¼š',-1)),(0,n.createElementVNode)('span',te,(0,n.toDisplayString)((_e=e.target.remainingRounds,_e===1/0?'æ°¸ä¹…':_e.toString())),1)])):(0,n.createCommentVNode)('v-if',!0)])):((0,n.openBlock)(),(0,n.createElementBlock)('div',ne,[...Te[38]||(Te[38]=[(0,n.createElementVNode)('span',{class:'no-info-text'},'æš‚æ— è¯¦ç»†ä¿¡æ¯',-1)])]))])):'equipment-list'===e.type?((0,n.openBlock)(),(0,n.createElementBlock)('div',ae,[e.target?.equipment&&Object.keys(e.target.equipment).length>0?((0,n.openBlock)(),(0,n.createElementBlock)('div',le,[(0,n.createCommentVNode)(' å…¨é€‰å¤é€‰æ¡† '),(0,n.createElementVNode)('div',oe,[(0,n.createElementVNode)('label',ce,[(0,n.withDirectives)((0,n.createElementVNode)('input',{'onUpdate:modelValue':Te[16]||(Te[16]=e=>Ce.value=e),type:'checkbox',class:'equipment-checkbox',onChange:qe},null,544),[[n.vModelCheckbox,Ce.value]]),Te[39]||(Te[39]=(0,n.createElementVNode)('span',{class:'checkbox-text'},'å…¨é€‰',-1))])]),(0,n.createCommentVNode)(' è£…å¤‡åˆ—è¡¨ '),((0,n.openBlock)(!0),(0,n.createElementBlock)(n.Fragment,null,(0,n.renderList)(e.target.equipment,(e,t)=>{return(0,n.openBlock)(),(0,n.createElementBlock)('div',{key:String(t),class:'equipment-item-line'},[(0,n.createElementVNode)('div',ie,[(0,n.createElementVNode)('label',se,[(0,n.withDirectives)((0,n.createElementVNode)('input',{'onUpdate:modelValue':Te[17]||(Te[17]=e=>Ve.value=e),type:'checkbox',value:String(t),class:'equipment-checkbox'},null,8,re),[[n.vModelCheckbox,Ve.value]]),(0,n.createElementVNode)('span',{class:'equipment-item-name clickable',style:(0,n.normalizeStyle)({color:(a=e.quality,{æ™®é€š:'#ffffff',ç²¾è‰¯:'#00ff00',å“è¶Š:'#0080ff',å²è¯—:'#a855f7',ä¼ å¥‡:'#ffd700',ç¥è¯:'#ff0000'}[a]||'#ffffff')}),onClick:e=>{return n=String(t),Ne('select','view-equipment:'+n),void Ne('close');var n}},(0,n.toDisplayString)(t),13,me)]),e.equipped?((0,n.openBlock)(),(0,n.createElementBlock)('span',de,'å·²è£…å¤‡')):(0,n.createCommentVNode)('v-if',!0)])]);var a}),128)),(0,n.createCommentVNode)(' æ‰¹é‡æ“ä½œæŒ‰é’® '),Ve.value.length>0?((0,n.openBlock)(),(0,n.createElementBlock)('div',ue,[(0,n.createElementVNode)('button',{class:'action-btn batch-btn',onClick:Te[18]||(Te[18]=e=>Me('equip'))},'è£…å¤‡'),(0,n.createElementVNode)('button',{class:'action-btn batch-btn',onClick:Te[19]||(Te[19]=e=>Me('give'))},'ç»™äºˆ'),(0,n.createElementVNode)('button',{class:'action-btn batch-btn',onClick:Te[20]||(Te[20]=e=>Me('discard'))},'ä¸¢å¼ƒ')])):(0,n.createCommentVNode)('v-if',!0)])):((0,n.openBlock)(),(0,n.createElementBlock)('div',pe,[...Te[40]||(Te[40]=[(0,n.createElementVNode)('span',{class:'no-info-text'},'æš‚æ— è£…å¤‡',-1)])]))])):'custom'===e.type?((0,n.openBlock)(),(0,n.createElementBlock)('div',ve,[e.target?.custom&&Object.keys(e.target.custom).length>0?((0,n.openBlock)(),(0,n.createElementBlock)('div',fe,[((0,n.openBlock)(!0),(0,n.createElementBlock)(n.Fragment,null,(0,n.renderList)(e.target.custom,(e,t)=>((0,n.openBlock)(),(0,n.createElementBlock)('div',{key:t,class:'custom-item'},[(0,n.createElementVNode)('div',ye,[Te[41]||(Te[41]=(0,n.createElementVNode)('span',{class:'custom-icon'},'âœ¦',-1)),(0,n.createElementVNode)('span',ke,(0,n.toDisplayString)(t),1)]),(0,n.createElementVNode)('div',ge,[(0,n.createElementVNode)('span',Ee,(0,n.toDisplayString)(e),1)])]))),128))])):((0,n.openBlock)(),(0,n.createElementBlock)('div',be,[...Te[42]||(Te[42]=[(0,n.createElementVNode)('span',{class:'no-info-text'},'æš‚æ— è‡ªå®šä¹‰ä¿¡æ¯',-1)])]))])):(0,n.createCommentVNode)('v-if',!0)])],4)])):(0,n.createCommentVNode)('v-if',!0);var _e,$e}}});var he=function n(a){var l=t[a];if(void 0!==l)return l.exports;var o=t[a]={exports:{}};return e[a](o,o.exports,n),o.exports}(42);const Ve=(0,he.A)(Ne,[['__scopeId','data-v-b163bff0']]),Ce=(0,n.defineComponent)({__name:'AuthorModal',props:{visible:{type:Boolean}},emits:['close'],setup(e,{emit:t}){const a=t;function l(){a('close')}return(t,a)=>e.visible?((0,n.openBlock)(),(0,n.createElementBlock)('div',{key:0,class:'author-modal-overlay',onClick:l},[(0,n.createElementVNode)('div',{class:'author-modal',onClick:a[0]||(a[0]=(0,n.withModifiers)(()=>{},['stop']))},[(0,n.createElementVNode)('div',{class:'author-modal-header'},[a[1]||(a[1]=(0,n.createElementVNode)('h2',{class:'author-modal-title'},'å‘½è¿ç»ˆç«¯',-1)),(0,n.createElementVNode)('button',{class:'author-modal-close',onClick:l},'Ã—')]),a[2]||(a[2]=(0,n.createStaticVNode)('<div class="author-modal-content" data-v-7e660640><div class="author-info" data-v-7e660640><div class="author-label" data-v-7e660640>ä½œè€…ï¼š</div><div class="author-name" data-v-7e660640>kqs</div></div><div class="author-note" data-v-7e660640><div class="note-label" data-v-7e660640>å¤‡æ³¨ï¼š</div><div class="note-content" data-v-7e660640>å…è´¹å‘å¸ƒåœ¨Discordç±»è„‘ç¤¾åŒºã€‚</div></div></div>',1))])])):(0,n.createCommentVNode)('v-if',!0)}}),Be=(0,he.A)(Ce,[['__scopeId','data-v-7e660640']]),Se={gufeng:{primaryColor:'#c89b3c',glowColor:'rgba(255, 215, 0, 0.6)',accentColor:'#e74c3c',bondedColor:'#f472b6',bgPanel:'rgba(30, 25, 20, 0.85)',bgSection:'rgba(10, 5, 0, 0.4)',borderSection:'rgba(200, 155, 60, 0.3)',textMain:'#f0e6d2',textHeader:'#c89b3c',bgImage:'url("https://www.transparenttextures.com/patterns/paper-3.png")',titleIconContent:'',titleIconSvg:'url("data:image/svg+xml,%3Csvg xmlns=\'http://www.w3.org/2000/svg\' viewBox=\'0 0 24 24\' fill=\'currentColor\'%3E%3Cpath d=\'M12,2A10,10,0,1,0,22,12,10,10,0,0,0,12,2Zm0,18a8,8,0,1,1,8-8A8,8,0,0,1,12,20ZM15,8H9V16h6Z\'/%3E%3C/svg%3E")',bgCard:'#2a231c',wrapperBorderRadius:'10px',customInfoIcon:'ğŸ¦â€ğŸ”¥',labels:{alignment:'ç¤¼ä»:',power:'åŠŸå:',abilities:'å…­è‰º:',titles:'é£è¯„:',effects:'è¿¹é‡:',equipment:'ä»ªä»—:',clothing:'è¡£å† :',items:'ä»€ç‰©:',currency:'é‡‘å¸›:',time:'æ˜¥ç§‹:',location:'èˆ†å›¾:',environment:'å±±æ°´:',dynamics:'æœé—»:',questMain:'å¤©å‘½:',questSide:'æµ®ç”Ÿ:',npcPower:'åŠŸå:'},tabNames:{tab1:'å±±æ²³å†Œ',tab2:'è¡£å† è°±',tab3:'ç§‰æ¢è¡Œ',tab4:'éŸ¶åéŸ³',tab5:'ç‹åœŸå¿—',optionsTitle:'å®¡æ—¶åº¦åŠ¿',worldStatus:'å¤©ä¸‹å¤§åŠ¿',factions:'å„æ–¹è§’åŠ›',inventory:'éšè¡Œç»†è½¯',nearby:'èæ°´ç›¸é€¢',bonded:'æœ±ä¸ç³»å‘½',logTitle:'é’å²é—ç—•:',collapsedCharTitle:'é’è¡«é£å',collapsedWorldTitle:'æ±Ÿå±±ä¸€æ¢',journal:'ç»ä¸–å½•'}},xianxia:{primaryColor:'#34d399',glowColor:'rgba(167, 243, 208, 0.7)',accentColor:'#f59e0b',bondedColor:'#e53e3e',bgPanel:'rgba(15, 30, 25, 0.85)',bgSection:'rgba(5, 15, 10, 0.4)',borderSection:'rgba(52, 211, 153, 0.3)',textMain:'#e0f2f1',textHeader:'#34d399',bgImage:'url("https://www.transparenttextures.com/patterns/xv.png")',titleIconContent:'â˜¯',titleIconSvg:'none',bgCard:'#182825',wrapperBorderRadius:'10px',customInfoIcon:'ğŸ‰',labels:{alignment:'é“å¿ƒ:',power:'é“å¢ƒ:',abilities:'ç¥é€š:',titles:'é“å·:',effects:'é“ç—•:',equipment:'æ³•å®:',clothing:'é“å¸”:',items:'çµç‰©:',currency:'çµèµ„:',time:'ä»™å†:',location:'æ´å¤©:',environment:'çµæ°›:',dynamics:'ç„è®¯:',questMain:'å¤©ç¼˜:',questSide:'å°˜ç¼˜:',npcPower:'é“è¡Œ:'},tabNames:{tab1:'å¤©æœºå·',tab2:'ä»™ç¼˜å½•',tab3:'è¿ç„æœº',tab4:'äº‘æ°´è°£',tab5:'æ˜Ÿæ§è½¨',optionsTitle:'å¦™æ³•è‡ªç„¶',worldStatus:'å¤§é“æ°”è¿',factions:'è¯¸å¤©åŠ¿åŠ›',inventory:'è¢–é‡Œä¹¾å¤',nearby:'æ–¹å¤–å®¢',bonded:'ä¸‰ç”Ÿç¼˜',logTitle:'å¤©æœºè¡å˜:',collapsedCharTitle:'å¾¡é£é€é¥',collapsedWorldTitle:'å¤©æœºä¸€ç¥',journal:'å¤©å‘½ç»‡é”¦'}},minsu:{primaryColor:'#ef4444',glowColor:'rgba(252, 165, 165, 0.7)',accentColor:'#facc15',bondedColor:'#facc15',bgPanel:'rgba(40, 10, 10, 0.85)',bgSection:'rgba(20, 0, 0, 0.4)',borderSection:'rgba(239, 68, 68, 0.3)',textMain:'#fef2f2',textHeader:'#fca5a5',bgImage:'url("data:image/svg+xml,%3Csvg xmlns=\'http://www.w3.org/2000/svg\' width=\'80\' height=\'80\'%3E%3Cg fill=\'%23a11d1d\' opacity=\'0.35\'%3E%3Cpath d=\'M15 8 C 10 5, 5 10, 8 15 L 12 18 C 15 22, 22 20, 20 15 Z\' /%3E%3Ccircle cx=\'50\' cy=\'10\' r=\'5\' /%3E%3Cellipse cx=\'65\' cy=\'60\' rx=\'8\' ry=\'4\' transform=\'rotate(45 65 60)\' /%3E%3Cpath d=\'M30 70 C 25 75, 35 80, 40 75 L 42 72 C 45 68, 38 65, 35 68 Z\' /%3E%3Ccircle cx=\'10\' cy=\'50\' r=\'3\' /%3E%3Ccircle cx=\'70\' cy=\'30\' r=\'2\' /%3E%3C/g%3E%3C/svg%3E")',titleIconContent:'ğŸ®',titleIconSvg:'none',bgCard:'#3a1a1a',wrapperBorderRadius:'10px',customInfoIcon:'ğŸ§¿',labels:{alignment:'æƒ…ç†:',power:'å‘½æ ¼:',abilities:'ç»æ´»:',titles:'æµ‘å·:',effects:'å…†è±¡:',equipment:'æ³•å™¨:',clothing:'ç´ è¡«:',items:'æ‚è´§:',currency:'å®¶å½“:',time:'é»„å†:',location:'åœ°å¤´:',environment:'é£æ°´:',dynamics:'é—²è¯:',questMain:'è¯¡äº‹:',questSide:'æ’æ›²:',npcPower:'æ–¤ä¸¤:'},tabNames:{tab1:'é£ç‰©å¿—',tab2:'å¼‚é—»å½•',tab3:'æ¢å‰å‡¶',tab4:'ä¿šä¿—è°ƒ',tab5:'é—¾å··è°±',optionsTitle:'è§å¾®çŸ¥è‘—',worldStatus:'å››æ—¶å…«èŠ‚',factions:'ä¸‰æ•™ä¹æµ',inventory:'ç™¾å®è¤¡è£¢',nearby:'å¸‚äº•ç¾¤åƒ',bonded:'å®¿ç¼˜ç‰µç»Š',logTitle:'å£è€³ä½™éŸµ:',collapsedCharTitle:'çƒ›é¾™ä¹‹å½±',collapsedWorldTitle:'è¾°å…‰ä¸€åœ',journal:'ä¹¡é‡å¥‡è°­'}},wuxia:{primaryColor:'#e5e7eb',glowColor:'rgba(255, 255, 255, 0.3)',accentColor:'#dc2626',bondedColor:'#34d399',bgPanel:'rgba(17, 24, 39, 0.9)',bgSection:'rgba(31, 41, 55, 0.5)',borderSection:'rgba(229, 231, 235, 0.3)',textMain:'#f9fafb',textHeader:'#e5e7eb',bgImage:'url("data:image/svg+xml,%3Csvg xmlns=\'http://www.w3.org/2000/svg\' width=\'40\' height=\'40\'%3E%3Cpath d=\'M0 10 H15 V25 H0 V40 H30 V10 H40 V0 H10 V-10\' fill=\'none\' stroke=\'rgba(229, 231, 235, 0.15)\' stroke-width=\'2\'/%3E%3C/svg%3E")',titleIconContent:'',titleIconSvg:'url("data:image/svg+xml,%3Csvg xmlns=\'http://www.w3.org/2000/svg\' viewBox=\'0 0 24 24\' fill=\'currentColor\'%3E%3Cpath d=\'M12.5,2C10.8,2,9.5,3.3,9.5,5s1.3,3,3,3,3-1.3,3-3S14.2,2,12.5,2z M12,9C7.58,9,4,12.58,4,17s3.58,8,8,8,8-3.58,8-8S16.42,9,12,9z\'/%3E%3C/svg%3E")',bgCard:'#2c3342',wrapperBorderRadius:'2px',customInfoIcon:'ğŸ¦š',labels:{alignment:'é“ä¹‰:',power:'åŠŸåŠ›:',abilities:'æ­¦å­¦:',titles:'ç»°å·:',effects:'å¢ƒå†µ:',equipment:'åˆ©å™¨:',clothing:'æ­¦æœ:',items:'å¥‡ç‰©:',currency:'ç›˜ç¼ :',time:'å…‰é˜´:',location:'æ‰€åœ¨:',environment:'æ™¯è‡´:',dynamics:'é£æ³¢:',questMain:'å‘½é€”:',questSide:'èè¸ª:',npcPower:'åŠŸåŠ›:'},tabNames:{tab1:'ä¾ å®¢è¡Œ',tab2:'æ©ä»‡å½•',tab3:'å†³è¿›é€€',tab4:'é•¿é£æ­Œ',tab5:'æµ®è¸ªè®°',optionsTitle:'å½“æœºç«‹æ–­',worldStatus:'æ±Ÿæ¹–é£äº‘',factions:'é—¨æ´¾å¸®ä¼š',inventory:'è‹±é›„è¡Œå›Š',nearby:'æ±Ÿæ¹–è¿‡å®¢',bonded:'ç”Ÿæ­»ä¹‹äº¤',logTitle:'æ±Ÿæ¹–ä½™æ³¢:',collapsedCharTitle:'äººé—´æƒŠé¸¿',collapsedWorldTitle:'é£äº‘ä¸€æœ›',journal:'è‚èƒ†è¡Œè—'}},xuanhuan:{primaryColor:'#8b5cf6',glowColor:'rgba(196, 181, 253, 0.6)',accentColor:'#38bdf8',bondedColor:'#38bdf8',bgPanel:'rgba(5, 5, 15, 0.9)',bgSection:'rgba(0, 0, 0, 0.4)',borderSection:'rgba(139, 92, 246, 0.3)',textMain:'#e9d5ff',textHeader:'#c4b5fd',bgImage:'url("data:image/svg+xml,%3Csvg xmlns=\'http://www.w3.org/2000/svg\' width=\'100\' height=\'100\'%3E%3Crect width=\'100\' height=\'100\' fill=\'rgba(5,5,15,0)\'/%3E%3Ccircle cx=\'10\' cy=\'15\' r=\'1.5\' fill=\'rgba(233,213,255,0.7)\'/%3E%3Ccircle cx=\'80\' cy=\'10\' r=\'1\' fill=\'rgba(233,213,255,0.5)\'/%3E%3Ccircle cx=\'50\' cy=\'30\' r=\'2\' fill=\'rgba(233,213,255,0.9)\'/%3E%3Ccircle cx=\'30\' cy=\'60\' r=\'1.2\' fill=\'rgba(233,213,255,0.6)\'/%3E%3Ccircle cx=\'90\' cy=\'70\' r=\'1.8\' fill=\'rgba(233,213,255,0.8)\'/%3E%3Ccircle cx=\'60\' cy=\'90\' r=\'1\' fill=\'rgba(233,213,255,0.5)\'/%3E%3Ccircle cx=\'5\' cy=\'80\' r=\'1.3\' fill=\'rgba(233,213,255,0.7)\'/%3E%3Ccircle cx=\'70\' cy=\'50\' r=\'1.5\' fill=\'rgba(233,213,255,0.9)\'/%3E%3C/svg%3E")',titleIconContent:'',titleIconSvg:'url("data:image/svg+xml,%3Csvg xmlns=\'http://www.w3.org/2000/svg\' viewBox=\'0 0 24 24\' fill=\'currentColor\'%3E%3Cpath d=\'M12,2A10,10,0,0,0,4.2,5.23a1,1,0,0,0,1.28,1.52,7.91,7.91,0,0,1,13.06,0,1,1,0,0,0,1.28-1.52A10,10,0,0,0,12,2Zm0,20a10,10,0,0,0,7.8-3.23,1,1,0,0,0-1.28-1.52,7.91,7.91,0,0,1-13.06,0,1,1,0,1,0-1.28,1.52A10,10,0,0,0,12,22Zm-2-8a2,2,0,1,1,2,2A2,2,0,0,1,10,14Zm6.46-5.8a1,1,0,0,0-1.63-.5,5.92,5.92,0,0,0-9.66,0,1,1,0,1,0-1.63.5,8,8,0,0,1,12.92,0Z\'/%3E%3C/svg%3E")',bgCard:'#1f1d2e',wrapperBorderRadius:'10px',customInfoIcon:'ğŸ¦„',labels:{alignment:'å®¿å‘½:',power:'ä½é˜¶:',abilities:'æƒèƒ½:',titles:'å°Šå:',effects:'è¿¹å°:',equipment:'ç¥å™¨:',clothing:'çµè£…:',items:'åœ£ç‰©:',currency:'å¥‡ç:',time:'çºªå…ƒ:',location:'ç•ŒåŸŸ:',environment:'ä¸‡è±¡:',dynamics:'æ˜Ÿæµ:',questMain:'å‘½è½¨:',questSide:'æ˜Ÿå°˜:',npcPower:'ä½é˜¶:'},tabNames:{tab1:'ä¸‡è±¡å½•',tab2:'ç¥é­‚è°±',tab3:'å¾¡ä¸‡åŒ–',tab4:'å¤ªè™šåŸ',tab5:'ç•Œå°˜è¾‘',optionsTitle:'æ‰§æ¢ä¸‡è±¡',worldStatus:'æ ¹æºä¹‹æµ·',factions:'ç¥é­”åºåˆ—',inventory:'è™šç©ºä¹‹æˆ’',nearby:'å¼‚ç•Œæ¥å®¢',bonded:'é­‚ä¹‹å…±é¸£',logTitle:'å› æœæ®‹å“:',collapsedCharTitle:'ç•Œæ—…å¿ƒç¯',collapsedWorldTitle:'ä½é¢ä¸€çª¥',journal:'ç¥è°•æ®‹ç« '}},nihon:{primaryColor:'#ff69b4',glowColor:'rgba(255, 105, 180, 0.6)',accentColor:'#ff9800',bondedColor:'#ffffff',bgPanel:'rgba(40, 20, 30, 0.85)',bgSection:'rgba(20, 5, 15, 0.4)',borderSection:'rgba(233, 30, 99, 0.3)',textMain:'#fce4ec',textHeader:'#e91e63',bgImage:'url("data:image/svg+xml,%3Csvg xmlns=\'http://www.w3.org/2000/svg\' width=\'80\' height=\'80\'%3E%3Cdefs%3E%3Cpattern id=\'sakura\' patternUnits=\'userSpaceOnUse\' width=\'80\' height=\'80\'%3E%3Cg opacity=\'0.08\'%3E%3Cpath d=\'M40 10 C 35 5, 25 5, 20 10 C 15 15, 15 25, 20 30 C 25 35, 35 35, 40 30 C 45 25, 45 15, 40 10 Z\' fill=\'%23ff69b4\'/%3E%3Cpath d=\'M60 30 C 55 25, 45 25, 40 30 C 35 35, 35 45, 40 50 C 45 55, 55 55, 60 50 C 65 45, 65 35, 60 30 Z\' fill=\'%23ffb3d9\'/%3E%3Cpath d=\'M20 50 C 15 45, 5 45, 0 50 C -5 55, -5 65, 0 70 C 5 75, 15 75, 20 70 C 25 65, 25 55, 20 50 Z\' fill=\'%23ff69b4\'/%3E%3C/g%3E%3C/pattern%3E%3C/defs%3E%3Crect width=\'100%25\' height=\'100%25\' fill=\'url(%23sakura)\'/%3E%3C/svg%3E")',titleIconContent:'ğŸŒ¸',titleIconSvg:'none',bgCard:'#2d1b2d',wrapperBorderRadius:'8px',customInfoIcon:'ğŸ‘¹',labels:{alignment:'è‰²çº¸:',power:'å¿ƒä½:',abilities:'ç§˜ä¼ :',titles:'å¼‚å:',effects:'èƒ§æ€:',equipment:'å¾¡å™¨:',clothing:'ç€ç‰©:',items:'æŒç‰©:',currency:'åˆ¤é‡‘:',time:'æ¡œåˆ»:',location:'åœ¨å‡¦:',environment:'å‘¨å¢ƒ:',dynamics:'é‡Œè¯:',questMain:'å®¿ä¸š:',questSide:'éœ²è¯:',npcPower:'é­‚èƒ†:'},tabNames:{tab1:'ä¸–ç›¸è®°',tab2:'å¹½ç„é—´',tab3:'å¿ƒè±¡æ˜ ',tab4:'èƒ§å¤œæ›²',tab5:'ç™¾é¬¼å¸–',optionsTitle:'éœ²é›¶ä¸šè¡Œ',worldStatus:'å…«ç™¾ä¸‡ç¥',factions:'æµ®ä¸–ç»˜',inventory:'æ€€ä¸­ç‰©',nearby:'ä¸€æœŸä¸€ä¼š',bonded:'æµ®ä¸–ç›¸ä¾',logTitle:'æ¢¦æ—¥è®°:',collapsedCharTitle:'æ¨±èŠ±å¾¡å®ˆ',collapsedWorldTitle:'ç¼˜ä¸šä¸€è§ˆ',journal:'å¾¡ç¥ç­¾'}},jrpg:{primaryColor:'#4a90e2',glowColor:'rgba(74, 144, 226, 0.6)',accentColor:'#f5a623',bondedColor:'#e91e63',bgPanel:'rgba(10, 25, 47, 0.9)',bgSection:'rgba(19, 47, 76, 0.6)',borderSection:'rgba(74, 144, 226, 0.4)',textMain:'#d0e1f9',textHeader:'#f5a623',bgImage:'url("https://www.transparenttextures.com/patterns/climpek.png")',titleIconContent:'ğŸ’',titleIconSvg:'none',bgCard:'#132f4c',wrapperBorderRadius:'5px',customInfoIcon:'ğŸª½',labels:{alignment:'ä¿¡å¿µ:',power:'ç­‰çº§:',abilities:'æŠ€èƒ½:',titles:'ç§°å·:',effects:'çŠ¶æ€:',equipment:'è£…å¤‡:',clothing:'æœé¥°:',items:'é“å…·:',currency:'é‡‘å¸:',time:'æ—…é€”:',location:'åœ°ç‚¹:',environment:'å¤©æ°”:',dynamics:'ä¼ é—»:',questMain:'ä¸»çº¿:',questSide:'æ”¯çº¿:',npcPower:'æˆ˜åŠ›:'},tabNames:{tab1:'ä¸–ç•Œæ ‘',tab2:'äººç¼˜å½•',tab3:'å‘½é€”ä¹¦',tab4:'æ—¶å…‰éŸ³',tab5:'æ˜ŸåŸŸå›¾',optionsTitle:'é€‰æ‹©è¡ŒåŠ¨',worldStatus:'ä¸–ç•Œæƒ…æŠ¥',factions:'é˜µè¥åŠ¿åŠ›',inventory:'æŒæœ‰ç‰©',nearby:'é™„è¿‘çš„äºº',bonded:'é‡è¦ä¼™ä¼´',logTitle:'å†’é™©æ—¥å¿—:',collapsedCharTitle:'çŠ¶æ€é€Ÿè§ˆ',collapsedWorldTitle:'ä¸–ç•Œæ¦‚å†µ',journal:'ä»»åŠ¡æ—¥å¿—'}}},we={COLLAPSE_TEXT:'çª¥è§å¤©æœº',EXPAND_TEXT:'éšåŒ¿å‘½è½®',COLLAPSE_ICON:'â—ˆ',EXPAND_ICON:'â–',LAYOUT_FIXED_TEXT:'ä¼¸ç¼©è‡ªå¦‚',LAYOUT_DIFFUSION_TEXT:'ç”»åœ°ä¸ºç‰¢',LAYOUT_FIXED_ICON:'â‡³',LAYOUT_DIFFUSION_ICON:'â†•',EFFECTS_ON_TEXT:'é»¯ç„¶å¤±è‰²',EFFECTS_OFF_TEXT:'äº”å½©ç¼¤çº·',EFFECTS_ON_ICON:'âœ¨',EFFECTS_OFF_ICON:'âšª',DIRECT_SEND_ON_TEXT:'è°‹å®šååŠ¨',DIRECT_SEND_OFF_TEXT:'é›·å‰é£è¡Œ',DIRECT_SEND_ON_ICON:'âš¡',DIRECT_SEND_OFF_ICON:'ğŸ•¯ï¸',CUSTOM_INFO_ICON:'â„¹ï¸'},xe='fate_console_ui_state',De={theme:'gufeng',collapsed:!1,layout:'diffusion',effectsEnabled:!0,directSendEnabled:!1},qe=(0,n.ref)({...De}),Me=(0,n.computed)(()=>Se[qe.value.theme]),Te=(0,n.computed)(()=>qe.value.theme),_e=(0,n.computed)(()=>qe.value.collapsed),$e=(0,n.computed)(()=>qe.value.layout),Ie=(0,n.computed)(()=>qe.value.effectsEnabled),Fe=(0,n.computed)(()=>qe.value.directSendEnabled);function Oe(){try{localStorage.setItem(xe,JSON.stringify(qe.value))}catch(e){console.error('å†™å…¥è®°å¿†å¤±è´¥:',e)}}const Ae={gufeng:'https://files.catbox.moe/43mh3b.wav',xianxia:null,minsu:'https://files.catbox.moe/g33tgp.mp3',wuxia:'https://files.catbox.moe/zaxajc.mp3',xuanhuan:null,nihon:'https://files.catbox.moe/meylqk.mp3',jrpg:null};let ze=null;function Le(e){ze&&(ze.pause(),ze.currentTime=0,ze=null);const t=Ae[e];if(t)try{const e=new Audio(t);e.volume=.3,ze=e,e.play().catch(e=>{console.log('éŸ³æ•ˆæ’­æ”¾å¤±è´¥:',e),ze=null}),e.addEventListener('ended',()=>{ze=null}),e.addEventListener('error',()=>{ze=null})}catch(e){console.log('éŸ³æ•ˆæ’­æ”¾å¤±è´¥:',e),ze=null}}function Pe(e){qe.value.theme=e,Oe(),Le(e)}function je(){qe.value.collapsed=!qe.value.collapsed,Oe()}function Xe(){qe.value.layout='fixed'===qe.value.layout?'diffusion':'fixed',Oe()}function Ye(){qe.value.effectsEnabled=!qe.value.effectsEnabled,Oe()}function Ue(){qe.value.directSendEnabled=!qe.value.directSendEnabled,Oe()}function Re(e){return we[e]}function We(e){return Me.value.labels[e]||e}function He(e){return Me.value.tabNames[e]}const Qe={æ™®é€š:'#ffffff',ç²¾è‰¯:'#00ff00',å“è¶Š:'#0080ff',å²è¯—:'#a855f7',ä¼ å¥‡:'#ffd700',ç¥è¯:'#ff0000'};function Ze(e){if(!e)return'';const t=e.match(/^([^(]+)/);return t?t[1].trim():e}function Je(e){if(!e)return Qe['æ™®é€š'];const t=e.match(/\(([^)]+)\)$/);return t&&Qe[t[1].trim()]||Qe['æ™®é€š']}function Ge(e){if(!e)return'';const t=e.match(/^([^(]+)/);return t?t[1].trim():e}function Ke(e){if(!e)return 0;const t=e.match(/\(([^)]+)\)$/);if(!t)return 0;const n=t[1].trim().toLowerCase();if('âˆ'===n||'infinity'===n||'infinite'===n||'æ°¸ä¹…'===n)return 1/0;const a=parseInt(n,10);return isNaN(a)?0:a}function et(e){return e?e.split(/,|ï¼Œ/).map(e=>e.trim()).filter(Boolean):[]}function tt(e){console.log('Pushing to input:',e);const t=window.parent.document.querySelector('#send_textarea');if(t){const n=t.value,a=n?'\n':'';t.value=n+a+e,t.dispatchEvent(new Event('input',{bubbles:!0})),t.focus()}else console.warn('Chat input textarea not found')}function nt(e){console.log('Sending immediately:',e);const t=window.parent.document.querySelector('#send_textarea'),n=window.parent.document.querySelector('#send_but');t&&n?(t.value=e,t.dispatchEvent(new Event('input',{bubbles:!0})),setTimeout(()=>{n.click()},100)):(console.warn('Chat input textarea or send button not found'),tt(e))}function at(e){const t=localStorage.getItem('fate_console_ui_state');let n=!1;if(t)try{n=JSON.parse(t).directSendEnabled||!1}catch(e){console.warn('Failed to parse UI state:',e)}n?nt(e):tt(e)}function lt(e,t){console.log(`${e}:`,t)}const ot={class:'npc-detail-modal-header'},ct={class:'header-left'},it={class:'npc-detail-modal-title'},st={class:'tab-nav'},rt={class:'npc-detail-modal-content'},mt={key:0,class:'tab-panel active'},dt={key:0,class:'npc-detail-content'},ut={class:'detail-section'},pt={class:'info-grid'},vt={class:'info-item'},ft={class:'info-value'},yt={key:0,class:'info-item'},kt={class:'info-label'},gt={class:'info-value'},Et={key:1,class:'info-item'},bt={class:'info-value'},Nt={class:'info-item'},ht={class:'info-value'},Vt={class:'info-item'},Ct={class:'info-label'},Bt={class:'info-value'},St={key:2,class:'info-item'},wt={class:'info-value'},xt={key:3,class:'info-item'},Dt={class:'info-label'},qt={class:'info-value'},Mt={key:4,class:'info-item'},Tt={class:'info-value'},_t={key:0,class:'detail-section'},$t={class:'info-text'},It={key:1,class:'detail-section'},Ft={class:'status-bars'},Ot={key:0,class:'status-bar'},At={class:'status-value'},zt={key:1,class:'status-bar'},Lt={class:'status-value'},Pt={key:2,class:'status-bar'},jt={class:'status-value'},Xt={key:2,class:'detail-section'},Yt={class:'bond-info'},Ut={key:0,class:'bond-item'},Rt={class:'bond-value'},Wt={key:1,class:'bond-item'},Ht={class:'bond-value'},Qt={key:2,class:'bond-item'},Zt={class:'bond-value sr-active'},Jt={key:3,class:'detail-section'},Gt={class:'section-title'},Kt={class:'abilities-list'},en=['onClick'],tn={class:'ability-name'},nn={class:'expand-icon'},an={key:0,class:'ability-detail-line'},ln={key:1,class:'ability-detail-line'},on={key:4,class:'detail-section'},cn={class:'section-title'},sn={class:'tags-container'},rn=['onClick'],mn={class:'effect-name'},dn={class:'expand-icon'},un={key:0,class:'effect-details expanded'},pn={key:0,class:'effect-detail-line'},vn={key:1,class:'effect-detail-line'},fn={key:1,class:'tab-panel active'},yn={key:0,class:'npc-detail-content'},kn={class:'steal-section'},gn=['disabled'],En={key:0,class:'detail-section'},bn={class:'info-grid'},Nn={key:0,class:'info-item'},hn={class:'info-label'},Vn={class:'info-value'},Cn={key:1,class:'info-item'},Bn={class:'info-value'},Sn={key:1,class:'detail-section'},wn={class:'section-title'},xn={class:'inventory-content'},Dn={key:0,class:'equipment-section'},qn={class:'equipment-list'},Mn=['onClick'],Tn=['id','value'],_n={key:1,class:'equipment-equipped-indicator'},$n={class:'expand-icon'},In={key:0,class:'equipment-detail-bonus'},Fn={key:1,class:'equipment-detail-description'},On={key:1,class:'equipment-section'},An={class:'equipment-list'},zn=['onClick'],Ln=['id','value'],Pn={key:1,class:'equipment-equipped-indicator'},jn={class:'expand-icon'},Xn={key:0,class:'equipment-detail-bonus'},Yn={key:1,class:'equipment-detail-description'},Un={key:2,class:'equipment-section'},Rn={class:'equipment-list'},Wn=['onClick'],Hn=['id','value'],Qn={key:1,class:'equipment-equipped-indicator'},Zn={class:'expand-icon'},Jn={key:0,class:'equipment-detail-bonus'},Gn={key:1,class:'equipment-detail-description'},Kn={key:3,class:'equipment-section'},ea={class:'equipment-list'},ta=['onClick'],na=['id','value'],aa=['for'],la={key:1,class:'equipment-equipped-indicator'},oa={class:'expand-icon'},ca={key:0,class:'equipment-detail-bonus'},ia={key:1,class:'equipment-detail-description'},sa={key:2,class:'detail-section'},ra={class:'section-title'},ma={class:'inventory-content'},da={class:'clothing-list'},ua={key:0,class:'clothing-item'},pa=['for'],va=['id','value'],fa={key:1,class:'clothing-item'},ya=['for'],ka=['id','value'],ga={key:2,class:'clothing-item'},Ea=['for'],ba=['id','value'],Na={key:3,class:'clothing-item'},ha=['for'],Va=['id','value'],Ca={key:3,class:'detail-section'},Ba={class:'section-title'},Sa={class:'inventory-content'},wa={class:'items-list'},xa=['id','value'],Da=['for','onClick'],qa={class:'item-name'},Ma={key:0,class:'expand-icon'},Ta={key:0,class:'item-detail-line'},_a={key:1,class:'item-detail-line'},$a={key:4,class:'detail-section'},Ia={key:1,class:'npc-detail-content'},Fa=(0,n.defineComponent)({__name:'NpcDetailModal',props:{visible:{type:Boolean},npc:{},defaultTab:{}},emits:['close'],setup(e,{emit:t}){const a=e,l=t,{defaultTab:o='basic'}=a,c=(0,n.ref)(o),i=(0,n.ref)([]),s=(0,n.ref)(!1),r=(0,n.ref)({}),m=(0,n.ref)({}),d=(0,n.ref)({}),u=(0,n.ref)({});function p(){s.value=!s.value,s.value||(i.value=[])}function v(e){r.value[e]=!r.value[e]}function f(){if(0===i.value.length)return;at(`å·çªƒï¼š${a.npc?.name||'æœªçŸ¥NPC'}çš„${i.value.map(e=>e.split(':')[1]||e).join('ã€')}`),i.value=[],s.value=!1,l('close')}function y(){l('close')}function k(e){return!!(e?.upperClothing||e?.lowerClothing||e?.shoes||e?.underwear)}function g(e){return{upper:'ä¸Šè¡£',lower:'ä¸‹è¡£',underwear:'ä¸­è¡£',shoes:'é‹å­'}[e]}function E(e){return Qe[e]||Qe['æ™®é€š']}function b(e){return{upper:'#1E90FF',lower:'#FFD700',shoes:'#32CD32',underwear:'#FF69B4'}[e]}function N(e){return a.npc?.inventory?.equipment?Object.keys(a.npc.inventory.equipment).filter(t=>a.npc.inventory.equipment[t].type===e).map(e=>({equipment:a.npc.inventory.equipment[e],key:e})):[]}return(t,a)=>e.visible?((0,n.openBlock)(),(0,n.createElementBlock)('div',{key:0,class:'npc-detail-modal-overlay',onClick:y},[(0,n.createElementVNode)('div',{class:'npc-detail-modal',onClick:a[15]||(a[15]=(0,n.withModifiers)(()=>{},['stop']))},[(0,n.createElementVNode)('div',ot,[(0,n.createElementVNode)('div',ct,[(0,n.createElementVNode)('h2',it,(0,n.toDisplayString)(e.npc?.name||'NPCè¯¦æƒ…'),1),(0,n.createElementVNode)('div',st,[(0,n.createElementVNode)('button',{class:(0,n.normalizeClass)([{active:'basic'===c.value},'tab-btn']),onClick:a[0]||(a[0]=e=>c.value='basic')},'åŸºæœ¬ä¿¡æ¯',2),(0,n.createElementVNode)('button',{class:(0,n.normalizeClass)([{active:'inventory'===c.value},'tab-btn']),onClick:a[1]||(a[1]=e=>c.value='inventory')},'ç‰©å“æ ',2)])]),(0,n.createElementVNode)('button',{class:'npc-detail-modal-close',onClick:y},'Ã—')]),(0,n.createElementVNode)('div',rt,[(0,n.createCommentVNode)(' åŸºæœ¬ä¿¡æ¯æ ‡ç­¾é¡µ '),'basic'===c.value?((0,n.openBlock)(),(0,n.createElementBlock)('div',mt,[e.npc?((0,n.openBlock)(),(0,n.createElementBlock)('div',dt,[(0,n.createCommentVNode)(' åŸºæœ¬ä¿¡æ¯ '),(0,n.createElementVNode)('div',ut,[a[21]||(a[21]=(0,n.createElementVNode)('h3',{class:'section-title'},'åŸºæœ¬ä¿¡æ¯',-1)),(0,n.createElementVNode)('div',pt,[(0,n.createElementVNode)('div',vt,[a[16]||(a[16]=(0,n.createElementVNode)('span',{class:'info-label'},'å§“åï¼š',-1)),(0,n.createElementVNode)('span',ft,(0,n.toDisplayString)(e.npc.name),1)]),e.npc.title&&e.npc.title.length>0?((0,n.openBlock)(),(0,n.createElementBlock)('div',yt,[(0,n.createElementVNode)('span',kt,(0,n.toDisplayString)((0,n.unref)(We)('titles')),1),(0,n.createElementVNode)('span',gt,(0,n.toDisplayString)(e.npc.title.join(' | ')),1)])):(0,n.createCommentVNode)('v-if',!0),e.npc.location?((0,n.openBlock)(),(0,n.createElementBlock)('div',Et,[a[17]||(a[17]=(0,n.createElementVNode)('span',{class:'info-label'},'ä½ç½®ï¼š',-1)),(0,n.createElementVNode)('span',bt,(0,n.toDisplayString)(e.npc.location),1)])):(0,n.createCommentVNode)('v-if',!0),(0,n.createElementVNode)('div',Nt,[a[18]||(a[18]=(0,n.createElementVNode)('span',{class:'info-label'},'çŠ¶æ€ï¼š',-1)),(0,n.createElementVNode)('span',ht,(0,n.toDisplayString)(e.npc.status),1)]),(0,n.createElementVNode)('div',Vt,[(0,n.createElementVNode)('span',Ct,(0,n.toDisplayString)((0,n.unref)(We)('npcPower')),1),(0,n.createElementVNode)('span',Bt,(0,n.toDisplayString)(e.npc.power),1)]),e.npc.age?((0,n.openBlock)(),(0,n.createElementBlock)('div',St,[a[19]||(a[19]=(0,n.createElementVNode)('span',{class:'info-label'},'å¹´é¾„ï¼š',-1)),(0,n.createElementVNode)('span',wt,(0,n.toDisplayString)(e.npc.age)+'å²',1)])):(0,n.createCommentVNode)('v-if',!0),e.npc.alignment?((0,n.openBlock)(),(0,n.createElementBlock)('div',xt,[(0,n.createElementVNode)('span',Dt,(0,n.toDisplayString)((0,n.unref)(We)('alignment')),1),(0,n.createElementVNode)('span',qt,(0,n.toDisplayString)(e.npc.alignment),1)])):(0,n.createCommentVNode)('v-if',!0),e.npc.relationship?((0,n.openBlock)(),(0,n.createElementBlock)('div',Mt,[a[20]||(a[20]=(0,n.createElementVNode)('span',{class:'info-label'},'å…³ç³»ï¼š',-1)),(0,n.createElementVNode)('span',Tt,(0,n.toDisplayString)(e.npc.relationship),1)])):(0,n.createCommentVNode)('v-if',!0)])]),(0,n.createCommentVNode)(' è¯¦ç»†ä¿¡æ¯ '),e.npc.info?((0,n.openBlock)(),(0,n.createElementBlock)('div',_t,[a[22]||(a[22]=(0,n.createElementVNode)('h3',{class:'section-title'},'è¯¦ç»†ä¿¡æ¯',-1)),(0,n.createElementVNode)('div',$t,(0,n.toDisplayString)(e.npc.info),1)])):(0,n.createCommentVNode)('v-if',!0),(0,n.createCommentVNode)(' çŠ¶æ€æ¡ '),e.npc.hp||e.npc.mp||e.npc.sta?((0,n.openBlock)(),(0,n.createElementBlock)('div',It,[a[23]||(a[23]=(0,n.createElementVNode)('h3',{class:'section-title'},'çŠ¶æ€',-1)),(0,n.createElementVNode)('div',Ft,[e.npc.hp?((0,n.openBlock)(),(0,n.createElementBlock)('div',Ot,[(0,n.createElementVNode)('span',At,(0,n.toDisplayString)(e.npc.hp),1)])):(0,n.createCommentVNode)('v-if',!0),e.npc.mp?((0,n.openBlock)(),(0,n.createElementBlock)('div',zt,[(0,n.createElementVNode)('span',Lt,(0,n.toDisplayString)(e.npc.mp),1)])):(0,n.createCommentVNode)('v-if',!0),e.npc.sta?((0,n.openBlock)(),(0,n.createElementBlock)('div',Pt,[(0,n.createElementVNode)('span',jt,(0,n.toDisplayString)(e.npc.sta),1)])):(0,n.createCommentVNode)('v-if',!0)])])):(0,n.createCommentVNode)('v-if',!0),(0,n.createCommentVNode)(' ç¾ç»Šä¿¡æ¯ '),void 0!==e.npc.affection||void 0!==e.npc.sd||void 0!==e.npc.sr?((0,n.openBlock)(),(0,n.createElementBlock)('div',Xt,[a[27]||(a[27]=(0,n.createElementVNode)('h3',{class:'section-title'},'ç¾ç»Šä¿¡æ¯',-1)),(0,n.createElementVNode)('div',Yt,[void 0!==e.npc.affection?((0,n.openBlock)(),(0,n.createElementBlock)('div',Ut,[a[24]||(a[24]=(0,n.createElementVNode)('span',{class:'bond-label'},'å¥½æ„Ÿï¼š',-1)),(0,n.createElementVNode)('span',Rt,(0,n.toDisplayString)(e.npc.affection)+'/100',1)])):(0,n.createCommentVNode)('v-if',!0),void 0!==e.npc.sd?((0,n.openBlock)(),(0,n.createElementBlock)('div',Wt,[a[25]||(a[25]=(0,n.createElementVNode)('span',{class:'bond-label'},'æ¬²æœ›ï¼š',-1)),(0,n.createElementVNode)('span',Ht,(0,n.toDisplayString)(e.npc.sd)+'/100',1)])):(0,n.createCommentVNode)('v-if',!0),void 0!==e.npc.sr?((0,n.openBlock)(),(0,n.createElementBlock)('div',Qt,[a[26]||(a[26]=(0,n.createElementVNode)('span',{class:'bond-label'},'æ€§å…³ç³»ï¼š',-1)),(0,n.createElementVNode)('span',Zt,(0,n.toDisplayString)(e.npc.sr?'æœ‰':'æ— '),1)])):(0,n.createCommentVNode)('v-if',!0)])])):(0,n.createCommentVNode)('v-if',!0),(0,n.createCommentVNode)(' æŠ€èƒ½ '),e.npc.abilities&&e.npc.abilities.length>0?((0,n.openBlock)(),(0,n.createElementBlock)('div',Jt,[(0,n.createElementVNode)('h3',Gt,(0,n.toDisplayString)((0,n.unref)(We)('abilities').replace(':','')),1),(0,n.createElementVNode)('div',Kt,[((0,n.openBlock)(!0),(0,n.createElementBlock)(n.Fragment,null,(0,n.renderList)(e.npc.abilities,e=>((0,n.openBlock)(),(0,n.createElementBlock)('div',{key:e.name,class:'ability-item'},[(0,n.createElementVNode)('div',{class:'ability-header',onClick:t=>{return n=e.name,void(d.value[n]=!d.value[n]);var n}},[(0,n.createElementVNode)('span',tn,(0,n.toDisplayString)(e.name),1),(0,n.createElementVNode)('span',nn,(0,n.toDisplayString)(d.value[e.name]?'â–¼':'â–¶'),1)],8,en),d.value[e.name]?((0,n.openBlock)(),(0,n.createElementBlock)('div',{key:0,class:(0,n.normalizeClass)(['ability-details',{expanded:d.value[e.name]}])},[e.proficiency?((0,n.openBlock)(),(0,n.createElementBlock)('div',an,'ç†Ÿç»ƒåº¦ï¼š'+(0,n.toDisplayString)(e.proficiency),1)):(0,n.createCommentVNode)('v-if',!0),e.effect?((0,n.openBlock)(),(0,n.createElementBlock)('div',ln,'æ•ˆæœï¼š'+(0,n.toDisplayString)(e.effect),1)):(0,n.createCommentVNode)('v-if',!0)],2)):(0,n.createCommentVNode)('v-if',!0)]))),128))])])):(0,n.createCommentVNode)('v-if',!0),(0,n.createCommentVNode)(' æ•ˆæœ '),e.npc.effects&&e.npc.effects.length>0?((0,n.openBlock)(),(0,n.createElementBlock)('div',on,[(0,n.createElementVNode)('h3',cn,(0,n.toDisplayString)((0,n.unref)(We)('effects').replace(':','')),1),(0,n.createElementVNode)('div',sn,[((0,n.openBlock)(!0),(0,n.createElementBlock)(n.Fragment,null,(0,n.renderList)(e.npc.effects,e=>((0,n.openBlock)(),(0,n.createElementBlock)('span',{key:e.name,class:'tag effect-tag',onClick:t=>{return n=e.name,void(u.value[n]=!u.value[n]);var n}},[(0,n.createElementVNode)('span',mn,(0,n.toDisplayString)(e.name),1),(0,n.createElementVNode)('span',dn,(0,n.toDisplayString)(u.value[e.name]?'â–¼':'â–¶'),1)],8,rn))),128)),Object.values(u.value).some(e=>e)?((0,n.openBlock)(),(0,n.createElementBlock)('div',un,[((0,n.openBlock)(!0),(0,n.createElementBlock)(n.Fragment,null,(0,n.renderList)(e.npc.effects,e=>(0,n.withDirectives)(((0,n.openBlock)(),(0,n.createElementBlock)('div',{key:'detail-'+e.name,class:'effect-detail-content'},[e.description?((0,n.openBlock)(),(0,n.createElementBlock)('div',pn,'æè¿°ï¼š'+(0,n.toDisplayString)(e.description),1)):(0,n.createCommentVNode)('v-if',!0),void 0!==e.remainingRounds?((0,n.openBlock)(),(0,n.createElementBlock)('div',vn,'å‰©ä½™å›åˆï¼š'+(0,n.toDisplayString)(e.remainingRounds),1)):(0,n.createCommentVNode)('v-if',!0)])),[[n.vShow,u.value[e.name]]])),128))])):(0,n.createCommentVNode)('v-if',!0)])])):(0,n.createCommentVNode)('v-if',!0)])):(0,n.createCommentVNode)('v-if',!0)])):(0,n.createCommentVNode)('v-if',!0),(0,n.createCommentVNode)(' ç‰©å“æ æ ‡ç­¾é¡µ '),'inventory'===c.value?((0,n.openBlock)(),(0,n.createElementBlock)('div',fn,[e.npc&&e.npc.inventory?((0,n.openBlock)(),(0,n.createElementBlock)('div',yn,[(0,n.createCommentVNode)(' å·çªƒæ§åˆ¶æŒ‰é’® '),(0,n.createElementVNode)('div',kn,[(0,n.createElementVNode)('button',{class:(0,n.normalizeClass)([{active:s.value},'steal-toggle-btn']),onClick:p},' ğŸ•µï¸ '+(0,n.toDisplayString)(s.value?'æ•›æ‰‹':'æ¢å›Š'),3),s.value?((0,n.openBlock)(),(0,n.createElementBlock)('button',{key:0,disabled:0===i.value.length,class:'steal-btn',onClick:f},' ğŸ”ª å–ç‰© ('+(0,n.toDisplayString)(i.value.length)+') ',9,gn)):(0,n.createCommentVNode)('v-if',!0)]),(0,n.createCommentVNode)(' è´¢å¯ŒçŠ¶å†µ '),e.npc.inventory.currency||e.npc.inventory.wealthStatus?((0,n.openBlock)(),(0,n.createElementBlock)('div',En,[a[29]||(a[29]=(0,n.createElementVNode)('h3',{class:'section-title'},'è´¢å¯Œ',-1)),(0,n.createElementVNode)('div',bn,[e.npc.inventory.currency?((0,n.openBlock)(),(0,n.createElementBlock)('div',Nn,[(0,n.createElementVNode)('span',hn,(0,n.toDisplayString)((0,n.unref)(We)('currency')),1),(0,n.createElementVNode)('span',Vn,(0,n.toDisplayString)(e.npc.inventory.currency),1)])):(0,n.createCommentVNode)('v-if',!0),e.npc.inventory.wealthStatus?((0,n.openBlock)(),(0,n.createElementBlock)('div',Cn,[a[28]||(a[28]=(0,n.createElementVNode)('span',{class:'info-label'},'çŠ¶å†µï¼š',-1)),(0,n.createElementVNode)('span',Bn,(0,n.toDisplayString)(e.npc.inventory.wealthStatus),1)])):(0,n.createCommentVNode)('v-if',!0)])])):(0,n.createCommentVNode)('v-if',!0),(0,n.createCommentVNode)(' è£…å¤‡ '),e.npc.inventory.equipment?((0,n.openBlock)(),(0,n.createElementBlock)('div',Sn,[(0,n.createElementVNode)('h3',wn,(0,n.toDisplayString)((0,n.unref)(We)('equipment').replace(':','')),1),(0,n.createElementVNode)('div',xn,[(0,n.createCommentVNode)(' æ­¦å™¨ '),N('æ­¦å™¨').length>0?((0,n.openBlock)(),(0,n.createElementBlock)('div',Dn,[a[30]||(a[30]=(0,n.createElementVNode)('h4',{class:'equipment-section-title'},'æ­¦å™¨',-1)),(0,n.createElementVNode)('div',qn,[((0,n.openBlock)(!0),(0,n.createElementBlock)(n.Fragment,null,(0,n.renderList)(N('æ­¦å™¨'),t=>((0,n.openBlock)(),(0,n.createElementBlock)('div',{key:t.key,class:'equipment-detail-item'},[(0,n.createElementVNode)('div',{class:'equipment-detail-header',onClick:e=>v(t.key)},[s.value?(0,n.withDirectives)(((0,n.openBlock)(),(0,n.createElementBlock)('input',{key:0,id:'equip-'+e.npc.name+'-'+t.key,'onUpdate:modelValue':a[2]||(a[2]=e=>i.value=e),value:'è£…å¤‡:'+t.key,type:'checkbox',class:'item-checkbox',onClick:a[3]||(a[3]=(0,n.withModifiers)(()=>{},['stop']))},null,8,Tn)),[[n.vModelCheckbox,i.value]]):(0,n.createCommentVNode)('v-if',!0),(0,n.createElementVNode)('span',{class:'equipment-detail-name',style:(0,n.normalizeStyle)({color:E(t.equipment.quality)})},(0,n.toDisplayString)((0,n.unref)(Ze)(t.key)),5),t.equipment.equipped?((0,n.openBlock)(),(0,n.createElementBlock)('span',_n,'å·²è£…å¤‡')):(0,n.createCommentVNode)('v-if',!0),(0,n.createElementVNode)('span',$n,(0,n.toDisplayString)(r.value[t.key]?'â–¼':'â–¶'),1)],8,Mn),r.value[t.key]?((0,n.openBlock)(),(0,n.createElementBlock)('div',{key:0,class:(0,n.normalizeClass)(['equipment-detail-expanded',{expanded:r.value[t.key]}])},[t.equipment.bonus?((0,n.openBlock)(),(0,n.createElementBlock)('div',In,'åŠ æˆï¼š'+(0,n.toDisplayString)(t.equipment.bonus),1)):(0,n.createCommentVNode)('v-if',!0),t.equipment.description?((0,n.openBlock)(),(0,n.createElementBlock)('div',Fn,'æè¿°ï¼š'+(0,n.toDisplayString)(t.equipment.description),1)):(0,n.createCommentVNode)('v-if',!0)],2)):(0,n.createCommentVNode)('v-if',!0)]))),128))])])):(0,n.createCommentVNode)('v-if',!0),(0,n.createCommentVNode)(' é˜²å…· '),N('é˜²å…·').length>0?((0,n.openBlock)(),(0,n.createElementBlock)('div',On,[a[31]||(a[31]=(0,n.createElementVNode)('h4',{class:'equipment-section-title'},'é˜²å…·',-1)),(0,n.createElementVNode)('div',An,[((0,n.openBlock)(!0),(0,n.createElementBlock)(n.Fragment,null,(0,n.renderList)(N('é˜²å…·'),t=>((0,n.openBlock)(),(0,n.createElementBlock)('div',{key:t.key,class:'equipment-detail-item'},[(0,n.createElementVNode)('div',{class:'equipment-detail-header',onClick:e=>v(t.key)},[s.value?(0,n.withDirectives)(((0,n.openBlock)(),(0,n.createElementBlock)('input',{key:0,id:'equip-'+e.npc.name+'-'+t.key,'onUpdate:modelValue':a[4]||(a[4]=e=>i.value=e),value:'è£…å¤‡:'+t.key,type:'checkbox',class:'item-checkbox',onClick:a[5]||(a[5]=(0,n.withModifiers)(()=>{},['stop']))},null,8,Ln)),[[n.vModelCheckbox,i.value]]):(0,n.createCommentVNode)('v-if',!0),(0,n.createElementVNode)('span',{class:'equipment-detail-name',style:(0,n.normalizeStyle)({color:E(t.equipment.quality)})},(0,n.toDisplayString)((0,n.unref)(Ze)(t.key)),5),t.equipment.equipped?((0,n.openBlock)(),(0,n.createElementBlock)('span',Pn,'å·²è£…å¤‡')):(0,n.createCommentVNode)('v-if',!0),(0,n.createElementVNode)('span',jn,(0,n.toDisplayString)(r.value[t.key]?'â–¼':'â–¶'),1)],8,zn),r.value[t.key]?((0,n.openBlock)(),(0,n.createElementBlock)('div',{key:0,class:(0,n.normalizeClass)(['equipment-detail-expanded',{expanded:r.value[t.key]}])},[t.equipment.bonus?((0,n.openBlock)(),(0,n.createElementBlock)('div',Xn,'åŠ æˆï¼š'+(0,n.toDisplayString)(t.equipment.bonus),1)):(0,n.createCommentVNode)('v-if',!0),t.equipment.description?((0,n.openBlock)(),(0,n.createElementBlock)('div',Yn,'æè¿°ï¼š'+(0,n.toDisplayString)(t.equipment.description),1)):(0,n.createCommentVNode)('v-if',!0)],2)):(0,n.createCommentVNode)('v-if',!0)]))),128))])])):(0,n.createCommentVNode)('v-if',!0),(0,n.createCommentVNode)(' é¥°å“ '),N('é¥°å“').length>0?((0,n.openBlock)(),(0,n.createElementBlock)('div',Un,[a[32]||(a[32]=(0,n.createElementVNode)('h4',{class:'equipment-section-title'},'é¥°å“',-1)),(0,n.createElementVNode)('div',Rn,[((0,n.openBlock)(!0),(0,n.createElementBlock)(n.Fragment,null,(0,n.renderList)(N('é¥°å“'),t=>((0,n.openBlock)(),(0,n.createElementBlock)('div',{key:t.key,class:'equipment-detail-item'},[(0,n.createElementVNode)('div',{class:'equipment-detail-header',onClick:e=>v(t.key)},[s.value?(0,n.withDirectives)(((0,n.openBlock)(),(0,n.createElementBlock)('input',{key:0,id:'equip-'+e.npc.name+'-'+t.key,'onUpdate:modelValue':a[6]||(a[6]=e=>i.value=e),value:'è£…å¤‡:'+t.key,type:'checkbox',class:'item-checkbox',onClick:a[7]||(a[7]=(0,n.withModifiers)(()=>{},['stop']))},null,8,Hn)),[[n.vModelCheckbox,i.value]]):(0,n.createCommentVNode)('v-if',!0),(0,n.createElementVNode)('span',{class:'equipment-detail-name',style:(0,n.normalizeStyle)({color:E(t.equipment.quality)})},(0,n.toDisplayString)((0,n.unref)(Ze)(t.key)),5),t.equipment.equipped?((0,n.openBlock)(),(0,n.createElementBlock)('span',Qn,'å·²è£…å¤‡')):(0,n.createCommentVNode)('v-if',!0),(0,n.createElementVNode)('span',Zn,(0,n.toDisplayString)(r.value[t.key]?'â–¼':'â–¶'),1)],8,Wn),r.value[t.key]?((0,n.openBlock)(),(0,n.createElementBlock)('div',{key:0,class:(0,n.normalizeClass)(['equipment-detail-expanded',{expanded:r.value[t.key]}])},[t.equipment.bonus?((0,n.openBlock)(),(0,n.createElementBlock)('div',Jn,'åŠ æˆï¼š'+(0,n.toDisplayString)(t.equipment.bonus),1)):(0,n.createCommentVNode)('v-if',!0),t.equipment.description?((0,n.openBlock)(),(0,n.createElementBlock)('div',Gn,'æè¿°ï¼š'+(0,n.toDisplayString)(t.equipment.description),1)):(0,n.createCommentVNode)('v-if',!0)],2)):(0,n.createCommentVNode)('v-if',!0)]))),128))])])):(0,n.createCommentVNode)('v-if',!0),(0,n.createCommentVNode)(' å…¶ä»–è£…å¤‡ '),N('').length>0?((0,n.openBlock)(),(0,n.createElementBlock)('div',Kn,[a[33]||(a[33]=(0,n.createElementVNode)('h4',{class:'equipment-section-title'},'å…¶ä»–',-1)),(0,n.createElementVNode)('div',ea,[((0,n.openBlock)(!0),(0,n.createElementBlock)(n.Fragment,null,(0,n.renderList)(N(''),t=>((0,n.openBlock)(),(0,n.createElementBlock)('div',{key:t.key,class:'equipment-detail-item'},[(0,n.createElementVNode)('div',{class:'equipment-detail-header',onClick:e=>v(t.key)},[s.value?(0,n.withDirectives)(((0,n.openBlock)(),(0,n.createElementBlock)('input',{key:0,id:'equip-'+e.npc.name+'-'+t.key,'onUpdate:modelValue':a[8]||(a[8]=e=>i.value=e),value:'è£…å¤‡:'+t.key,type:'checkbox',class:'item-checkbox',onClick:a[9]||(a[9]=(0,n.withModifiers)(()=>{},['stop']))},null,8,na)),[[n.vModelCheckbox,i.value]]):(0,n.createCommentVNode)('v-if',!0),(0,n.createElementVNode)('label',{for:'equip-'+e.npc.name+'-'+t.key,class:'equipment-detail-name',style:(0,n.normalizeStyle)({color:E(t.equipment.quality)})},(0,n.toDisplayString)((0,n.unref)(Ze)(t.key)),13,aa),t.equipment.equipped?((0,n.openBlock)(),(0,n.createElementBlock)('span',la,'å·²è£…å¤‡')):(0,n.createCommentVNode)('v-if',!0),(0,n.createElementVNode)('span',oa,(0,n.toDisplayString)(r.value[t.key]?'â–¼':'â–¶'),1)],8,ta),r.value[t.key]?((0,n.openBlock)(),(0,n.createElementBlock)('div',{key:0,class:(0,n.normalizeClass)(['equipment-detail-expanded',{expanded:r.value[t.key]}])},[t.equipment.bonus?((0,n.openBlock)(),(0,n.createElementBlock)('div',ca,'åŠ æˆï¼š'+(0,n.toDisplayString)(t.equipment.bonus),1)):(0,n.createCommentVNode)('v-if',!0),t.equipment.description?((0,n.openBlock)(),(0,n.createElementBlock)('div',ia,'æè¿°ï¼š'+(0,n.toDisplayString)(t.equipment.description),1)):(0,n.createCommentVNode)('v-if',!0)],2)):(0,n.createCommentVNode)('v-if',!0)]))),128))])])):(0,n.createCommentVNode)('v-if',!0)])])):(0,n.createCommentVNode)('v-if',!0),(0,n.createCommentVNode)(' è¡£ç‰© '),k(e.npc.inventory)?((0,n.openBlock)(),(0,n.createElementBlock)('div',sa,[(0,n.createElementVNode)('h3',ra,(0,n.toDisplayString)((We('clothing')||'è¡£å† ').replace(':','')),1),(0,n.createElementVNode)('div',ma,[(0,n.createElementVNode)('div',da,[e.npc.inventory.upperClothing?((0,n.openBlock)(),(0,n.createElementBlock)('div',ua,[(0,n.createElementVNode)('label',{for:'upper-'+e.npc.name,class:'checkbox-label'},[s.value?(0,n.withDirectives)(((0,n.openBlock)(),(0,n.createElementBlock)('input',{key:0,id:'upper-'+e.npc.name,'onUpdate:modelValue':a[10]||(a[10]=e=>i.value=e),value:'ä¸Šè¡£:'+e.npc.inventory.upperClothing,type:'checkbox',class:'item-checkbox'},null,8,va)),[[n.vModelCheckbox,i.value]]):(0,n.createCommentVNode)('v-if',!0),(0,n.createElementVNode)('span',{style:(0,n.normalizeStyle)({color:b('upper')})},(0,n.toDisplayString)(g('upper'))+'ã€'+(0,n.toDisplayString)(e.npc.inventory.upperClothing)+'ã€‘',5)],8,pa)])):(0,n.createCommentVNode)('v-if',!0),e.npc.inventory.lowerClothing?((0,n.openBlock)(),(0,n.createElementBlock)('div',fa,[(0,n.createElementVNode)('label',{for:'lower-'+e.npc.name,class:'checkbox-label'},[s.value?(0,n.withDirectives)(((0,n.openBlock)(),(0,n.createElementBlock)('input',{key:0,id:'lower-'+e.npc.name,'onUpdate:modelValue':a[11]||(a[11]=e=>i.value=e),value:'ä¸‹è¡£:'+e.npc.inventory.lowerClothing,type:'checkbox',class:'item-checkbox'},null,8,ka)),[[n.vModelCheckbox,i.value]]):(0,n.createCommentVNode)('v-if',!0),(0,n.createElementVNode)('span',{style:(0,n.normalizeStyle)({color:b('lower')})},(0,n.toDisplayString)(g('lower'))+'ã€'+(0,n.toDisplayString)(e.npc.inventory.lowerClothing)+'ã€‘',5)],8,ya)])):(0,n.createCommentVNode)('v-if',!0),e.npc.inventory.underwear?((0,n.openBlock)(),(0,n.createElementBlock)('div',ga,[(0,n.createElementVNode)('label',{for:'underwear-'+e.npc.name,class:'checkbox-label'},[s.value?(0,n.withDirectives)(((0,n.openBlock)(),(0,n.createElementBlock)('input',{key:0,id:'underwear-'+e.npc.name,'onUpdate:modelValue':a[12]||(a[12]=e=>i.value=e),value:'å†…è¡£:'+e.npc.inventory.underwear,type:'checkbox',class:'item-checkbox'},null,8,ba)),[[n.vModelCheckbox,i.value]]):(0,n.createCommentVNode)('v-if',!0),(0,n.createElementVNode)('span',{style:(0,n.normalizeStyle)({color:b('underwear')})},(0,n.toDisplayString)(g('underwear'))+'ã€'+(0,n.toDisplayString)(e.npc.inventory.underwear)+'ã€‘',5)],8,Ea)])):(0,n.createCommentVNode)('v-if',!0),e.npc.inventory.shoes?((0,n.openBlock)(),(0,n.createElementBlock)('div',Na,[(0,n.createElementVNode)('label',{for:'shoes-'+e.npc.name,class:'checkbox-label'},[s.value?(0,n.withDirectives)(((0,n.openBlock)(),(0,n.createElementBlock)('input',{key:0,id:'shoes-'+e.npc.name,'onUpdate:modelValue':a[13]||(a[13]=e=>i.value=e),value:'é‹å­:'+e.npc.inventory.shoes,type:'checkbox',class:'item-checkbox'},null,8,Va)),[[n.vModelCheckbox,i.value]]):(0,n.createCommentVNode)('v-if',!0),(0,n.createElementVNode)('span',{style:(0,n.normalizeStyle)({color:b('shoes')})},(0,n.toDisplayString)(g('shoes'))+'ã€'+(0,n.toDisplayString)(e.npc.inventory.shoes)+'ã€‘',5)],8,ha)])):(0,n.createCommentVNode)('v-if',!0)])])])):(0,n.createCommentVNode)('v-if',!0),(0,n.createCommentVNode)(' ç‰©å“ '),e.npc.inventory.items&&e.npc.inventory.items.length>0?((0,n.openBlock)(),(0,n.createElementBlock)('div',Ca,[(0,n.createElementVNode)('h3',Ba,(0,n.toDisplayString)((0,n.unref)(We)('items').replace(':','')),1),(0,n.createElementVNode)('div',Sa,[(0,n.createElementVNode)('div',wa,[((0,n.openBlock)(!0),(0,n.createElementBlock)(n.Fragment,null,(0,n.renderList)(e.npc.inventory.items,(t,l)=>((0,n.openBlock)(),(0,n.createElementBlock)('div',{key:'string'==typeof t?t:t.name,class:'item-with-checkbox'},[s.value?(0,n.withDirectives)(((0,n.openBlock)(),(0,n.createElementBlock)('input',{key:0,id:'item-'+e.npc.name+'-'+l,'onUpdate:modelValue':a[14]||(a[14]=e=>i.value=e),value:'ç‰©å“:'+('string'==typeof t?t:t.name),type:'checkbox',class:'item-checkbox'},null,8,xa)),[[n.vModelCheckbox,i.value]]):(0,n.createCommentVNode)('v-if',!0),(0,n.createElementVNode)('label',{for:'item-'+e.npc.name+'-'+l,style:(0,n.normalizeStyle)({color:'string'==typeof t?'var(--text-main)':E(t.quality)}),class:'checkbox-label item-tag',onClick:e=>{return'object'==typeof t&&(t.effect||t.description)?(n='string'==typeof t?t:t.name,void(m.value[n]=!m.value[n])):null;var n}},[(0,n.createElementVNode)('span',qa,(0,n.toDisplayString)('string'==typeof t?t:t.name)+(0,n.toDisplayString)('object'==typeof t&&t.count&&t.count>1?' x'+t.count:''),1),'object'==typeof t&&(t.effect||t.description)?((0,n.openBlock)(),(0,n.createElementBlock)('span',Ma,(0,n.toDisplayString)(m.value['string'==typeof t?t:t.name]?'â–¼':'â–¶'),1)):(0,n.createCommentVNode)('v-if',!0),'object'==typeof t&&(t.effect||t.description)&&m.value['string'==typeof t?t:t.name]?((0,n.openBlock)(),(0,n.createElementBlock)('div',{key:1,class:(0,n.normalizeClass)(['item-details',{expanded:m.value['string'==typeof t?t:t.name]}])},[t.effect?((0,n.openBlock)(),(0,n.createElementBlock)('div',Ta,'æ•ˆæœï¼š'+(0,n.toDisplayString)(t.effect),1)):(0,n.createCommentVNode)('v-if',!0),t.description?((0,n.openBlock)(),(0,n.createElementBlock)('div',_a,'æè¿°ï¼š'+(0,n.toDisplayString)(t.description),1)):(0,n.createCommentVNode)('v-if',!0)],2)):(0,n.createCommentVNode)('v-if',!0)],12,Da)]))),128))])])])):(0,n.createCommentVNode)('v-if',!0),(0,n.createCommentVNode)(' å¦‚æœæ²¡æœ‰ç‰©å“ '),e.npc.inventory.weapon||e.npc.inventory.armor||e.npc.inventory.accessories||e.npc.inventory.equipment||k(e.npc.inventory)||e.npc.inventory.items&&0!==e.npc.inventory.items.length||e.npc.inventory.currency||e.npc.inventory.wealthStatus?(0,n.createCommentVNode)('v-if',!0):((0,n.openBlock)(),(0,n.createElementBlock)('div',$a,[...a[34]||(a[34]=[(0,n.createElementVNode)('div',{class:'empty-inventory'},[(0,n.createElementVNode)('span',{class:'empty-text'},'æš‚æ— ç‰©å“')],-1)])]))])):((0,n.openBlock)(),(0,n.createElementBlock)('div',Ia,[...a[35]||(a[35]=[(0,n.createElementVNode)('div',{class:'detail-section'},[(0,n.createElementVNode)('div',{class:'empty-inventory'},[(0,n.createElementVNode)('span',{class:'empty-text'},'æš‚æ— ç‰©å“æ ä¿¡æ¯')])],-1)])]))])):(0,n.createCommentVNode)('v-if',!0)])])])):(0,n.createCommentVNode)('v-if',!0)}}),Oa=(0,he.A)(Fa,[['__scopeId','data-v-4c08f391']]),Aa=e=>e?e.trim().split(/,|ï¼Œ/).map(e=>e.trim()).filter(Boolean):[],za=e=>e?Object.keys(e).filter(e=>'$template'!==e).map(t=>({name:t,proficiency:e[t].ç†Ÿç»ƒåº¦||'',effect:e[t].æ•ˆæœ||''})):[],La=e=>e?Object.keys(e).filter(e=>'$template'!==e).map(t=>({name:t,description:e[t].æè¿°||'',remainingRounds:e[t].å‰©ä½™å›åˆ||0})):[],Pa=e=>{if(!e)return{};const t={},n=e.split('\n');for(const e of n){const n=-1!==e.indexOf(':')?e.indexOf(':'):e.indexOf('ï¼š');if(n>0){const a=e.substring(0,n).trim(),l=e.substring(n+1).trim();a&&(t[a]=l)}}return t},ja=e=>{if(!e)return'æ™®é€š';const t=e.match(/\(([^)]+)\)$/);return t?t[1]:'æ™®é€š'},Xa=e=>{if(!e)return{};const t={};if(1===e.nodeType){const n=e.getAttribute('HP'),a=e.getAttribute('HPä¸Šé™')||e.getAttribute('HPä¸Šé™')||'100',l=e.getAttribute('MP'),o=e.getAttribute('MPä¸Šé™')||e.getAttribute('MPä¸Šé™')||'100',c=e.getAttribute('STA'),i=e.getAttribute('STAä¸Šé™')||e.getAttribute('STAä¸Šé™')||'100';n&&(t.hp=`HPï¼š${n}/${a}`),l&&(t.mp=`MPï¼š${l}/${o}`),c&&(t.sta=`STAï¼š${c}/${i}`)}else void 0!==e.HP&&void 0!==e['HPä¸Šé™']&&(t.hp=`HPï¼š${e.HP}/${e['HPä¸Šé™']}`),void 0!==e.MP&&void 0!==e['MPä¸Šé™']&&(t.mp=`MPï¼š${e.MP}/${e['MPä¸Šé™']}`),void 0!==e.STA&&void 0!==e['STAä¸Šé™']&&(t.sta=`STAï¼š${e.STA}/${e['STAä¸Šé™']}`);return t};let Ya=null;function Ua(){try{let e;if(Ya&&(Ya.ç©å®¶||Ya.NPCåˆ—è¡¨))e=function(e){const t={nearbyNpcs:[],bondedNpcs:[],options:[],log:e.æ—¥å¿—è®°å½•?e.æ—¥å¿—è®°å½•.join('\n'):''};if(e.ç©å®¶){const n=e.ç©å®¶;t.character={name:n.åå­—||'æœªçŸ¥',alias:n.ç§°å·||[],status:n.çŠ¶æ€?.å½“å‰çŠ¶æ€||'å¥åº·',alignment:`ç§©åºå€¼:${n.ä¿¡æ¯?.ç§©åºå€¼||0}, å–„è‰¯å€¼:${n.ä¿¡æ¯?.å–„è‰¯å€¼||0}`,power:n.å®åŠ›?.å¢ƒç•Œ?`${n.å®åŠ›.å¢ƒç•Œ} (${n.å®åŠ›.è¿›åº¦å€¼}/${n.å®åŠ›.è¿›åº¦å€¼ä¸Šé™}${n.å®åŠ›.è¿›åº¦å•ä½?` ${n.å®åŠ›.è¿›åº¦å•ä½}`:''})`:'',info:n.ä¿¡æ¯?.èº«ä»½?n.ä¿¡æ¯.èº«ä»½.join(' | '):'',ov:n.ä¿¡æ¯?.ç§©åºå€¼||0,kv:n.ä¿¡æ¯?.å–„è‰¯å€¼||0,custom:n.ä¿¡æ¯?.è‡ªå®šä¹‰||{},abilities:n.æŠ€èƒ½?za(n.æŠ€èƒ½):[],titles:n.ç§°å·||[],effects:n.çŠ¶æ€?.ä¸´æ—¶æ•ˆæœ?La(n.çŠ¶æ€.ä¸´æ—¶æ•ˆæœ):[],thought:'',...Xa(n.çŠ¶æ€)},n.ç‰©å“æ &&t.character&&(t.character.inventory={items:n.ç‰©å“æ .ç‰©å“?Object.keys(n.ç‰©å“æ .ç‰©å“).filter(e=>'$template'!==e).map(e=>({name:e,quality:n.ç‰©å“æ .ç‰©å“[e].å“è´¨||'æ™®é€š',count:n.ç‰©å“æ .ç‰©å“[e].æ•°é‡||1,type:n.ç‰©å“æ .ç‰©å“[e].ç±»å‹||'',effect:n.ç‰©å“æ .ç‰©å“[e].æ•ˆæœ||'',description:n.ç‰©å“æ .ç‰©å“[e].æè¿°||''})):[],currency:n.ç‰©å“æ .è´¢å¯Œ?.è´§å¸||'',wealthStatus:n.ç‰©å“æ .è´¢å¯Œ?.çŠ¶å†µ||'',weapon:n.ç‰©å“æ .è£…å¤‡?Object.keys(n.ç‰©å“æ .è£…å¤‡).filter(e=>'$template'!==e&&n.ç‰©å“æ .è£…å¤‡[e].ç©¿æˆ´&&'æ­¦å™¨'===n.ç‰©å“æ .è£…å¤‡[e].ç±»å‹).map(e=>`${e}(${n.ç‰©å“æ .è£…å¤‡[e].å“è´¨})`).join(', '):'',armor:n.ç‰©å“æ .è£…å¤‡?Object.keys(n.ç‰©å“æ .è£…å¤‡).filter(e=>'$template'!==e&&n.ç‰©å“æ .è£…å¤‡[e].ç©¿æˆ´&&'é˜²å…·'===n.ç‰©å“æ .è£…å¤‡[e].ç±»å‹).map(e=>`${e}(${n.ç‰©å“æ .è£…å¤‡[e].å“è´¨})`).join(', '):'',accessories:n.ç‰©å“æ .è£…å¤‡?Object.keys(n.ç‰©å“æ .è£…å¤‡).filter(e=>'$template'!==e&&n.ç‰©å“æ .è£…å¤‡[e].ç©¿æˆ´&&'é¥°å“'===n.ç‰©å“æ .è£…å¤‡[e].ç±»å‹).map(e=>`${e}(${n.ç‰©å“æ .è£…å¤‡[e].å“è´¨})`).join(', '):'',upperClothing:n.ç‰©å“æ .è¡£ç‰©?.ä¸Šèº«||'',lowerClothing:n.ç‰©å“æ .è¡£ç‰©?.ä¸‹èº«||'',shoes:n.ç‰©å“æ .è¡£ç‰©?.é‹å­||'',underwear:n.ç‰©å“æ .è¡£ç‰©?.å†…è¡£||'',equipment:n.ç‰©å“æ .è£…å¤‡?Object.keys(n.ç‰©å“æ .è£…å¤‡).filter(e=>'$template'!==e).reduce((e,t)=>(e[t]={type:n.ç‰©å“æ .è£…å¤‡[t].ç±»å‹||'',quality:n.ç‰©å“æ .è£…å¤‡[t].å“è´¨||'æ™®é€š',bonus:n.ç‰©å“æ .è£…å¤‡[t].åŠ æˆ||'',description:n.ç‰©å“æ .è£…å¤‡[t].æè¿°||'',equipped:n.ç‰©å“æ .è£…å¤‡[t].ç©¿æˆ´||!1},e),{}):{}})}if(e.ä¸–ç•Œ){const n=e.ä¸–ç•Œ,a=(e,t)=>e&&t?`${e} | ${t}`:e||(t||'');t.world={time:a(n.æ—¥æœŸ||'',n.æ—¶é—´||''),location:n.ä½ç½®||'',environment:n.å¤©æ°”?`${n.å¤©æ°”} | ${n.ç¯å¢ƒ||''}`:n.ç¯å¢ƒ||'',dynamics:n.äº‹ä»¶?n.äº‹ä»¶.join(', '):'',quests:e.ä»»åŠ¡åˆ—è¡¨?Object.keys(e.ä»»åŠ¡åˆ—è¡¨).filter(e=>'$template'!==e).map(t=>({type:e.ä»»åŠ¡åˆ—è¡¨[t].ç±»å‹||'æ”¯çº¿',content:`(${t}) ${e.ä»»åŠ¡åˆ—è¡¨[t].å†…å®¹}`,bcd:e.ä»»åŠ¡åˆ—è¡¨[t].å¼€å§‹æ—¶é—´,ecd:e.ä»»åŠ¡åˆ—è¡¨[t].ç»“æŸæ—¶é—´,status:e.ä»»åŠ¡åˆ—è¡¨[t].çŠ¶æ€})):[],factions:e.åŠ¿åŠ›åˆ—è¡¨?Object.keys(e.åŠ¿åŠ›åˆ—è¡¨).filter(e=>'$template'!==e).map(t=>({name:t,value:`${e.åŠ¿åŠ›åˆ—è¡¨[t].å…³ç³»å€¼}/100`,location:e.åŠ¿åŠ›åˆ—è¡¨[t].ä½ç½®||'',alignment:e.åŠ¿åŠ›åˆ—è¡¨[t].é˜µè¥ä¹å®«æ ¼||'',relationValue:e.åŠ¿åŠ›åˆ—è¡¨[t].å…³ç³»å€¼||0,relationDesc:e.åŠ¿åŠ›åˆ—è¡¨[t].å…³ç³»æè¿°||''})):[]}}e.NPCåˆ—è¡¨&&Object.keys(e.NPCåˆ—è¡¨).filter(e=>'$template'!==e).forEach(n=>{const a=e.NPCåˆ—è¡¨[n],l={name:n,title:a.ç§°å·||[],info:a.ä¿¡æ¯?.èº«ä»½?a.ä¿¡æ¯.èº«ä»½.join(', '):'',age:a.ä¿¡æ¯?.å¹´é¾„||0,alignment:a.ä¿¡æ¯?.é˜µè¥ä¹å®«æ ¼||'',relationship:a.ä¿¡æ¯?.å…³ç³»||'é™Œç”Ÿäºº',power:a.å®åŠ›?.å¢ƒç•Œ?`${a.å®åŠ›.å¢ƒç•Œ} (${a.å®åŠ›.è¿›åº¦å€¼}/${a.å®åŠ›.è¿›åº¦å€¼ä¸Šé™}${a.å®åŠ›.è¿›åº¦å•ä½?` ${a.å®åŠ›.è¿›åº¦å•ä½}`:''})`:'',status:a.çŠ¶æ€?.å½“å‰çŠ¶æ€||'å¥åº·',location:a.ä½ç½®||'',sr:'æ˜¯'===a.äº²å¯†åº¦?.ç¾ç»Š,sd:a.äº²å¯†åº¦?.æ€§æ¬²||0,affection:a.äº²å¯†åº¦?.å¥½æ„Ÿåº¦||0,abilities:a.æŠ€èƒ½?za(a.æŠ€èƒ½):[],effects:a.çŠ¶æ€?.ä¸´æ—¶æ•ˆæœ?La(a.çŠ¶æ€.ä¸´æ—¶æ•ˆæœ):[],...Xa(a.çŠ¶æ€)};a.ç‰©å“æ &&(l.inventory={items:a.ç‰©å“æ .ç‰©å“?Object.keys(a.ç‰©å“æ .ç‰©å“).filter(e=>'$template'!==e).map(e=>({name:e,quality:a.ç‰©å“æ .ç‰©å“[e].å“è´¨||'æ™®é€š',count:a.ç‰©å“æ .ç‰©å“[e].æ•°é‡||1,effect:a.ç‰©å“æ .ç‰©å“[e].æ•ˆæœ||'',description:a.ç‰©å“æ .ç‰©å“[e].æè¿°||''})):[],weapon:a.ç‰©å“æ .è£…å¤‡?Object.keys(a.ç‰©å“æ .è£…å¤‡).filter(e=>'$template'!==e&&a.ç‰©å“æ .è£…å¤‡[e].ç©¿æˆ´&&'æ­¦å™¨'===a.ç‰©å“æ .è£…å¤‡[e].ç±»å‹).map(e=>`${e}(${a.ç‰©å“æ .è£…å¤‡[e].å“è´¨})`).join(', '):'',armor:a.ç‰©å“æ .è£…å¤‡?Object.keys(a.ç‰©å“æ .è£…å¤‡).filter(e=>'$template'!==e&&a.ç‰©å“æ .è£…å¤‡[e].ç©¿æˆ´&&'é˜²å…·'===a.ç‰©å“æ .è£…å¤‡[e].ç±»å‹).map(e=>`${e}(${a.ç‰©å“æ .è£…å¤‡[e].å“è´¨})`).join(', '):'',accessories:a.ç‰©å“æ .è£…å¤‡?Object.keys(a.ç‰©å“æ .è£…å¤‡).filter(e=>'$template'!==e&&a.ç‰©å“æ .è£…å¤‡[e].ç©¿æˆ´&&'é¥°å“'===a.ç‰©å“æ .è£…å¤‡[e].ç±»å‹).map(e=>`${e}(${a.ç‰©å“æ .è£…å¤‡[e].å“è´¨})`).join(', '):'',upperClothing:a.ç‰©å“æ .è¡£ç‰©?.ä¸Šèº«||'',lowerClothing:a.ç‰©å“æ .è¡£ç‰©?.ä¸‹èº«||'',shoes:a.ç‰©å“æ .è¡£ç‰©?.é‹å­||'',underwear:a.ç‰©å“æ .è¡£ç‰©?.å†…è¡£||'',currency:a.ç‰©å“æ .è´¢å¯Œ?.è´§å¸||'',wealthStatus:a.ç‰©å“æ .è´¢å¯Œ?.çŠ¶å†µ||'',equipment:a.ç‰©å“æ .è£…å¤‡?Object.keys(a.ç‰©å“æ .è£…å¤‡).filter(e=>'$template'!==e).reduce((e,t)=>(e[t]={type:a.ç‰©å“æ .è£…å¤‡[t].ç±»å‹||'',quality:a.ç‰©å“æ .è£…å¤‡[t].å“è´¨||'æ™®é€š',bonus:a.ç‰©å“æ .è£…å¤‡[t].åŠ æˆ||'',description:a.ç‰©å“æ .è£…å¤‡[t].æè¿°||'',equipped:a.ç‰©å“æ .è£…å¤‡[t].ç©¿æˆ´||!1},e),{}):{}}),l.sr='æ˜¯'===a.äº²å¯†åº¦?.æ€§å…³ç³»,l.sd=a.äº²å¯†åº¦?.æ€§æ¬²||0,l.affection=a.äº²å¯†åº¦?.å¥½æ„Ÿåº¦||0,l.custom=a.ä¿¡æ¯?.è‡ªå®šä¹‰||{},'æ˜¯'===a.äº²å¯†åº¦?.ç¾ç»Š?t.bondedNpcs.push(l):a.æ˜¯å¦åœ¨åœº&&t.nearbyNpcs.push(l)});return t}(Ya);else{const t=function(){try{const e=getChatMessages(getCurrentMessageId())[0].message.match(/<fate_console>([\s\S]*?)<\/fate_console>/);if(!e||!e[1])return null;const t='<root>'+e[1].trim()+'</root>',n=(new DOMParser).parseFromString(t,'text/xml'),a=n.querySelector('parsererror');if(a){const e=a.textContent||'æœªçŸ¥XMLè§£æé”™è¯¯';console.error('XMLè§£æé”™è¯¯:',e);let t='æœªçŸ¥ä½ç½®';if(e.includes('unclosed tag')){const n=e.match(/unclosed tag: (\w+)/);n&&(t=`æœªé—­åˆçš„æ ‡ç­¾: <${n[1]}>`)}else if(e.includes('mismatched tag')){const n=e.match(/mismatched tag: (\w+)/);n&&(t=`æ ‡ç­¾ä¸åŒ¹é…: <${n[1]}>`)}else if(e.includes('expected')){const n=e.match(/expected '<\/(\w+)>'/);n&&(t=`æœŸæœ›ç»“æŸæ ‡ç­¾: </${n[1]}>`)}else if(e.includes('Opening and ending tag mismatch')){const n=e.match(/Opening and ending tag mismatch: (\w+) line (\d+) and (\w+)/);n&&(t=`æ ‡ç­¾ä¸åŒ¹é…: <${n[1]}> å’Œ </${n[3]}>`)}return{nearbyNpcs:[],bondedNpcs:[],options:[],log:`XMLè§£æå¤±è´¥: ${e}\né”™è¯¯ä½ç½®--\x3e ${t}ï¼Œè¯·æ£€æŸ¥AIç”Ÿæˆçš„XMLæ ¼å¼ã€‚\nä½œè€…ï¼škqsã€‚`}}const l=(e,t=n)=>t.querySelector(e),o=(e,t=n)=>t.querySelectorAll(e),c=(e,t=n)=>{try{const n=t.querySelector(e);return n&&n.textContent||''}catch(t){return console.warn(`è§£ææ ‡ç­¾ ${e} æ—¶å‡ºé”™:`,t),'æ•°æ®å¼‚å¸¸'}},i={nearbyNpcs:[],bondedNpcs:[],options:[],log:c('log')},s=n.querySelector('character');if(s)try{const e=l('name',s),t=e?.textContent?.trim()||'',a=e?.getAttribute('alias')?.trim();i.character={name:t,alias:a,status:c('status',s),alignment:c('alignment',s).trim(),power:c('power',s).trim(),info:c('info',s).trim(),ov:parseInt(l('info',s)?.getAttribute('ov')||'0',10),kv:parseInt(l('info',s)?.getAttribute('kv')||'0',10),custom:Pa(c('custom',s)),abilities:Aa(c('abilities',s)).map(e=>({name:e,proficiency:'',effect:''})),titles:Aa(a),effects:Aa(c('effects',s)).map(e=>({name:Ge(e),description:'',remainingRounds:Ke(e)})),thought:c('thought',s).trim()};const o=l('status',s);i.character&&Object.assign(i.character,Xa(o));const r=n.querySelector('inventory');if(r){const e=l('equipment',r),t=e?.textContent?.trim()||'';i.character.inventory={items:Aa(c('items',r)),currency:c('currency',r).trim(),weapon:e?.getAttribute('weapon')?.trim()||'',armor:e?.getAttribute('armor')?.trim()||'',accessories:e?.getAttribute('accessories')?.trim()||'',equipment:t?Aa(t).reduce((e,t)=>{const n=Ze(t),a=ja(t);return e[n]={type:'è£…å¤‡',quality:a,equipped:!1},e},{}):{}}}}catch(e){console.error('è§£æè§’è‰²æ•°æ®æ—¶å‡ºé”™:',e),i.character={name:'æ•°æ®å¼‚å¸¸',status:'æ•°æ®å¼‚å¸¸',alignment:'æ•°æ®å¼‚å¸¸',power:'æ•°æ®å¼‚å¸¸',abilities:[{name:'æ•°æ®å¼‚å¸¸',proficiency:'',effect:''}],titles:['æ•°æ®å¼‚å¸¸'],effects:[{name:'æ•°æ®å¼‚å¸¸',description:'',remainingRounds:0}]}}const r=n.querySelector('world');if(r)try{i.world={time:c('time',r).trim(),location:c('location',r).trim(),environment:c('environment',r).trim(),dynamics:c('dynamics',r).trim(),quests:[],factions:[]};o('journal > quest').forEach(e=>{try{const t=e.getAttribute('type')||'æ”¯çº¿',n=e.textContent?.trim()||'',a=e.getAttribute('bcd')?.trim(),l=e.getAttribute('ecd')?.trim();i.world.quests.push({type:t,content:n,bcd:a,ecd:l})}catch(e){console.warn('è§£æä»»åŠ¡æ•°æ®æ—¶å‡ºé”™:',e),i.world.quests.push({type:'æ•°æ®å¼‚å¸¸',content:'æ•°æ®å¼‚å¸¸'})}});o('factions > faction').forEach(e=>{try{const t=e.getAttribute('name')||'',n=e.textContent?.trim()||'';i.world.factions.push({name:t,value:n,relationValue:0,relationDesc:n})}catch(e){console.warn('è§£ææ´¾ç³»æ•°æ®æ—¶å‡ºé”™:',e),i.world.factions.push({name:'æ•°æ®å¼‚å¸¸',value:'æ•°æ®å¼‚å¸¸',relationValue:0,relationDesc:'æ•°æ®å¼‚å¸¸'})}})}catch(e){console.error('è§£æä¸–ç•Œæ•°æ®æ—¶å‡ºé”™:',e),i.world={time:'æ•°æ®å¼‚å¸¸',location:'æ•°æ®å¼‚å¸¸',environment:'æ•°æ®å¼‚å¸¸',dynamics:'æ•°æ®å¼‚å¸¸',quests:[{type:'æ•°æ®å¼‚å¸¸',content:'æ•°æ®å¼‚å¸¸'}],factions:[{name:'æ•°æ®å¼‚å¸¸',value:'æ•°æ®å¼‚å¸¸',relationValue:0,relationDesc:'æ•°æ®å¼‚å¸¸'}]}}const m=e=>{try{const t=c('name',e).trim(),n=c('status',e),a=e.getAttribute('sr'),o=e.getAttribute('sd'),i=e.getAttribute('affection'),s={name:t,info:c('info',e).trim(),power:c('power',e).trim(),status:n,location:e.getAttribute('location')?.trim(),sr:'æ˜¯'===a,sd:o?parseInt(o,10):'æ˜¯'===a?50:0,affection:i?parseInt(i,10):'æ˜¯'===a?80:0,custom:Pa(c('custom',e)),abilities:Aa(c('abilities',e)).map(e=>({name:e,proficiency:'',effect:''})),effects:Aa(c('effects',e)).map(e=>({name:Ge(e),description:'',remainingRounds:Ke(e)}))},r=l('equipment',e);if(r){const t=c('items',e),n=r?.textContent?.trim()||'',a=r.getAttribute('weapon')?.trim(),l=r.getAttribute('armor')?.trim(),o=r.getAttribute('accessories')?.trim();s.inventory={items:t?Aa(t):[],weapon:a||'',armor:l||'',accessories:o||'',equipment:{...a&&{[a]:{type:'æ­¦å™¨',quality:ja(a),equipped:!0}},...l&&{[l]:{type:'é˜²å…·',quality:ja(l),equipped:!0}},...o&&{[o]:{type:'é¥°å“',quality:ja(o),equipped:!0}},...n?Aa(n).reduce((e,t)=>{const n=Ze(t),a=ja(t);return e[n]={type:'è£…å¤‡',quality:a,equipped:!1},e},{}):{}}}}const m=l('status',e);if(m){const e=Xa(m);e.hp&&(s.hp=e.hp),e.mp&&(s.mp=e.mp),e.sta&&(s.sta=e.sta)}return s}catch(e){return console.warn('è§£æNPCæ•°æ®æ—¶å‡ºé”™:',e),{name:'æ•°æ®å¼‚å¸¸',info:'æ•°æ®å¼‚å¸¸',power:'æ•°æ®å¼‚å¸¸',status:'æ•°æ®å¼‚å¸¸',abilities:[{name:'æ•°æ®å¼‚å¸¸',proficiency:'',effect:''}],effects:[{name:'æ•°æ®å¼‚å¸¸',description:'',remainingRounds:0}]}}};o('nearby_npcs > npc').forEach(e=>{i.nearbyNpcs.push(m(e))});o('bonded_characters > npc').forEach(e=>{i.bondedNpcs.push(m(e))});const d=n.querySelector('options');if(d)try{o('option',d).forEach(e=>{try{const t=e.getAttribute('id')||'',n=e.getAttribute('type')||'',a='true'===e.getAttribute('disabled'),l=e.textContent?.trim()||'';i.options.push({id:t,content:l,type:n,disabled:a})}catch(e){console.warn('è§£æé€‰é¡¹æ•°æ®æ—¶å‡ºé”™:',e),i.options.push({id:'æ•°æ®å¼‚å¸¸',content:'æ•°æ®å¼‚å¸¸',disabled:!0})}})}catch(e){console.error('è§£æé€‰é¡¹èŠ‚ç‚¹æ—¶å‡ºé”™:',e),i.options=[{id:'æ•°æ®å¼‚å¸¸',content:'æ•°æ®å¼‚å¸¸',disabled:!0}]}return i}catch(e){return console.error('XMLæ•°æ®è§£æå¤±è´¥:',e),null}}();if(!t)return null;e=t}const t=function(){try{const e=getChatMessages(getCurrentMessageId())[0].message.match(/<fate_console>([\s\S]*?)<\/fate_console>/);if(!e||!e[1])return[];const t='<root>'+e[1].trim()+'</root>',n=(new DOMParser).parseFromString(t,'text/xml'),a=[];return n.querySelector('options')&&n.querySelectorAll('option').forEach(e=>{try{const t=e.getAttribute('id')||'',n=e.getAttribute('type')||'',l='true'===e.getAttribute('disabled'),o=e.textContent?.trim()||'';a.push({id:t,content:o,type:n,disabled:l})}catch(e){console.warn('è§£æé€‰é¡¹æ•°æ®æ—¶å‡ºé”™:',e)}}),a}catch(e){return console.error('XMLé€‰é¡¹è§£æå¤±è´¥:',e),[]}}();return t&&t.length>0&&(e.options=t),e}catch(e){return console.error('å‘½è¿ç»ˆç«¯æ•°æ®è§£æå¤±è´¥:',e),null}}$(()=>{eventOn('era:writeDone',e=>{e&&e.statWithoutMeta&&(Ya=e.statWithoutMeta)}),eventEmit('era:requestWriteDone')});const Ra={class:'music-player-container'},Wa={class:'music-controls'},Ha=['disabled'],Qa=['disabled'],Za=['disabled'],Ja=['disabled','title'],Ga={key:0,class:'current-track-info'},Ka={class:'track-title'},el={class:'track-artist'},tl={class:'progress-container'},nl={class:'progress-bar music-progress'},al={class:'time-display'},ll={class:'current-time'},ol={class:'duration'},cl={class:'play-status'},il={class:'status-icon'},sl={class:'status-text'},rl={key:0,class:'spectrum-container'},ml={key:1,class:'entry-switcher'},dl={class:'entry-selector'},ul=['value'],pl={class:'playlist-container'},vl={class:'playlist'},fl=['onClick'],yl={class:'track-info'},kl={class:'track-title'},gl={class:'track-artist'},El={class:'track-duration'},bl={key:0,class:'empty-playlist'},Nl={class:'empty-hint'},hl=(0,n.defineComponent)({__name:'MusicPlayer',setup(e){const t=(0,n.ref)([]),a=(0,n.ref)(-1),l=(0,n.ref)(!1),o=(0,n.ref)(0),c=(0,n.ref)(0),i=(0,n.ref)('loop'),s=(0,n.ref)([]),r=(0,n.ref)('éŸ³ä¹'),m=(0,n.ref)([]),d=(0,n.computed)(()=>t.value[a.value]||null),u=(0,n.computed)(()=>0===c.value?0:o.value/c.value*100),p=(0,n.computed)(()=>t.value.length>0),v=(0,n.computed)(()=>{switch(i.value){case'single':return'ğŸ”‚';case'shuffle':return'ğŸ”€';default:return'ğŸ”'}}),f=(0,n.computed)(()=>{switch(i.value){case'single':return'å•æ›²å¾ªç¯';case'shuffle':return'éšæœºæ’­æ”¾';default:return'åˆ—è¡¨å¾ªç¯'}});function y(e){try{const t={type:'fc_music_command',command:e,timestamp:Date.now()};eventEmit('fc_music_command',t)}catch(e){console.warn('å‘é€å‘½ä»¤å¤±è´¥:',e)}}function k(){localStorage.setItem('fc_music_current_entry',r.value),y(`switch_entry_${r.value}`)}function g(){localStorage.setItem('fc_music_current_entry',r.value),y(`load_music_${r.value}`)}function E(e){if(!e||isNaN(e)||0===e)return'';return`${Math.floor(e/60)}:${Math.floor(e%60).toString().padStart(2,'0')}`}async function b(){try{const e='å‘½è¿ç»ˆç«¯',n=await getWorldbook(e);if(!n||0===n.length)return void(t.value=[]);const a=n.filter(e=>e.name.includes('éŸ³ä¹')||e.name.includes('å°æ›²')||e.name.includes('bgm'));s.value=a.map(e=>e.name);const l=localStorage.getItem('fc_music_current_entry')||'éŸ³ä¹';let o=a.find(e=>e.name===l&&e.enabled);if(!o&&a.length>0&&(o=a[0],localStorage.setItem('fc_music_current_entry',o.name)),o&&(r.value=o.name),!o||!o.content)return void(t.value=[]);const c=[],i=Te.value,m=o.content.split('\n').map(e=>e.trim()).filter(e=>e),d={å¤é£:'gufeng',ä»™ä¾ :'xianxia',æ°‘ä¿—:'minsu',æ­¦ä¾ :'wuxia',ç„å¹»:'xuanhuan',æ—¥å¼:'nihon',jrpg:'jrpg'},u=m.some(e=>e.endsWith('ï¼š')&&Object.prototype.hasOwnProperty.call(d,e.slice(0,-1)));let p='';for(const e of m)if(e.endsWith('ï¼š')){const t=e.slice(0,-1);p=d[t]||t}else if(e){if(!u||p===i)try{let t,n,a;if(e.includes('|')){const l=e.split('|').map(e=>e.trim());if(l.length>=3)[t,n,a]=l;else if(2===l.length)[t,a]=l,n=N(i);else{a=e;const l=a.match(/([^/]+\.(?:mp3|wav|ogg))$/i);t=l?l[1].replace(/\.(mp3|wav|ogg)$/i,''):`éŸ³ä¹ ${c.length+1}`,n=N(i)}}else{a=e;const l=a.match(/([^/]+\.(?:mp3|wav|ogg))$/i);t=l?l[1].replace(/\.(mp3|wav|ogg)$/i,''):`éŸ³ä¹ ${c.length+1}`,n=N(i)}c.push({title:t,artist:n,url:a,duration:0})}catch(t){console.warn(`è§£æéŸ³ä¹é“¾æ¥å¤±è´¥: ${e}`,t)}}t.value=c}catch(e){console.warn('åŠ è½½ä¸–ç•Œä¹¦éŸ³ä¹å¤±è´¥ï¼Œæ’­æ”¾åˆ—è¡¨ä¸ºç©º:',e),t.value=[]}}function N(e){return{gufeng:'å¤ç­æ¼”å¥',xianxia:'ä»™ä¹åˆå¥',minsu:'æ°‘é—´è‰ºäºº',wuxia:'æ±Ÿæ¹–ç´å¸ˆ',xuanhuan:'ç¥ç•Œä¹å¸ˆ',nihon:'å’Œä¹æ¼”å¥',jrpg:'æ¸¸æˆé…ä¹å¸ˆ'}[e]||'æœªçŸ¥è‰ºæœ¯å®¶'}function h(){l.value&&m.value.forEach((e,t)=>{const n=.001*Date.now(),a=.1*(t+1),l=10*(Math.random()-.5),o=30*Math.sin(n*a),c=15*Math.sin(n*a*2.1),i=9*Math.sin(n*a*.7);e.height=Math.max(10,10+o+c+i+l);const s=Math.min(1,e.height/60);e.color=`hsl(${200+5*t}, 70%, ${40+30*s}%)`})}function V(){eventOn('fc_music_state',e=>{!function(e){try{e.currentTrack?a.value=t.value.findIndex(t=>t.url===e.currentTrack.url):a.value=e.currentTrackIndex||-1,l.value=e.isPlaying||!1,e.playMode&&(i.value=e.playMode),o.value=e.currentTime||0,c.value=e.duration||180}catch(e){console.warn('åŒæ­¥æ’­æ”¾çŠ¶æ€å¤±è´¥:',e)}}(e)}),eventOn('fc_music_entry_update',e=>{r.value=e.currentEntry,s.value=e.availableEntries,e.playlist&&(t.value=e.playlist)})}return(0,n.onMounted)(async()=>{await b(),m.value=Array.from({length:32},(_,e)=>({id:e,height:10+20*Math.random(),color:`hsl(${200+5*e}, 70%, 60%)`})),V(),setInterval(h,50)}),(0,n.watch)(Te,async(e,t)=>{e!==t&&await b()}),(e,i)=>((0,n.openBlock)(),(0,n.createElementBlock)('div',Ra,[(0,n.createCommentVNode)(' æ’­æ”¾æ§åˆ¶æŒ‰é’® '),(0,n.createElementVNode)('div',Wa,[(0,n.createElementVNode)('button',{class:'music-btn',title:'åŠ è½½éŸ³ä¹',onClick:g},' ğŸµ '),(0,n.createElementVNode)('button',{class:'music-btn',disabled:!p.value,title:'ä¸Šä¸€é¦–',onClick:i[0]||(i[0]=e=>y('previous'))},' â®ï¸ ',8,Ha),(0,n.createElementVNode)('button',{class:(0,n.normalizeClass)(['music-btn play-btn',{playing:l.value}]),disabled:!p.value,title:'æ’­æ”¾/æš‚åœ',onClick:i[1]||(i[1]=e=>y('toggle'))},(0,n.toDisplayString)(l.value?'â¸ï¸':'â–¶ï¸'),11,Qa),(0,n.createElementVNode)('button',{class:'music-btn',disabled:!p.value,title:'ä¸‹ä¸€é¦–',onClick:i[2]||(i[2]=e=>y('next'))},' â­ï¸ ',8,Za),(0,n.createElementVNode)('button',{class:'music-btn mode-btn',disabled:!p.value,title:f.value,onClick:i[3]||(i[3]=e=>y('toggle_mode'))},(0,n.toDisplayString)(v.value),9,Ja)]),(0,n.createCommentVNode)(' å½“å‰æ’­æ”¾ä¿¡æ¯ '),d.value?((0,n.openBlock)(),(0,n.createElementBlock)('div',Ga,[(0,n.createElementVNode)('div',Ka,(0,n.toDisplayString)(d.value.title),1),(0,n.createElementVNode)('div',el,(0,n.toDisplayString)(d.value.artist),1),(0,n.createElementVNode)('div',tl,[(0,n.createElementVNode)('div',nl,[(0,n.createElementVNode)('div',{class:'progress-bar-fill music-fill',style:(0,n.normalizeStyle)({width:u.value+'%'})},null,4)]),(0,n.createElementVNode)('div',al,[(0,n.createElementVNode)('span',ll,(0,n.toDisplayString)(E(o.value)),1),(0,n.createElementVNode)('span',ol,(0,n.toDisplayString)(E(c.value)),1)])]),(0,n.createElementVNode)('div',cl,[(0,n.createElementVNode)('span',il,(0,n.toDisplayString)(l.value?'ğŸµ':'â¸ï¸'),1),(0,n.createElementVNode)('span',sl,(0,n.toDisplayString)(l.value?'æ­£åœ¨æ’­æ”¾':'å·²æš‚åœ'),1)]),(0,n.createCommentVNode)(' éŸ³ä¹é¢‘è°±å¯è§†åŒ– '),l.value?((0,n.openBlock)(),(0,n.createElementBlock)('div',rl,[((0,n.openBlock)(!0),(0,n.createElementBlock)(n.Fragment,null,(0,n.renderList)(m.value,e=>((0,n.openBlock)(),(0,n.createElementBlock)('div',{key:e.id,class:'spectrum-bar',style:(0,n.normalizeStyle)({height:e.height+'px',backgroundColor:e.color})},null,4))),128))])):(0,n.createCommentVNode)('v-if',!0)])):(0,n.createCommentVNode)('v-if',!0),(0,n.createCommentVNode)(' æ¡ç›®åˆ‡æ¢å™¨ '),s.value.length>0?((0,n.openBlock)(),(0,n.createElementBlock)('div',ml,[(0,n.createElementVNode)('div',dl,[i[5]||(i[5]=(0,n.createElementVNode)('label',{class:'entry-label'},'éŸ³ä¹æ¥æº:',-1)),(0,n.withDirectives)((0,n.createElementVNode)('select',{'onUpdate:modelValue':i[4]||(i[4]=e=>r.value=e),class:'entry-select',onChange:k},[((0,n.openBlock)(!0),(0,n.createElementBlock)(n.Fragment,null,(0,n.renderList)(s.value,e=>((0,n.openBlock)(),(0,n.createElementBlock)('option',{key:e,value:e},(0,n.toDisplayString)(e),9,ul))),128))],544),[[n.vModelSelect,r.value]])])])):(0,n.createCommentVNode)('v-if',!0),(0,n.createCommentVNode)(' æ’­æ”¾åˆ—è¡¨ '),(0,n.createElementVNode)('div',pl,[(0,n.createElementVNode)('div',vl,[((0,n.openBlock)(!0),(0,n.createElementBlock)(n.Fragment,null,(0,n.renderList)(t.value,(e,t)=>((0,n.openBlock)(),(0,n.createElementBlock)('div',{key:t,class:(0,n.normalizeClass)(['playlist-item',{active:t===a.value}]),onClick:e=>y(`play_${t}`)},[(0,n.createElementVNode)('div',yl,[(0,n.createElementVNode)('div',kl,(0,n.toDisplayString)(e.title),1),(0,n.createElementVNode)('div',gl,(0,n.toDisplayString)(e.artist),1)]),(0,n.createElementVNode)('div',El,(0,n.toDisplayString)(E(e.duration)),1)],10,fl))),128)),0===t.value.length?((0,n.openBlock)(),(0,n.createElementBlock)('div',bl,[i[6]||(i[6]=(0,n.createElementVNode)('div',{class:'empty-message'},'æš‚æ— éŸ³ä¹',-1)),(0,n.createElementVNode)('div',Nl,'è¯·æ£€æŸ¥"å‘½è¿ç»ˆç«¯"ä¸–ç•Œä¹¦ä¸­çš„'+(0,n.toDisplayString)(r.value)+'æ¡ç›®',1)])):(0,n.createCommentVNode)('v-if',!0)])])]))}}),Vl=(0,he.A)(hl,[['__scopeId','data-v-425d2618']]),Cl=Vl,Bl={class:'card-front'},Sl={class:'npc-header'},wl={key:0,class:'npc-status'},xl={class:'npc-header-right'},Dl={key:0,class:'npc-location'},ql={key:0,class:'progress-bar-group'},Ml=['data-negative'],Tl={class:'progress-bar-text'},_l={class:'info-line'},$l={class:'info-value'},Il={class:'info-line'},Fl={class:'info-label'},Ol={class:'info-value'},Al={key:1,class:'info-line'},zl={class:'info-value'},Ll={key:2,class:'info-line'},Pl={class:'info-label'},jl={class:'tags-container'},Xl={class:'card-back'},Yl={class:'npc-header'},Ul={key:0,class:'npc-status'},Rl={key:0,class:'npc-location'},Wl={key:0,class:'progress-bar-group'},Hl=['data-negative'],Ql={class:'progress-bar-text'},Zl={key:1,class:'progress-bar-group'},Jl={key:0,class:'progress-bar'},Gl={class:'progress-bar-text'},Kl={key:1,class:'progress-bar'},eo={class:'progress-bar-text'},to={key:2,class:'progress-bar'},no={class:'progress-bar-text'},ao={key:3,class:'progress-bar'},lo={class:'progress-bar-text'},oo={key:2,class:'info-line'},co={class:'info-label'},io={class:'tags-container'},so=(0,n.defineComponent)({__name:'NpcCard',props:{npc:{},bonded:{type:Boolean,default:!1}},emits:['showNpcInventory','showNpcDetail','showNpcCustomInfo'],setup(e,{emit:t}){const a=t,l=(0,n.ref)(!1);function o(){l.value=!l.value}function c(){a('showNpcDetail',e.npc)}function i(t){a('showNpcCustomInfo',e.npc,t)}function s(e){return e||'çŠ¶æ€æœªçŸ¥'}function r(e){const t=e.match(/(\d+)\s*\/\s*(\d+)/);if(!t)return'0%';const[,n,a]=t;return`${parseFloat(a)>0?parseFloat(n)/parseFloat(a)*100:0}%`}function m(e){const t=Math.max(-100,Math.min(100,e));if(t>=0)return`${t}%`;return`${Math.abs(t)}%`}function d(e){return function(e){const t=[];return[{key:'weapon',items:e.weapon},{key:'armor',items:e.armor},{key:'accessories',items:e.accessories}].forEach(({items:e})=>{e&&et(e).forEach(e=>{t.push({name:Ze(e),color:Je(e)})})}),t}(e)}return(t,u)=>{return(0,n.openBlock)(),(0,n.createElementBlock)('div',{class:(0,n.normalizeClass)(['npc-card',{bonded:e.bonded,'is-flipped':l.value}]),onClick:o},[(0,n.createElementVNode)('div',Bl,[(0,n.createElementVNode)('div',Sl,[(0,n.createElementVNode)('div',null,[(0,n.createElementVNode)('span',{class:(0,n.normalizeClass)(['npc-name clickable',{'sr-active':e.npc.sr}]),onClick:(0,n.withModifiers)(c,['stop'])},(0,n.toDisplayString)(e.npc.name),3),s(e.npc.status)?((0,n.openBlock)(),(0,n.createElementBlock)('span',wl,[(0,n.createTextVNode)(' ('+(0,n.toDisplayString)(s(e.npc.status))+') ',1),e.npc.custom&&Object.keys(e.npc.custom).length>0?((0,n.openBlock)(),(0,n.createElementBlock)('span',{key:0,class:'custom-info-icon clickable',title:'æŸ¥çœ‹è¯¦ç»†ä¿¡æ¯',onClick:(0,n.withModifiers)(i,['stop'])},(0,n.toDisplayString)((0,n.unref)(Me).customInfoIcon||'â„¹ï¸'),1)):(0,n.createCommentVNode)('v-if',!0)])):(0,n.createCommentVNode)('v-if',!0)]),(0,n.createElementVNode)('div',xl,[e.npc.location?((0,n.openBlock)(),(0,n.createElementBlock)('span',Dl,'@ '+(0,n.toDisplayString)(e.npc.location),1)):(0,n.createCommentVNode)('v-if',!0)])]),void 0!==e.npc.affection?((0,n.openBlock)(),(0,n.createElementBlock)('div',ql,[(0,n.createElementVNode)('div',{class:'progress-bar affection-bar','data-negative':e.npc.affection<0},[(0,n.createElementVNode)('div',{class:'progress-bar-fill affection',style:(0,n.normalizeStyle)({width:m(e.npc.affection)})},null,4),(0,n.createElementVNode)('span',Tl,'å¥½æ„Ÿï¼š'+(0,n.toDisplayString)(e.npc.affection)+'/100',1)],8,Ml)])):(0,n.createCommentVNode)('v-if',!0),(0,n.createElementVNode)('div',_l,[(0,n.createElementVNode)('span',$l,(0,n.toDisplayString)((e.npc.relationship?e.npc.relationship+' | ':'')+e.npc.info.replace(/,/g,' | ')),1)]),(0,n.createElementVNode)('div',Il,[(0,n.createElementVNode)('span',Fl,(0,n.toDisplayString)((0,n.unref)(We)('npcPower')),1),(0,n.createElementVNode)('span',Ol,(0,n.toDisplayString)(e.npc.power),1)]),e.npc.inventory&&d(e.npc.inventory).length>0?((0,n.openBlock)(),(0,n.createElementBlock)('div',Al,[(0,n.createElementVNode)('span',{class:'info-label clickable',onClick:u[0]||(u[0]=t=>{return n=e.npc,(l=t).stopPropagation(),void a('showNpcInventory',n,l);var n,l})},(0,n.toDisplayString)((0,n.unref)(We)('equipment')),1),(0,n.createElementVNode)('span',zl,[((0,n.openBlock)(!0),(0,n.createElementBlock)(n.Fragment,null,(0,n.renderList)(d(e.npc.inventory),(t,a)=>((0,n.openBlock)(),(0,n.createElementBlock)('span',{key:a,style:(0,n.normalizeStyle)({color:t.color}),class:'equipment-item'},(0,n.toDisplayString)(t.name)+(0,n.toDisplayString)(a<d(e.npc.inventory).length-1?' | ':''),5))),128))])])):(0,n.createCommentVNode)('v-if',!0),e.npc.abilities.length?((0,n.openBlock)(),(0,n.createElementBlock)('div',Ll,[(0,n.createElementVNode)('span',Pl,(0,n.toDisplayString)((0,n.unref)(We)('abilities')),1),(0,n.createElementVNode)('div',jl,[((0,n.openBlock)(!0),(0,n.createElementBlock)(n.Fragment,null,(0,n.renderList)(e.npc.abilities,e=>((0,n.openBlock)(),(0,n.createElementBlock)('span',{key:e.name,class:'tag'},(0,n.toDisplayString)(e.name||e),1))),128))])])):(0,n.createCommentVNode)('v-if',!0)]),(0,n.createElementVNode)('div',Xl,[(0,n.createElementVNode)('div',Yl,[(0,n.createElementVNode)('div',null,[(0,n.createElementVNode)('span',{class:(0,n.normalizeClass)(['npc-name clickable',{'sr-active':e.npc.sr}]),onClick:(0,n.withModifiers)(c,['stop'])},(0,n.toDisplayString)(e.npc.name),3),s(e.npc.status)?((0,n.openBlock)(),(0,n.createElementBlock)('span',Ul,[(0,n.createTextVNode)(' ('+(0,n.toDisplayString)(s(e.npc.status))+') ',1),e.npc.custom&&Object.keys(e.npc.custom).length>0?((0,n.openBlock)(),(0,n.createElementBlock)('span',{key:0,class:'custom-info-icon clickable',title:'æŸ¥çœ‹è¯¦ç»†ä¿¡æ¯',onClick:(0,n.withModifiers)(i,['stop'])},(0,n.toDisplayString)((0,n.unref)(Me).customInfoIcon||'â„¹ï¸'),1)):(0,n.createCommentVNode)('v-if',!0)])):(0,n.createCommentVNode)('v-if',!0)]),e.npc.location?((0,n.openBlock)(),(0,n.createElementBlock)('span',Rl,'@ '+(0,n.toDisplayString)(e.npc.location),1)):(0,n.createCommentVNode)('v-if',!0)]),void 0!==e.npc.affection?((0,n.openBlock)(),(0,n.createElementBlock)('div',Wl,[(0,n.createElementVNode)('div',{class:'progress-bar affection-bar','data-negative':e.npc.affection<0},[(0,n.createElementVNode)('div',{class:'progress-bar-fill affection',style:(0,n.normalizeStyle)({width:m(e.npc.affection)})},null,4),(0,n.createElementVNode)('span',Ql,'å¥½æ„Ÿï¼š'+(0,n.toDisplayString)(e.npc.affection)+'/100',1)],8,Hl)])):(0,n.createCommentVNode)('v-if',!0),e.npc.hp||e.npc.mp||e.npc.sta||void 0!==e.npc.sd?((0,n.openBlock)(),(0,n.createElementBlock)('div',Zl,[e.npc.hp?((0,n.openBlock)(),(0,n.createElementBlock)('div',Jl,[(0,n.createElementVNode)('div',{class:'progress-bar-fill hp',style:(0,n.normalizeStyle)({width:r(e.npc.hp)})},null,4),(0,n.createElementVNode)('span',Gl,(0,n.toDisplayString)(e.npc.hp),1)])):(0,n.createCommentVNode)('v-if',!0),e.npc.mp?((0,n.openBlock)(),(0,n.createElementBlock)('div',Kl,[(0,n.createElementVNode)('div',{class:'progress-bar-fill mp',style:(0,n.normalizeStyle)({width:r(e.npc.mp)})},null,4),(0,n.createElementVNode)('span',eo,(0,n.toDisplayString)(e.npc.mp),1)])):(0,n.createCommentVNode)('v-if',!0),e.npc.sta?((0,n.openBlock)(),(0,n.createElementBlock)('div',to,[(0,n.createElementVNode)('div',{class:'progress-bar-fill sta',style:(0,n.normalizeStyle)({width:r(e.npc.sta)})},null,4),(0,n.createElementVNode)('span',no,(0,n.toDisplayString)(e.npc.sta),1)])):(0,n.createCommentVNode)('v-if',!0),void 0!==e.npc.sd?((0,n.openBlock)(),(0,n.createElementBlock)('div',ao,[(0,n.createElementVNode)('div',{class:'progress-bar-fill sd',style:(0,n.normalizeStyle)({width:Math.max(0,Math.min(100,e.npc.sd))+'%'})},null,4),(0,n.createElementVNode)('span',lo,'æ¬²æœ›: '+(0,n.toDisplayString)(e.npc.sd)+'/100 '+(0,n.toDisplayString)((p=e.npc.sd,p<=24?'â„ï¸':p<=49?'ğŸŒ™':p<=74?'ğŸ”¥':'â¤ï¸')),1)])):(0,n.createCommentVNode)('v-if',!0)])):(0,n.createCommentVNode)('v-if',!0),e.npc.effects.length?((0,n.openBlock)(),(0,n.createElementBlock)('div',oo,[(0,n.createElementVNode)('span',co,(0,n.toDisplayString)((0,n.unref)(We)('effects')),1),(0,n.createElementVNode)('div',io,[((0,n.openBlock)(!0),(0,n.createElementBlock)(n.Fragment,null,(0,n.renderList)(e.npc.effects,e=>((0,n.openBlock)(),(0,n.createElementBlock)('span',{key:e.name,class:'tag'},(0,n.toDisplayString)(e.name||e),1))),128))])])):(0,n.createCommentVNode)('v-if',!0)])],2);var p}}}),ro=so,mo=ro,uo={class:'npc-select-header'},po={class:'npc-select-content'},vo={class:'npc-list'},fo=['onClick'],yo={class:'npc-name'},ko={key:0,class:'npc-location'},go=(0,n.defineComponent)({__name:'NpcSelectMenu',props:{visible:{type:Boolean},position:{},availableNpcs:{},title:{default:'é€‰æ‹©å¯¹è±¡'}},emits:['select','close'],setup(e,{emit:t}){const a=t;function l(){a('close')}return(t,o)=>e.visible?((0,n.openBlock)(),(0,n.createElementBlock)('div',{key:0,class:'npc-select-overlay',onClick:l},[(0,n.createElementVNode)('div',{class:'npc-select-menu',style:(0,n.normalizeStyle)({left:e.position.x+'px',top:e.position.y+'px'}),onClick:o[0]||(o[0]=(0,n.withModifiers)(()=>{},['stop']))},[(0,n.createElementVNode)('div',uo,[(0,n.createElementVNode)('h4',null,(0,n.toDisplayString)(e.title),1)]),(0,n.createElementVNode)('div',po,[(0,n.createElementVNode)('div',vo,[((0,n.openBlock)(!0),(0,n.createElementBlock)(n.Fragment,null,(0,n.renderList)(e.availableNpcs,e=>((0,n.openBlock)(),(0,n.createElementBlock)('div',{key:e.name,class:'npc-option',onClick:t=>function(e){a('select',e),a('close')}(e)},[(0,n.createElementVNode)('span',yo,(0,n.toDisplayString)(e.name),1),e.location?((0,n.openBlock)(),(0,n.createElementBlock)('span',ko,' @ '+(0,n.toDisplayString)(e.location),1)):(0,n.createCommentVNode)('v-if',!0)],8,fo))),128))])])],4)])):(0,n.createCommentVNode)('v-if',!0)}}),Eo=(0,he.A)(go,[['__scopeId','data-v-6fef1136']]),bo=Eo,No={class:'map-title-bar'},ho={class:'title-section'},Vo={key:0,class:'current-location-compact'},Co={class:'current-location-name'},Bo={class:'current-location-coords'},So={key:0,class:'current-location-indoor'},wo={key:1,class:'current-location-container'},xo={key:2,class:'current-location-floor'},Do={class:'map-stats'},qo={class:'stats-item'},Mo={class:'stats-value'},To={class:'stats-item'},_o={class:'stats-value'},$o={class:'stats-item'},Io={class:'stats-value'},Fo={class:'stats-item'},Oo={class:'stats-value'},Ao={class:'view-tabs'},zo={class:'breadcrumb-nav'},Lo={class:'breadcrumb'},Po=['onClick'],jo={class:'breadcrumb-icon'},Xo={class:'breadcrumb-name'},Yo={class:'nav-actions'},Uo=['disabled'],Ro={class:'map-content'},Wo={key:0,class:'view-container'},Ho={class:'location-list-panel'},Qo={class:'panel-title'},Zo={class:'level-count'},Jo={key:0,class:'location-tree'},Go=['onClick'],Ko={class:'location-header'},ec={class:'location-icon'},tc={class:'location-name'},nc={class:'location-coords'},ac={class:'location-desc'},lc={key:0,class:'location-container'},oc={class:'container-name'},cc={key:0,class:'container-floor'},ic={key:1,class:'location-actions'},sc=['onClick'],rc={key:1,class:'empty-state'},mc={key:0,class:'location-detail-panel'},dc={class:'panel-title-container'},uc={key:0,class:'location-detail'},pc={class:'detail-header'},vc={class:'detail-icon'},fc={class:'detail-name'},yc={class:'detail-content'},kc={class:'detail-row'},gc={class:'detail-value'},Ec={class:'detail-row'},bc={class:'detail-value'},Nc={key:0,class:'detail-row'},hc={class:'detail-value'},Vc={key:0,class:'detail-floor'},Cc={class:'detail-row'},Bc={class:'detail-value'},Sc={key:1,class:'detail-row'},wc={class:'detail-value'},xc={key:2,class:'detail-row'},Dc={class:'detail-value'},qc={class:'detail-actions'},Mc={key:1,class:'no-selection'},Tc={key:1,class:'map-fullscreen-container'},_c={class:'map-visualization-fullscreen'},$c={class:'map-controls-top'},Ic={class:'control-group'},Fc={class:'scale-value'},Oc={class:'control-group'},Ac=['disabled'],zc={class:'independent-ruler-layout'},Lc={class:'vertical-ruler-independent'},Pc={class:'horizontal-ruler-independent'},jc=['min','max','step'],Xc={class:'map-canvas-independent'},Yc={class:'mobile-map-controls'},Uc=['disabled'],Rc={key:0,class:'precision-controls-modal'},Wc={class:'modal-content'},Hc={class:'coord-inputs'},Qc=['min','max','step'],Zc=['min','max','step'],Jc={class:'map-controls-bottom'},Gc={class:'control-section'},Kc={class:'coord-jump-controls'},ei={class:'coord-inputs'},ti=['min','max','step'],ni=['min','max','step'],ai={class:'control-section'},li={class:'layer-controls'},oi={class:'layer-checkbox'},ci={class:'layer-checkbox'},ii=(0,n.defineComponent)({__name:'MapView',setup(e){const t=(0,n.ref)([]),a=(0,n.ref)([]),l=(0,n.ref)(null),o=(0,n.ref)(null),c=(0,n.ref)('--'),i=(0,n.ref)([]),s=(0,n.ref)([]),r=(0,n.ref)('ä¸–ç•Œæ¦‚è§ˆ'),m=(0,n.ref)('list');const d=(0,n.ref)(1),u=(0,n.ref)(0),p=(0,n.ref)(0),v=(0,n.ref)(!1),f=(0,n.ref)(0),y=(0,n.ref)(0),k=(0,n.ref)(!1),g=(0,n.ref)(0),E=(0,n.ref)(!1),b=(0,n.ref)(!1),N=(0,n.ref)(!1),h=(0,n.ref)(null),V=(0,n.ref)(!1),C=()=>{V.value=window.innerWidth<=768},B=(0,n.ref)(!1),S=(0,n.ref)(null),w=(0,n.ref)([]),x=(0,n.ref)(0),D=(0,n.ref)(0),q=(0,n.ref)(0),M=(0,n.ref)(0),T=(0,n.ref)(50),I=(0,n.ref)([]),F=(0,n.computed)(()=>{const e=['country','city','village','district','street','building','mansion','castle','dungeon'];return t.value.filter(t=>e.includes(t.type||'city')).length}),O=(0,n.computed)(()=>t.value.length-F.value),A=(0,n.computed)(()=>{if(!o.value)return null;if(!B.value){if(['room','courtyard','hall','area','gate'].includes(o.value.type||'')&&o.value.container){const e=t.value.find(e=>e.name===o.value.container);if(e)return{...e,originalName:o.value.name,isContainerDisplay:!0}}}return o.value}),L=(0,n.computed)(()=>B.value?o.value&&s.value.some(e=>e.name===o.value.name):!!A.value);function P(e='city'){return{country:'ğŸš©',city:'ğŸ™ï¸',village:'ğŸ˜ï¸',district:'ğŸ˜ï¸',street:'ğŸ›£ï¸',apartment:'ğŸ¢',camp:'ğŸ•ï¸',mansion:'ğŸ°',castle:'ğŸ°',dungeon:'ğŸ•³ï¸',room:'ğŸ ',hall:'ğŸ›ï¸',courtyard:'ğŸï¸',gate:'ğŸšª',forest:'ğŸŒ²',mountain:'â›°ï¸',tavern:'ğŸ¨',shop:'ğŸª',temple:'â›©ï¸',house:'ğŸ ',cave:'ğŸ•³ï¸',river:'ğŸŒŠ',lake:'ğŸï¸',voidspace:'ğŸŒŒ',area:'ğŸ“'}[e]||'ğŸ“'}function j(e='city'){return{country:'å›½å®¶',city:'åŸå¸‚',village:'æ‘åº„',district:'åœ°åŒº',street:'è¡—é“',camp:'è¥åœ°',apartment:'å…¬å¯“',mansion:'è±ªå®…',castle:'åŸå ¡',dungeon:'åœ°ç‰¢',room:'æˆ¿é—´',hall:'æ®¿å…',courtyard:'åº­é™¢',gate:'å¤§é—¨',forest:'æ£®æ—',mountain:'å±±è„‰',tavern:'é…’é¦†',shop:'å•†åº—',temple:'å¯ºåº™',house:'æˆ¿å±‹',cave:'æ´ç©´',river:'æ²³æµ',lake:'æ¹–æ³Š',voidspace:'å¼‚ç©ºé—´',area:'åŒºåŸŸ'}[e]||'æœªçŸ¥'}function X(e){return t.value.filter(t=>t.container===e.name)}function Y(e){const t=X(e);if(t.length>0){const n=['room','courtyard','hall','area','gate'];t.every(e=>n.includes(e.type||''))?(w.value=[...i.value],B.value=!0,S.value=e.name,s.value=t,r.value=`${e.name} å®¤å†…åœ°å›¾`):(i.value.push({name:e.name,type:e.type}),s.value=t,r.value=`${e.name} çš„å­åœ°ç‚¹`),V.value?l.value=null:l.value=t.length>0?t[0]:null}}function U(e){l.value=e,(0,n.nextTick)(()=>{})}function R(e){if(0===e)i.value=[],s.value=t.value.filter(e=>!e.container),r.value='ä¸–ç•Œæ¦‚è§ˆ';else{const n=i.value[e-1];if(n){const a=t.value.find(e=>e.name===n.name);a&&(i.value=i.value.slice(0,e),s.value=X(a),r.value=`${a.name} çš„å­åœ°ç‚¹`)}}}function W(){if(B.value){if(B.value=!1,S.value=null,i.value=[...w.value],0===i.value.length)s.value=t.value.filter(e=>!e.container),r.value='ä¸–ç•Œæ¦‚è§ˆ';else{const e=i.value[i.value.length-1],n=t.value.find(t=>t.name===e.name);n&&(s.value=X(n),r.value=`${n.name} çš„å­åœ°ç‚¹`)}V.value?l.value=null:l.value=s.value[0]||null}else i.value.length>0&&(i.value.pop(),R(i.value.length),V.value?l.value=null:s.value.length>0&&(l.value=s.value[0]))}function H(){if(B.value)u.value=0,p.value=0,d.value=1;else{const e=A.value;if(e){const t=e.x,n=e.y,a=10*d.value;u.value=-t*a,p.value=n*a}else u.value=0,p.value=0;d.value=1}oe(),ye()}function Q(){if(o.value){if(B.value){const e=s.value.find(e=>e.name===o.value.name);if(e){const t=e.x,n=e.y,a=10*d.value;u.value=-t*a,p.value=n*a}else u.value=0,p.value=0}else{const e=A.value;if(e){const t=e.x,n=e.y,a=10*d.value;u.value=-t*a,p.value=n*a}}oe(),ye()}}function Z(){const e=t.value.filter(e=>ce(e));if(0===e.length)return;const n=e.map(e=>e.x),a=e.map(e=>e.y),l=(Math.min(...n)+Math.max(...n))/2,o=(Math.min(...a)+Math.max(...a))/2;u.value=-l*d.value*10+200,p.value=-o*d.value*10+150,oe(),ye()}function J(e){const t=h.value;if(!t)return;const n=t.getBoundingClientRect(),a=ae(e.clientX-n.left,e.clientY-n.top);a?U(a):(v.value=!0,f.value=e.clientX,y.value=e.clientY,t.style.cursor='grabbing')}function G(e){const t=h.value;if(!t)return;const n=t.getBoundingClientRect();if(ae(e.clientX-n.left,e.clientY-n.top)?t.style.cursor='pointer':v.value?t.style.cursor='grabbing':t.style.cursor='grab',!v.value)return;const a=e.clientX-f.value,l=e.clientY-y.value;u.value+=a,p.value+=l,f.value=e.clientX,y.value=e.clientY,oe(),ye()}function K(){v.value=!1;const e=h.value;e&&(e.style.cursor='grab')}function ee(e){e.preventDefault();const t=h.value;if(t)if(1===e.touches.length){k.value=!1,v.value=!0,f.value=e.touches[0].clientX,y.value=e.touches[0].clientY;const n=t.getBoundingClientRect(),a=ae(e.touches[0].clientX-n.left,e.touches[0].clientY-n.top);a?(U(a),v.value=!1):t.style.cursor='grabbing'}else 2===e.touches.length&&(v.value=!1,k.value=!0,g.value=Math.hypot(e.touches[0].clientX-e.touches[1].clientX,e.touches[0].clientY-e.touches[1].clientY))}function te(e){if(e.preventDefault(),v.value&&1===e.touches.length){const t=e.touches[0].clientX-f.value,n=e.touches[0].clientY-y.value;u.value+=t,p.value+=n,f.value=e.touches[0].clientX,y.value=e.touches[0].clientY,oe(),ye()}else if(k.value&&2===e.touches.length){const t=Math.hypot(e.touches[0].clientX-e.touches[1].clientX,e.touches[0].clientY-e.touches[1].clientY),n=t/g.value,a=h.value,l=a.getBoundingClientRect(),o=(e.touches[0].clientX+e.touches[1].clientX)/2-l.left,c=(e.touches[0].clientY+e.touches[1].clientY)/2-l.top,i=(o-a.width/2-u.value)/d.value,s=-(c-a.height/2-p.value)/d.value,r=Math.max(.1,Math.min(3,d.value*n));r!==d.value&&(u.value=o-a.width/2-i*r,p.value=c-a.height/2+s*r,d.value=r,oe(),ye()),g.value=t}}function ne(e){if(e.preventDefault(),e.touches.length<2&&(k.value=!1),e.touches.length<1){v.value=!1;const e=h.value;e&&(e.style.cursor='grab')}}function ae(e,n){const a=e-u.value-(h.value?.width||0)/2,l=n-p.value-(h.value?.height||0)/2,o=a/d.value,c=-l/d.value;for(const e of t.value)if(ce(e)){if(!!e.container){const t=10*e.x,n=10*e.y;if(Math.sqrt(Math.pow(t-o,2)+Math.pow(n-c,2))<=8)return e}}for(const e of t.value)if(ce(e)){if(!e.container&&d.value<.5){const t=10*e.x,n=10*e.y;if(Math.sqrt(Math.pow(t-o,2)+Math.pow(n-c,2))<=10)return e}}return null}function le(e){e.preventDefault();const t=h.value;if(!t)return;const n=t.getBoundingClientRect(),a=e.clientX-n.left,l=e.clientY-n.top,o=(a-t.width/2-u.value)/d.value,c=-(l-t.height/2-p.value)/d.value,i=e.deltaY>0?.9:1.1,s=Math.max(.1,Math.min(3,d.value*i));s!==d.value&&(u.value=a-t.width/2-o*s,p.value=l-t.height/2+c*s,d.value=s,oe(),ye())}function oe(){const e=h.value;if(!e)return;const n=e.getContext('2d');if(!n)return;I.value=[];const a=e.getBoundingClientRect();e.width=a.width,e.height=a.height;const l=n.createRadialGradient(e.width/2,e.height/2,0,e.width/2,e.height/2,Math.max(e.width,e.height)/2);l.addColorStop(0,'#1a1a2e'),l.addColorStop(.5,'#16213e'),l.addColorStop(1,'#0f0f23'),n.fillStyle=l,n.fillRect(0,0,e.width,e.height),function(e,t,n){e.fillStyle='rgba(255, 255, 255, 0.8)';for(let a=0;a<100;a++){const a=Math.random()*t,l=Math.random()*n,o=2*Math.random()+.5;e.beginPath(),e.arc(a,l,o,0,2*Math.PI),e.fill()}}(n,e.width,e.height),n.save(),n.translate(e.width/2+u.value,e.height/2+p.value),n.scale(d.value,d.value),b.value&&function(e){e.strokeStyle='rgba(100, 149, 237, 0.6)',e.lineWidth=2,e.shadowColor='rgba(100, 149, 237, 0.5)',e.shadowBlur=3;const n=10;t.value.forEach(a=>{if(a.container&&ce(a)){const l=t.value.find(e=>e.name===a.container);l&&ce(l)&&(e.beginPath(),e.moveTo(a.x*n,-a.y*n),e.lineTo(l.x*n,-l.y*n),e.stroke())}}),e.shadowBlur=0}(n);const o=A.value;if(t.value.filter(e=>ce(e)&&e.name!==o?.name).forEach(e=>{ie(n,e)}),o&&t.value.some(e=>e.name===o.name)){const e=t.value.find(e=>e.name===o.name);e&&ce(e)&&ie(n,e)}n.restore(),function(e,t,n){const a=100;e.strokeStyle='rgba(255, 255, 255, 0.1)',e.lineWidth=1;for(let l=0;l<t;l+=a)e.beginPath(),e.moveTo(l,0),e.lineTo(l,n),e.stroke();for(let l=0;l<n;l+=a)e.beginPath(),e.moveTo(0,l),e.lineTo(t,l),e.stroke()}(n,e.width,e.height),function(e,t,n){if(!N.value)return;e.save();const a=10;e.translate(t/2+u.value,n/2+p.value),e.scale(d.value*a,d.value*a),e.fillStyle='rgba(255, 255, 255, 0.7)',e.font='12px Arial',e.textAlign='center',e.restore();const l=t/2+u.value,o=n/2+p.value;e.strokeStyle='rgba(255, 255, 255, 0.3)',e.lineWidth=1,e.beginPath(),e.moveTo(l,0),e.lineTo(l,n),e.moveTo(0,o),e.lineTo(t,o),e.stroke(),function(e,t,n){const a=10,l=d.value*a,o=u.value,c=p.value;let i,s,r;B.value?(i=-50,s=50,r='å®¤å†…ç©ºé—´è¾¹ç•Œ'):(i=-1e3,s=1e3,r='æ¸¸æˆä¸–ç•Œè¾¹ç•Œ');const m=t/2+i*l+o,v=n/2+i*l+c,f=t/2+s*l+o,y=n/2+s*l+c,k=f>0&&m<t&&y>0&&v<n;k&&(e.strokeStyle='rgba(255, 165, 0, 0.8)',e.lineWidth=2,e.setLineDash([10,5]),e.strokeRect(m,v,f-m,y-v),e.fillStyle='rgba(255, 165, 0, 0.9)',e.font='bold 14px Arial',e.textAlign='center',e.fillText(r,m+120,v-10),e.setLineDash([]))}(e,t,n)}(n,e.width,e.height)}function ce(e){if(B.value)return e.container===S.value;return!['room','courtyard','hall','area','gate'].includes(e.type||'')}function ie(e,n){const a=10*n.x,o=10*-n.y,c=!n.container,i=A.value?.name===n.name,s=l.value?.name===n.name;if(c)d.value<.5&&(e.fillStyle='rgba(255, 255, 255, 0.6)',e.font='bold 360px Arial',e.textAlign='center',e.fillText(n.name,a,o),e.fillStyle='rgba(255, 255, 255, 0.9)',e.fillText(n.name,a,o));else{const l=['room','courtyard','hall','area','gate'].includes(n.type||'');i?(e.fillStyle='#ff6b6b',e.shadowColor='#ff6b6b',e.shadowBlur=10):l?(e.fillStyle='#51cf66',e.shadowColor='#51cf66',e.shadowBlur=8):(e.fillStyle='#74c0fc',e.shadowColor='#74c0fc',e.shadowBlur=8),e.beginPath(),e.arc(a,o,6,0,2*Math.PI),e.fill(),s&&(e.strokeStyle='#ffd43b',e.lineWidth=6,e.shadowColor='#ffd43b',e.shadowBlur=10,e.stroke(),e.shadowBlur=0),e.shadowBlur=0,e.fillStyle='#ffffff',e.font='bold 12px Arial',e.textAlign='center';const c=function(e,n,a,l){const o=6,c=12,i=[{x:e,y:n-o-c-l/2},{x:e,y:n+o+c+l/2},{x:e-o-c-a/2,y:n},{x:e+o+c+a/2,y:n},{x:e,y:n-o-2*c-l/2},{x:e,y:n+o+2*c+l/2},{x:e-o-2*c-a/2,y:n},{x:e+o+2*c+a/2,y:n}],s=t.value.filter(e=>ce(e));for(const e of i){const t={x:e.x-a/2,y:e.y-l/2,width:a,height:l},n=I.value.some(e=>!(t.x+t.width<e.x||e.x+e.width<t.x||t.y+t.height<e.y||e.y+e.height<t.y)),c=s.some(e=>{const n=10*e.x,a=10*-e.y,l=t.x+t.width/2,c=t.y+t.height/2,i=Math.abs(l-n),s=Math.abs(c-a);if(i>t.width/2+o||s>t.height/2+o)return!1;if(i<=t.width/2&&s<=t.height/2)return!0;return[{x:t.x,y:t.y},{x:t.x+t.width,y:t.y},{x:t.x,y:t.y+t.height},{x:t.x+t.width,y:t.y+t.height}].some(e=>Math.sqrt(Math.pow(e.x-n,2)+Math.pow(e.y-a,2))<o+4)});if(!n&&!c)return I.value.push(t),e}const r=n-o-c-l/2,m={x:e-a/2,y:r-l/2,width:a,height:l};return I.value.push(m),{x:e,y:r}}(a,o,e.measureText(n.name).width,12*1.2);e.fillText(n.name,c.x,c.y)}}function se(e){const t=[];return e.filter(e=>!e.container).forEach(n=>{const a={location:n,children:[],expanded:!0},l=e.filter(e=>e.container===n.name);a.children=re(l,e),t.push(a)}),t}function re(e,t){return e.map(e=>{const n={location:e,children:[],expanded:!0},a=t.filter(t=>t.container===e.name);return a.length>0&&(n.children=re(a,t)),n})}async function me(){try{console.log('ğŸ”„ åˆ·æ–°åœ°å›¾æ•°æ®');const e=await getWorldbook(function(){try{const e=window.SillyTavern?.characterId;return e&&window.SillyTavern?.characters?.[e]?`${window.SillyTavern.characters[e].name||'æœªçŸ¥è§’è‰²'}(æ¸¸æˆåœ°å›¾)`:'é»˜è®¤è§’è‰²(æ¸¸æˆåœ°å›¾)'}catch(e){return console.error('è·å–è§’è‰²å¡ä¿¡æ¯å¤±è´¥:',e),'é»˜è®¤è§’è‰²(æ¸¸æˆåœ°å›¾)'}}()),n=e.filter(e=>'åœ°å›¾çŸ¥è¯†æ±‡æ€»'!==e.name&&'å½“å‰ä½ç½®'!==e.name),l=e.find(e=>'å½“å‰ä½ç½®'===e.name);t.value=n.map(e=>({name:e.name,x:e.extra?.x||0,y:e.extra?.y||0,description:e.extra?.description||e.content.split('\n')[2]?.replace('æè¿°: ','')||'',type:e.extra?.type||'city',container:e.extra?.container,floor:e.extra?.floor,discovered_at:e.extra?.discovered_at||Date.now()})),o.value=l?{name:l.extra?.name||'',x:l.extra?.x||0,y:l.extra?.y||0,type:l.extra?.type||'village',container:l.extra?.container,floor:l.extra?.floor}:null,a.value=se(t.value),B.value=!1,S.value=null,w.value=[],s.value=t.value.filter(e=>!e.container),r.value='ä¸–ç•Œæ¦‚è§ˆ',c.value=(new Date).toLocaleTimeString('zh-CN'),console.log(`âœ… åœ°å›¾æ•°æ®å·²åˆ·æ–°ï¼Œå…±åŠ è½½ ${t.value.length} ä¸ªåœ°ç‚¹`)}catch(e){console.error('åˆ·æ–°åœ°å›¾å¤±è´¥:',e),toastr.error('è¯»å–åœ°å›¾æ•°æ®å¤±è´¥')}}function de(){confirm('ç¡®å®šè¦æ¸…ç©ºæ‰€æœ‰åœ°å›¾æ•°æ®å—ï¼Ÿæ­¤æ“ä½œä¸å¯æ¢å¤ï¼')&&(t.value=[],l.value=null,i.value=[],s.value=[],r.value='ä¸–ç•Œ',c.value='--',console.log('ğŸ—‘ï¸ åœ°å›¾æ•°æ®å·²æ¸…ç©º'))}function ue(){console.log('ğŸ“¥ å¯¼å…¥åœ°å›¾æ•°æ®')}function pe(){console.log('ğŸ“¤ å¯¼å‡ºåœ°å›¾æ•°æ®')}function ve(){const e=B.value?50:1e3,t=Math.max(-e,Math.min(e,x.value)),n=Math.max(-e,Math.min(e,D.value)),a=10*d.value;u.value=-t*a,p.value=n*a,oe(),ye()}function fe(){const e=10*d.value,t=B.value?50:1e3,n=Math.max(-t,Math.min(t,q.value)),a=Math.max(-t,Math.min(t,M.value));u.value=-n*e,p.value=a*e,oe()}function ye(){const e=10*d.value,t=-u.value/e,n=p.value/e,a=B.value?50:1e3;q.value=Math.max(-a,Math.min(a,t)),M.value=Math.max(-a,Math.min(a,n));const l=B.value?50:1e3,o=(l-n)/(2*l)*100;T.value=Math.max(0,Math.min(100,o))}function ke(e){e.preventDefault(),document.addEventListener('mousemove',ge),document.addEventListener('mouseup',Ee)}function ge(e){const t=document.querySelector('.vertical-slider-container');if(!t)return;const n=t.getBoundingClientRect(),a=Math.max(0,Math.min(n.height,e.clientY-n.top))/n.height*100;T.value=a;const l=B.value?50:1e3,o=(100-a)/100*(2*l)-l;M.value=Math.max(-l,Math.min(l,o)),fe()}function Ee(){document.removeEventListener('mousemove',ge),document.removeEventListener('mouseup',Ee)}function be(e){e.preventDefault(),document.addEventListener('touchmove',Ne,{passive:!1}),document.addEventListener('touchend',he)}function Ne(e){e.preventDefault();ge({clientY:e.touches[0].clientY})}function he(){document.removeEventListener('touchmove',Ne),document.removeEventListener('touchend',he)}function Ve(e){const t=e.currentTarget.getBoundingClientRect(),n=Math.max(0,Math.min(t.height,e.clientY-t.top))/t.height*100;T.value=n;const a=B.value?50:1e3,l=(100-n)/100*(2*a)-a;M.value=Math.max(-a,Math.min(a,l)),fe()}function Ce(){m.value='list'}function Be(e){at(`å‰å¾€${e.name}`)}let Se=null;return(0,n.onMounted)(async()=>{console.log('ğŸ—ºï¸ MapViewç»„ä»¶å·²åŠ è½½'),function(){try{const e=localStorage.getItem('fate_console_ui_state');if(e){const t=JSON.parse(e);'list'!==t.mapViewMode&&'map'!==t.mapViewMode||(m.value=t.mapViewMode)}}catch(e){console.warn('åŠ è½½è§†å›¾çŠ¶æ€å¤±è´¥:',e)}}(),await me(),(0,n.nextTick)(()=>{h.value&&(Se=new ResizeObserver(()=>{oe()}),Se.observe(h.value))}),C(),window.addEventListener('resize',C)}),(0,n.onUnmounted)(()=>{window.removeEventListener('resize',C),Se&&h.value&&Se.unobserve(h.value),Se?.disconnect()}),(0,n.watch)(m,e=>{!function(){try{const e=localStorage.getItem('fate_console_ui_state'),t=e?JSON.parse(e):{};t.mapViewMode=m.value,localStorage.setItem('fate_console_ui_state',JSON.stringify(t))}catch(e){console.warn('ä¿å­˜è§†å›¾çŠ¶æ€å¤±è´¥:',e)}}(),'map'===e&&(0,n.nextTick)(()=>{setTimeout(()=>{H()},50)})}),(0,n.watch)([d,b,N],()=>{'map'===m.value&&oe()}),(0,n.watch)(t,()=>{'map'===m.value&&oe()},{deep:!0}),(0,n.watch)(l,()=>{'map'===m.value&&oe()}),me(),(e,a)=>{return(0,n.openBlock)(),(0,n.createElementBlock)('div',{class:'map-view',style:(0,n.normalizeStyle)({'--primaryColor':(0,n.unref)(Me).primaryColor})},[(0,n.createCommentVNode)(' æ ‡é¢˜æ  '),(0,n.createElementVNode)('div',No,[(0,n.createElementVNode)('div',ho,[a[23]||(a[23]=(0,n.createElementVNode)('h2',{class:'map-title'},'ğŸ—ºï¸ æ¸¸æˆåœ°å›¾',-1)),(0,n.createCommentVNode)(' å½“å‰ä½ç½®æ˜¾ç¤º '),A.value?((0,n.openBlock)(),(0,n.createElementBlock)('div',Vo,[a[22]||(a[22]=(0,n.createElementVNode)('span',{class:'current-location-icon'},'ğŸ“',-1)),(0,n.createElementVNode)('span',Co,(0,n.toDisplayString)(A.value.name),1),(0,n.createElementVNode)('span',Bo,'('+(0,n.toDisplayString)(A.value.x)+', '+(0,n.toDisplayString)(A.value.y)+')',1),A.value.isContainerDisplay?((0,n.openBlock)(),(0,n.createElementBlock)('span',So,' ğŸ  '+(0,n.toDisplayString)(A.value.originalName),1)):(0,n.createCommentVNode)('v-if',!0),A.value.container&&!A.value.isContainerDisplay?((0,n.openBlock)(),(0,n.createElementBlock)('span',wo,' ğŸ¢ '+(0,n.toDisplayString)(A.value.container),1)):(0,n.createCommentVNode)('v-if',!0),A.value.floor?((0,n.openBlock)(),(0,n.createElementBlock)('span',xo,' ğŸ  '+(0,n.toDisplayString)(A.value.floor)+'å±‚ ',1)):(0,n.createCommentVNode)('v-if',!0)])):(0,n.createCommentVNode)('v-if',!0)]),(0,n.createCommentVNode)(' å·¥å…·æ æŒ‰é’® '),(0,n.createElementVNode)('div',{class:'map-toolbar'},[(0,n.createElementVNode)('button',{class:'map-btn refresh-btn',title:'åˆ·æ–°åœ°å›¾',onClick:me},' ğŸ”„ åˆ·æ–° '),(0,n.createElementVNode)('button',{class:'map-btn clear-btn',title:'æ¸…ç©ºåœ°å›¾',onClick:de},' ğŸ—‘ï¸ æ¸…ç©º '),(0,n.createElementVNode)('button',{class:'map-btn import-btn',title:'å¯¼å…¥åœ°å›¾',onClick:ue},' ğŸ“¥ å¯¼å…¥ '),(0,n.createElementVNode)('button',{class:'map-btn export-btn',title:'å¯¼å‡ºåœ°å›¾',onClick:pe},' ğŸ“¤ å¯¼å‡º ')])]),(0,n.createCommentVNode)(' ç»Ÿè®¡ä¿¡æ¯ '),(0,n.createElementVNode)('div',Do,[(0,n.createElementVNode)('div',qo,[a[24]||(a[24]=(0,n.createElementVNode)('span',{class:'stats-label'},'åœ°ç‚¹æ€»æ•°ï¼š',-1)),(0,n.createElementVNode)('span',Mo,(0,n.toDisplayString)(t.value.length),1)]),(0,n.createElementVNode)('div',To,[a[25]||(a[25]=(0,n.createElementVNode)('span',{class:'stats-label'},'å®¤å¤–åœ°ç‚¹ï¼š',-1)),(0,n.createElementVNode)('span',_o,(0,n.toDisplayString)(F.value),1)]),(0,n.createElementVNode)('div',$o,[a[26]||(a[26]=(0,n.createElementVNode)('span',{class:'stats-label'},'å®¤å†…åœ°ç‚¹ï¼š',-1)),(0,n.createElementVNode)('span',Io,(0,n.toDisplayString)(O.value),1)]),(0,n.createElementVNode)('div',Fo,[a[27]||(a[27]=(0,n.createElementVNode)('span',{class:'stats-label'},'æœ€åæ›´æ–°ï¼š',-1)),(0,n.createElementVNode)('span',Oo,(0,n.toDisplayString)(c.value),1)])]),(0,n.createCommentVNode)(' è§†å›¾åˆ‡æ¢ '),(0,n.createElementVNode)('div',Ao,[(0,n.createElementVNode)('button',{class:(0,n.normalizeClass)(['tab-btn',{active:'list'===m.value}]),onClick:a[0]||(a[0]=e=>m.value='list')},' ğŸ“‹ åˆ—è¡¨è§†å›¾ ',2),(0,n.createElementVNode)('button',{class:(0,n.normalizeClass)(['tab-btn',{active:'map'===m.value}]),onClick:a[1]||(a[1]=e=>m.value='map')},' ğŸ—ºï¸ åœ°å›¾è§†å›¾ ',2)]),(0,n.createCommentVNode)(' é¢åŒ…å±‘å¯¼èˆª '),(0,n.createElementVNode)('div',zo,[(0,n.createElementVNode)('div',Lo,[(0,n.createElementVNode)('span',{class:'breadcrumb-item home',onClick:a[2]||(a[2]=e=>R(0))},' ğŸŒ ä¸–ç•Œ '),((0,n.openBlock)(!0),(0,n.createElementBlock)(n.Fragment,null,(0,n.renderList)(i.value,(e,t)=>((0,n.openBlock)(),(0,n.createElementBlock)('span',{key:e.name+t,class:(0,n.normalizeClass)(['breadcrumb-item',{active:t===i.value.length-1}]),onClick:e=>R(t+1)},[a[28]||(a[28]=(0,n.createElementVNode)('span',{class:'breadcrumb-separator'},'>',-1)),(0,n.createElementVNode)('span',jo,(0,n.toDisplayString)(P(e.type)),1),(0,n.createElementVNode)('span',Xo,(0,n.toDisplayString)(e.name),1)],10,Po))),128))]),(0,n.createElementVNode)('div',Yo,[B.value?((0,n.openBlock)(),(0,n.createElementBlock)('button',{key:0,class:'nav-btn exit-indoor-btn',title:'é€€å‡ºå®¤å†…åœ°å›¾',onClick:W},' ğŸšª é€€å‡ºå®¤å†… ')):((0,n.openBlock)(),(0,n.createElementBlock)('button',{key:1,class:'nav-btn back-btn',disabled:0===i.value.length,title:'è¿”å›ä¸Šçº§',onClick:W},' â¬…ï¸ è¿”å› ',8,Uo))])]),(0,n.createCommentVNode)(' ä¸»è¦å†…å®¹åŒºåŸŸ '),(0,n.createElementVNode)('div',Ro,[(0,n.createCommentVNode)(' åˆ—è¡¨è§†å›¾ '),'list'===m.value?((0,n.openBlock)(),(0,n.createElementBlock)('div',Wo,[(0,n.createCommentVNode)(' å·¦ä¾§ï¼šå½“å‰å±‚çº§åœ°ç‚¹åˆ—è¡¨ '),(0,n.withDirectives)((0,n.createElementVNode)('div',Ho,[(0,n.createElementVNode)('h3',Qo,[(0,n.createTextVNode)(' ğŸ“ '+(0,n.toDisplayString)(r.value)+' ',1),(0,n.createElementVNode)('span',Zo,'('+(0,n.toDisplayString)(s.value.length)+')',1)]),s.value.length>0?((0,n.openBlock)(),(0,n.createElementBlock)('div',Jo,[((0,n.openBlock)(!0),(0,n.createElementBlock)(n.Fragment,null,(0,n.renderList)(s.value,e=>((0,n.openBlock)(),(0,n.createElementBlock)('div',{key:e.name,class:(0,n.normalizeClass)(['location-item',{selected:l.value?.name===e.name}]),onClick:t=>U(e)},[(0,n.createElementVNode)('div',Ko,[(0,n.createElementVNode)('span',ec,(0,n.toDisplayString)(P(e.type)),1),(0,n.createElementVNode)('span',tc,(0,n.toDisplayString)(e.name),1),(0,n.createElementVNode)('span',nc,'('+(0,n.toDisplayString)(e.x)+', '+(0,n.toDisplayString)(e.y)+')',1)]),(0,n.createElementVNode)('div',ac,(0,n.toDisplayString)(e.description),1),e.container&&!B.value?((0,n.openBlock)(),(0,n.createElementBlock)('div',lc,[a[29]||(a[29]=(0,n.createElementVNode)('span',{class:'container-label'},'ğŸ“',-1)),(0,n.createElementVNode)('span',oc,(0,n.toDisplayString)(e.container),1),e.floor?((0,n.openBlock)(),(0,n.createElementBlock)('span',cc,(0,n.toDisplayString)(e.floor)+'å±‚',1)):(0,n.createCommentVNode)('v-if',!0)])):(0,n.createCommentVNode)('v-if',!0),(0,n.createCommentVNode)(' åœ°ç‚¹å¡ç‰‡æ“ä½œæŒ‰é’® '),X(e).length>0?((0,n.openBlock)(),(0,n.createElementBlock)('div',ic,[(0,n.createElementVNode)('button',{class:'action-btn enter-btn-small',title:'è¿›å…¥æ­¤åœ°ç‚¹',onClick:(0,n.withModifiers)(t=>Y(e),['stop'])},' è¿›å…¥ ',8,sc)])):(0,n.createCommentVNode)('v-if',!0)],10,Go))),128))])):((0,n.openBlock)(),(0,n.createElementBlock)('div',rc,[...a[30]||(a[30]=[(0,n.createElementVNode)('div',{class:'empty-icon'},'ğŸ“­',-1),(0,n.createElementVNode)('div',{class:'empty-text'},'æ­¤å±‚çº§æš‚æ— åœ°ç‚¹',-1),(0,n.createElementVNode)('div',{class:'empty-hint'},'AIä¼šè‡ªåŠ¨æ·»åŠ æ–°å‘ç°çš„åœ°ç‚¹',-1)])]))],512),[[n.vShow,!V.value||!l.value]]),(0,n.createCommentVNode)(' å³ä¾§ï¼šåœ°ç‚¹è¯¦æƒ… '),!V.value||l.value?((0,n.openBlock)(),(0,n.createElementBlock)('div',mc,[(0,n.createElementVNode)('div',dc,[a[31]||(a[31]=(0,n.createElementVNode)('h3',{class:'panel-title'},'ğŸ“‹ åœ°ç‚¹è¯¦æƒ…',-1)),V.value?((0,n.openBlock)(),(0,n.createElementBlock)('button',{key:0,class:'back-to-list-btn',onClick:a[3]||(a[3]=e=>l.value=null)},' â¬…ï¸ è¿”å› ')):(0,n.createCommentVNode)('v-if',!0)]),l.value?((0,n.openBlock)(),(0,n.createElementBlock)('div',uc,[(0,n.createElementVNode)('div',pc,[(0,n.createElementVNode)('span',vc,(0,n.toDisplayString)(P(l.value.type)),1),(0,n.createElementVNode)('span',fc,(0,n.toDisplayString)(l.value.name),1)]),(0,n.createElementVNode)('div',yc,[(0,n.createElementVNode)('div',kc,[a[32]||(a[32]=(0,n.createElementVNode)('span',{class:'detail-label'},'åæ ‡ï¼š',-1)),(0,n.createElementVNode)('span',gc,'('+(0,n.toDisplayString)(l.value.x)+', '+(0,n.toDisplayString)(l.value.y)+')',1)]),(0,n.createElementVNode)('div',Ec,[a[33]||(a[33]=(0,n.createElementVNode)('span',{class:'detail-label'},'ç±»å‹ï¼š',-1)),(0,n.createElementVNode)('span',bc,(0,n.toDisplayString)(j(l.value.type)),1)]),l.value.container?((0,n.openBlock)(),(0,n.createElementBlock)('div',Nc,[a[34]||(a[34]=(0,n.createElementVNode)('span',{class:'detail-label'},'ä»å±ï¼š',-1)),(0,n.createElementVNode)('span',hc,[(0,n.createTextVNode)((0,n.toDisplayString)(l.value.container)+' ',1),l.value.floor?((0,n.openBlock)(),(0,n.createElementBlock)('span',Vc,(0,n.toDisplayString)(l.value.floor)+'å±‚',1)):(0,n.createCommentVNode)('v-if',!0)])])):(0,n.createCommentVNode)('v-if',!0),(0,n.createElementVNode)('div',Cc,[a[35]||(a[35]=(0,n.createElementVNode)('span',{class:'detail-label'},'æè¿°ï¼š',-1)),(0,n.createElementVNode)('span',Bc,(0,n.toDisplayString)(l.value.description),1)]),l.value.discovered_at?((0,n.openBlock)(),(0,n.createElementBlock)('div',Sc,[a[36]||(a[36]=(0,n.createElementVNode)('span',{class:'detail-label'},'å‘ç°æ—¶é—´ï¼š',-1)),(0,n.createElementVNode)('span',wc,(0,n.toDisplayString)((o=l.value.discovered_at,new Date(o).toLocaleString('zh-CN'))),1)])):(0,n.createCommentVNode)('v-if',!0),X(l.value).length>0?((0,n.openBlock)(),(0,n.createElementBlock)('div',xc,[a[37]||(a[37]=(0,n.createElementVNode)('span',{class:'detail-label'},'å­åœ°ç‚¹ï¼š',-1)),(0,n.createElementVNode)('span',Dc,(0,n.toDisplayString)(X(l.value).length)+' ä¸ª',1)])):(0,n.createCommentVNode)('v-if',!0)]),(0,n.createElementVNode)('div',qc,[l.value&&X(l.value).length>0&&!i.value.some(e=>e.name===l.value?.name)?((0,n.openBlock)(),(0,n.createElementBlock)('button',{key:0,class:'action-btn enter-btn',onClick:a[4]||(a[4]=e=>Y(l.value))},' ğŸšª è¿›å…¥æ­¤åœ°ç‚¹ ')):(0,n.createCommentVNode)('v-if',!0),l.value?((0,n.openBlock)(),(0,n.createElementBlock)('button',{key:1,class:'action-btn travel-btn',onClick:a[5]||(a[5]=e=>Be(l.value))},' ğŸ§­ å‰å¾€æ­¤åœ°ç‚¹ ')):(0,n.createCommentVNode)('v-if',!0)])])):((0,n.openBlock)(),(0,n.createElementBlock)('div',Mc,[...a[38]||(a[38]=[(0,n.createElementVNode)('div',{class:'no-selection-icon'},'ğŸ‘†',-1),(0,n.createElementVNode)('div',{class:'no-selection-text'},'è¯·ä»å·¦ä¾§é€‰æ‹©ä¸€ä¸ªåœ°ç‚¹æŸ¥çœ‹è¯¦æƒ…',-1)])]))])):(0,n.createCommentVNode)('v-if',!0)])):(0,n.createCommentVNode)('v-if',!0),(0,n.createCommentVNode)(' åœ°å›¾è§†å›¾ '),'map'===m.value?((0,n.openBlock)(),(0,n.createElementBlock)('div',Tc,[(0,n.createElementVNode)('div',_c,[(0,n.createElementVNode)('div',$c,[(0,n.createElementVNode)('div',Ic,[a[39]||(a[39]=(0,n.createElementVNode)('label',{class:'control-label'},'ç¼©æ”¾ï¼š',-1)),(0,n.withDirectives)((0,n.createElementVNode)('input',{'onUpdate:modelValue':a[6]||(a[6]=e=>d.value=e),type:'range',min:'0.1',max:'3',step:'0.1',class:'scale-slider'},null,512),[[n.vModelText,d.value,void 0,{number:!0}]]),(0,n.createElementVNode)('span',Fc,(0,n.toDisplayString)(d.value)+'x',1)]),(0,n.createElementVNode)('div',Oc,[(0,n.createElementVNode)('button',{class:'control-btn',onClick:H},'ğŸ“ å±…ä¸­'),(0,n.createElementVNode)('button',{class:'control-btn',disabled:!L.value,onClick:Q},'ğŸ  å½“å‰ä½ç½®',8,Ac),(0,n.createElementVNode)('button',{class:'control-btn',onClick:Z},'ğŸ” é€‚åº”è§†å›¾'),(0,n.createCommentVNode)(' è¿›å…¥/é€€å‡ºå®¤å†…åœ°å›¾æŒ‰é’® '),l.value&&X(l.value).some(e=>['room','courtyard','gate'].includes(e.type||''))?((0,n.openBlock)(),(0,n.createElementBlock)('button',{key:0,class:'control-btn enter-btn',onClick:a[7]||(a[7]=e=>Y(l.value))},' ğŸšª è¿›å…¥ ')):(0,n.createCommentVNode)('v-if',!0),l.value?((0,n.openBlock)(),(0,n.createElementBlock)('button',{key:1,class:'control-btn travel-btn',onClick:a[8]||(a[8]=e=>Be(l.value))},' ğŸ§­ å‰å¾€ ')):(0,n.createCommentVNode)('v-if',!0),B.value?((0,n.openBlock)(),(0,n.createElementBlock)('button',{key:2,class:'control-btn exit-indoor-btn',onClick:W},' ğŸš¶ é€€å‡ºå®¤å†… ')):(0,n.createCommentVNode)('v-if',!0),(0,n.createElementVNode)('button',{class:'control-btn exit-btn',onClick:Ce},'âŒ é€€å‡ºå…¨å±')])]),(0,n.createCommentVNode)(' ç‹¬ç«‹åæ ‡å°ºå¸ƒå±€ '),(0,n.createElementVNode)('div',zc,[(0,n.createCommentVNode)(' å‚ç›´åæ ‡å°ºï¼ˆå·¦ä¾§ç‹¬ç«‹ï¼‰ '),(0,n.createElementVNode)('div',Lc,[(0,n.createElementVNode)('div',{class:'vertical-slider-container',onClick:Ve},[(0,n.createElementVNode)('div',{class:'vertical-slider-thumb',style:(0,n.normalizeStyle)({top:T.value+'%',transform:'translateY(-50%)'}),onMousedown:(0,n.withModifiers)(ke,['stop']),onTouchstart:(0,n.withModifiers)(be,['stop'])},null,36)])]),(0,n.createCommentVNode)(' å‚ç›´å°ºæ ‡ç­¾ï¼ˆç‹¬ç«‹å®šä½ï¼‰ '),a[42]||(a[42]=(0,n.createElementVNode)('div',{class:'vertical-ruler-labels'},[(0,n.createElementVNode)('span',{class:'ruler-label'},'N'),(0,n.createElementVNode)('span',{class:'ruler-label'},'0'),(0,n.createElementVNode)('span',{class:'ruler-label'},'S')],-1)),(0,n.createCommentVNode)(' æ°´å¹³åæ ‡å°º '),(0,n.createElementVNode)('div',Pc,[(0,n.withDirectives)((0,n.createElementVNode)('input',{'onUpdate:modelValue':a[9]||(a[9]=e=>q.value=e),type:'range',min:B.value?-50:-1e3,max:B.value?50:1e3,step:B.value?1:10,class:'ruler-slider horizontal',onInput:fe},null,40,jc),[[n.vModelText,q.value]]),a[40]||(a[40]=(0,n.createStaticVNode)('<div class="ruler-labels" data-v-1c7379ce><span class="ruler-label" data-v-1c7379ce>-1000</span><span class="ruler-label" data-v-1c7379ce>-500</span><span class="ruler-label" data-v-1c7379ce>0</span><span class="ruler-label" data-v-1c7379ce>500</span><span class="ruler-label" data-v-1c7379ce>1000</span></div>',1))]),(0,n.createCommentVNode)(' åœ°å›¾Canvas '),(0,n.createElementVNode)('div',Xc,[(0,n.createElementVNode)('canvas',{ref_key:'mapCanvas',ref:h,class:'map-canvas',onMousedown:J,onMousemove:G,onMouseup:K,onWheel:le,onMouseleave:K,onTouchstart:(0,n.withModifiers)(ee,['prevent']),onTouchmove:(0,n.withModifiers)(te,['prevent']),onTouchend:(0,n.withModifiers)(ne,['prevent'])},null,544),a[41]||(a[41]=(0,n.createStaticVNode)('<div class="map-legend" data-v-1c7379ce><div class="legend-item" data-v-1c7379ce><span class="legend-color" style="background:#007bff;" data-v-1c7379ce></span><span class="legend-text" data-v-1c7379ce>å®¤å¤–åœ°ç‚¹</span></div><div class="legend-item" data-v-1c7379ce><span class="legend-color" style="background:#28a745;" data-v-1c7379ce></span><span class="legend-text" data-v-1c7379ce>å®¤å†…åœ°ç‚¹</span></div><div class="legend-item" data-v-1c7379ce><span class="legend-color" style="background:#dc3545;" data-v-1c7379ce></span><span class="legend-text" data-v-1c7379ce>å½“å‰ä½ç½®</span></div></div>',1))])]),(0,n.createElementVNode)('div',Yc,[(0,n.createElementVNode)('button',{class:'map-btn-icon',title:'å±…ä¸­',onClick:H},' ğŸ“ '),(0,n.createElementVNode)('button',{class:'map-btn-icon',title:'å½“å‰ä½ç½®',disabled:!L.value,onClick:Q},' ğŸ  ',8,Uc),(0,n.createElementVNode)('button',{class:'map-btn-icon',title:'é€‚åº”è§†å›¾',onClick:Z},' ğŸ” '),l.value&&X(l.value).some(e=>['room','courtyard','gate'].includes(e.type||''))?((0,n.openBlock)(),(0,n.createElementBlock)('button',{key:0,class:'map-btn-icon',title:'è¿›å…¥å®¤å†…',onClick:a[10]||(a[10]=e=>Y(l.value))},' ğŸšª ')):(0,n.createCommentVNode)('v-if',!0),B.value?((0,n.openBlock)(),(0,n.createElementBlock)('button',{key:1,class:'map-btn-icon',title:'é€€å‡ºå®¤å†…',onClick:W},' ğŸš¶ ')):(0,n.createCommentVNode)('v-if',!0),(0,n.createElementVNode)('button',{class:'map-btn-icon',title:'ç²¾ç¡®å¯¼èˆª',onClick:a[11]||(a[11]=e=>E.value=!0)},' ğŸ¯ '),l.value?((0,n.openBlock)(),(0,n.createElementBlock)('button',{key:2,class:'map-btn-icon',title:'å‰å¾€æ­¤åœ°ç‚¹',onClick:a[12]||(a[12]=e=>Be(l.value))},' ğŸ§­ ')):(0,n.createCommentVNode)('v-if',!0),(0,n.createElementVNode)('button',{class:'map-btn-icon',title:'é€€å‡ºå…¨å±',onClick:Ce},' âŒ ')]),(0,n.createCommentVNode)(' ç²¾ç¡®å¯¼èˆªæ¨¡æ€æ¡† '),E.value?((0,n.openBlock)(),(0,n.createElementBlock)('div',Rc,[(0,n.createElementVNode)('div',{class:'modal-backdrop',onClick:a[13]||(a[13]=e=>E.value=!1)}),(0,n.createElementVNode)('div',Wc,[a[43]||(a[43]=(0,n.createElementVNode)('h4',{class:'modal-title'},'ç²¾ç¡®å¯¼èˆª',-1)),(0,n.createElementVNode)('div',Hc,[(0,n.withDirectives)((0,n.createElementVNode)('input',{'onUpdate:modelValue':a[14]||(a[14]=e=>x.value=e),type:'number',placeholder:'Xåæ ‡',min:B.value?-50:-1e3,max:B.value?50:1e3,step:B.value?1:10,class:'coord-input'},null,8,Qc),[[n.vModelText,x.value,void 0,{number:!0}]]),(0,n.withDirectives)((0,n.createElementVNode)('input',{'onUpdate:modelValue':a[15]||(a[15]=e=>D.value=e),type:'number',placeholder:'Yåæ ‡',min:B.value?-50:-1e3,max:B.value?50:1e3,step:B.value?1:10,class:'coord-input'},null,8,Zc),[[n.vModelText,D.value,void 0,{number:!0}]])]),(0,n.createElementVNode)('button',{class:'control-btn jump-btn',onClick:a[16]||(a[16]=e=>{ve(),E.value=!1})},' è·³è½¬ '),(0,n.createElementVNode)('button',{class:'control-btn close-btn',onClick:a[17]||(a[17]=e=>E.value=!1)},' å…³é—­ ')])])):(0,n.createCommentVNode)('v-if',!0),(0,n.createElementVNode)('div',Jc,[(0,n.createElementVNode)('div',Gc,[a[44]||(a[44]=(0,n.createElementVNode)('h4',{class:'section-title'},'åæ ‡è·³è½¬',-1)),(0,n.createElementVNode)('div',Kc,[(0,n.createElementVNode)('div',ei,[(0,n.withDirectives)((0,n.createElementVNode)('input',{'onUpdate:modelValue':a[18]||(a[18]=e=>x.value=e),type:'number',placeholder:'Xåæ ‡',min:B.value?-50:-1e3,max:B.value?50:1e3,step:B.value?1:10,class:'coord-input'},null,8,ti),[[n.vModelText,x.value,void 0,{number:!0}]]),(0,n.withDirectives)((0,n.createElementVNode)('input',{'onUpdate:modelValue':a[19]||(a[19]=e=>D.value=e),type:'number',placeholder:'Yåæ ‡',min:B.value?-50:-1e3,max:B.value?50:1e3,step:B.value?1:10,class:'coord-input'},null,8,ni),[[n.vModelText,D.value,void 0,{number:!0}]])]),(0,n.createElementVNode)('button',{class:'control-btn jump-btn',onClick:ve},'è·³è½¬')])]),(0,n.createElementVNode)('div',ai,[a[49]||(a[49]=(0,n.createElementVNode)('h4',{class:'section-title'},'å›¾å±‚æ§åˆ¶',-1)),(0,n.createElementVNode)('div',li,[(0,n.createElementVNode)('label',oi,[(0,n.withDirectives)((0,n.createElementVNode)('input',{'onUpdate:modelValue':a[20]||(a[20]=e=>b.value=e),type:'checkbox'},null,512),[[n.vModelCheckbox,b.value]]),a[45]||(a[45]=(0,n.createElementVNode)('span',{class:'checkmark'},null,-1)),a[46]||(a[46]=(0,n.createTextVNode)(' è¿æ¥çº¿ ',-1))]),(0,n.createElementVNode)('label',ci,[(0,n.withDirectives)((0,n.createElementVNode)('input',{'onUpdate:modelValue':a[21]||(a[21]=e=>N.value=e),type:'checkbox'},null,512),[[n.vModelCheckbox,N.value]]),a[47]||(a[47]=(0,n.createElementVNode)('span',{class:'checkmark'},null,-1)),a[48]||(a[48]=(0,n.createTextVNode)(' åæ ‡è½´ ',-1))])])])])])])):(0,n.createCommentVNode)('v-if',!0)])],4);var o}}}),si=(0,he.A)(ii,[['__scopeId','data-v-1c7379ce']]),ri=['data-effects-enabled','data-direct-send-enabled'],mi={class:'console-controls'},di={class:'theme-switcher'},ui=['data-theme','title','onClick'],pi=['title'],vi={class:'icon-direct-send-on'},fi={class:'icon-direct-send-off'},yi=['title'],ki={class:'icon-effects-on'},gi={class:'icon-effects-off'},Ei=['title'],bi={class:'icon-fixed'},Ni={class:'icon-diffusion'},hi=['title'],Vi={class:'icon-collapse'},Ci={class:'icon-expand'},Bi={class:'collapsed-view'},Si={key:0,class:'collapsed-block'},wi={class:'collapsed-title'},xi={class:'name-status'},Di={class:'mb-2 text-lg font-bold'},qi={class:'info-line'},Mi={class:'info-label'},Ti={class:'info-value'},_i={class:'progress-bar-group'},$i={key:0,class:'progress-bar'},Ii={class:'progress-bar-text'},Fi={key:1,class:'progress-bar'},Oi={class:'progress-bar-text'},Ai={key:2,class:'progress-bar'},zi={class:'progress-bar-text'},Li={key:0,class:'info-line'},Pi={class:'info-value'},ji={key:1,class:'info-line'},Xi={class:'info-label'},Yi={class:'info-value'},Ui={key:2,class:'info-line'},Ri={class:'info-label'},Wi={class:'tags-container'},Hi={key:1,class:'collapsed-block'},Qi={class:'collapsed-title'},Zi={key:0,class:'info-line'},Ji={class:'info-label'},Gi={class:'info-value'},Ki={key:1,class:'info-line'},es={class:'info-label'},ts={class:'info-value'},ns={key:2,class:'info-line'},as={class:'info-label'},ls={class:'info-value'},os={key:3,class:'info-line'},cs={class:'info-label'},is={class:'info-value'},ss={class:'expanded-view'},rs={class:'tab-nav'},ms={class:'tab-panel-grid'},ds={key:0,class:'grid-column'},us={class:'section-box'},ps={class:'section-title'},vs={class:'progress-bar-group'},fs={key:0,class:'progress-bar'},ys={class:'progress-bar-text'},ks={key:1,class:'progress-bar'},gs={class:'progress-bar-text'},Es={key:2,class:'progress-bar'},bs={class:'progress-bar-text'},Ns={key:0,class:'info-line'},hs={class:'info-value'},Vs={class:'info-line'},Cs={class:'info-label'},Bs={class:'info-value'},Ss={class:'info-line'},ws={class:'info-label'},xs={class:'info-value'},Ds={key:1,class:'info-line'},qs={class:'info-label'},Ms={class:'tags-container'},Ts=['onClick'],_s={key:2,class:'info-line'},$s={class:'info-label'},Is={class:'tags-container'},Fs={key:3,class:'info-line'},Os={class:'info-label'},As={class:'tags-container'},zs=['onClick'],Ls={key:0,class:'section-box'},Ps={class:'section-title'},js={key:0,class:'info-line'},Xs={class:'info-label'},Ys={class:'info-value'},Us={key:1,class:'info-line'},Rs={class:'equipped-items'},Ws={key:0,class:'equipment-line'},Hs={class:'equipment-list'},Qs=['onClick'],Zs={key:1,class:'equipment-line'},Js={class:'equipment-list'},Gs=['onClick'],Ks={key:2,class:'equipment-line'},er={class:'equipment-list'},tr=['onClick'],nr={key:2,class:'info-line'},ar={class:'info-label'},lr={class:'equipped-items'},or={key:0,class:'equipment-line'},cr={class:'equipment-list'},ir={key:1,class:'equipment-line'},sr={class:'equipment-list'},rr={key:2,class:'equipment-line'},mr={class:'equipment-list'},dr={key:3,class:'equipment-line'},ur={class:'equipment-list'},pr={key:3,class:'info-line'},vr={class:'info-label'},fr={class:'tags-container'},yr=['onClick'],kr={key:1,class:'grid-column'},gr={class:'section-box'},Er={class:'section-title'},br={key:0,class:'info-line'},Nr={class:'info-label'},hr={class:'info-value'},Vr={key:1,class:'info-line'},Cr={class:'info-label'},Br={class:'info-value'},Sr={key:2,class:'info-line'},wr={class:'info-label'},xr={class:'info-value'},Dr={key:3,class:'info-line'},qr={class:'info-label'},Mr={class:'info-value'},Tr={key:0,class:'section-box'},_r={class:'section-title'},$r={class:'quest-list'},Ir={class:'info-label'},Fr={class:'info-value'},Or=['onClick'],Ar={key:0,class:'quest-countdown'},zr={key:1,class:'quest-countdown'},Lr={key:1,class:'section-box'},Pr={class:'section-title'},jr=['onClick'],Xr={class:'info-value'},Yr={key:0,class:'faction-extra'},Ur={key:0},Rr={key:1},Wr={key:2},Hr={class:'tab-panel-grid'},Qr={class:'grid-column'},Zr={class:'section-box'},Jr={class:'options-title-container'},Gr={class:'section-title options-title'},Kr={class:'options-grid'},em=['onClick'],tm={class:'option-content'},nm={class:'option-text'},am={key:0,class:'option-type-attached'},lm={key:0,class:'options-placeholder'},om={class:'tab-panel-grid'},cm={class:'grid-column'},im={class:'section-box'},sm={class:'section-title'},rm={class:'tab-panel-grid'},mm={class:'grid-column'},dm={class:'section-box'},um={class:'section-title'},pm={class:'character-annals-grid'},vm={key:0,class:'grid-column'},fm={class:'section-box bonded-section'},ym={class:'section-title'},km={class:'npc-grid'},gm={key:1,class:'grid-column'},Em={class:'section-box'},bm={class:'section-title'},Nm={class:'npc-grid'},hm={class:'log-container'},Vm={class:'log-title'},Cm={class:'log-box'},Bm={key:0,class:'log-entry log-placeholder'},Sm=(0,n.defineComponent)({__name:'app',setup(e){const t=(0,n.ref)(0),a=(0,n.computed)(()=>(t.value,Ua())),l=(0,n.ref)('fate-scroll'),o=['gufeng','xianxia','minsu','wuxia','xuanhuan','nihon','jrpg'],c=(0,n.ref)({visible:!1,type:'ability',title:'',position:{x:0,y:0},target:null,equipmentType:'',isEquipped:!1,maxQuantity:99}),i=(0,n.ref)({visible:!1,position:{x:0,y:0},itemName:'',quantity:1,actionType:'give',title:'é€‰æ‹©å¯¹è±¡'}),s=(0,n.ref)(!1),r=(0,n.ref)(!1),m=(0,n.ref)(null),d=(0,n.ref)('basic'),u=(0,n.computed)(()=>({'console-wrapper':!0,[`theme-${Te.value}`]:!0,collapsed:_e.value,'fixed-layout':'fixed'===$e.value})),p=(0,n.computed)(()=>_e.value?Re('COLLAPSE_TEXT'):Re('EXPAND_TEXT')),v=(0,n.computed)(()=>_e.value?Re('COLLAPSE_ICON'):Re('EXPAND_ICON')),f=(0,n.computed)(()=>'fixed'===$e.value?Re('LAYOUT_FIXED_TEXT'):Re('LAYOUT_DIFFUSION_TEXT')),y=(0,n.computed)(()=>'fixed'===$e.value?Re('LAYOUT_FIXED_ICON'):Re('LAYOUT_DIFFUSION_ICON')),k=(0,n.computed)(()=>Ie.value?Re('EFFECTS_ON_TEXT'):Re('EFFECTS_OFF_TEXT')),g=(0,n.computed)(()=>Fe.value?Re('DIRECT_SEND_ON_TEXT'):Re('DIRECT_SEND_OFF_TEXT')),E=(0,n.computed)(()=>Fe.value?Re('DIRECT_SEND_ON_ICON'):Re('DIRECT_SEND_OFF_ICON')),b=(0,n.computed)(()=>Re('EFFECTS_ON_ICON')),N=(0,n.computed)(()=>Re('EFFECTS_OFF_ICON')),h=(0,n.computed)(()=>a.value?.log?a.value.log.split(/\r?\n/).filter(e=>''!==e.trim()).map(e=>e.trim()).reverse():[]);function V(e){return{gufeng:'å¤é£',xianxia:'ä»™ä¾ ',minsu:'æ°‘ä¿—',wuxia:'æ­¦ä¾ ',xuanhuan:'ç„å¹»',nihon:'æ—¥å¼',jrpg:'JRPG'}[e]||e}function C(e,t){const n=c.value.target;if('ability'===c.value.type)'use'===e?function(e){const t='string'==typeof e?e:e.name;lt('Using ability',t),at(`ä½¿ç”¨ï¼š${t}`)}(n.name||n):'study'===e&&function(e){const t='string'==typeof e?e:e.name;lt('Studying ability',t),at(`ç ”ä¹ ï¼š${t}`)}(n.name||n);else if('item'===c.value.type)'use'===e&&t?function(e,t){const n='string'==typeof e?e:e.name||e;lt(`Using ${t} of item`,n),at(`ä½¿ç”¨ï¼š${n} x${t}`)}(n,t):'give'===e&&t?function(e,t){const n='string'==typeof e?e:e.name||e;lt(`Giving ${t} of item`,n),i.value={visible:!0,position:{x:300,y:200},itemName:n,quantity:t,actionType:'give',title:'é€‰æ‹©ç»™äºˆå¯¹è±¡'}}(n,t):'discard'===e&&t&&function(e,t){const n='string'==typeof e?e:e.name||e;lt(`Discarding ${t} of item`,n),at(`ä¸¢å¼ƒï¼š${n} x${t}`)}(n,t);else if('quest'===c.value.type)'start'===e?function(e){const t='string'==typeof e?F(e):e.name||e;lt('Starting quest',t),at(`å¼€å§‹ä»»åŠ¡ï¼š${t}`)}(n):'abandon'===e&&function(e){const t='string'==typeof e?F(e):e.name||e;lt('Abandoning quest',t),at(`æ”¾å¼ƒä»»åŠ¡ï¼š${t}`)}(n);else if('equipment'===c.value.type)'equip'===e?function(e){const t='string'==typeof e?e:e.name||e;lt('Equipping item',t),at(`è£…ä¸Š${t}`)}(n):'unequip'===e?function(e){const t='string'==typeof e?e:e.name||e;lt('Unequipping item',t),at(`å¸ä¸‹${t}`)}(n):'give'===e?ee(n):'discard'===e&&function(e){const t='string'==typeof e?e:e.name||e;lt('Discarding equipped item',t),at(`ä¸¢å¼ƒ${t}`)}(n);else if('rest'===c.value.type)'nap'===e?(lt('Taking a nap',''),at('å°æ†©ä¸€ä¼šå„¿ï¼Œæš‚æ—¶ä¸æƒ³å…¶ä»–çš„äº‹æƒ…ã€‚')):'sleep'===e?(lt('Going to sleep',''),at('ç›´æ¥å°±å¯ï¼Œæ—¶é—´æ¥åˆ°ç¬¬äºŒå¤©ã€‚')):'invite'===e&&(lt('Inviting to sleep',''),i.value={visible:!0,position:{x:300,y:200},itemName:'é‚€è¯·å…±å¯',quantity:1,actionType:'invite',title:'é€‰æ‹©é‚€è¯·å¯¹è±¡'});else if('custom'===c.value.type);else if('faction'===c.value.type)'visit'===e&&(console.log('handleActionSelect faction target:',n),function(e){console.log('visitFaction called with:',e);const t=e?.name||'æœªçŸ¥åŠ¿åŠ›',n=e?.location;lt('Visiting faction',t),at(n?`å‰å¾€${n}çš„${t}è¿›è¡Œæ‹œè®¿`:`æ‹œè®¿${t}`)}(n));else if('equipment-list'===c.value.type)if(e.startsWith('view-equipment:')){K(e.replace('view-equipment:',''),'weapon',{clientX:300,clientY:200})}else if(e.startsWith('equip:')||e.startsWith('give:')||e.startsWith('discard:')){const[t,n]=e.split(':');!function(e,t){switch(lt(`Batch ${e} equipment`,t),e){case'equip':at(`è£…ä¸Š${t}`);break;case'give':ee(t.split('ã€')[0]);break;case'discard':at(`ä¸¢å¼ƒ${t}`)}}(t,n)}}function B(){c.value.visible=!1}function S(){const e=[];return a.value?.bondedNpcs&&a.value.bondedNpcs.forEach(t=>{e.push({name:t.name,location:t.location})}),a.value?.nearbyNpcs&&a.value.nearbyNpcs.forEach(t=>{e.push({name:t.name,location:t.location})}),e}function w(e){const t=i.value.itemName,n=i.value.quantity,a=i.value.actionType;let l='';if('give'===a){const a=n>1?` x${n}`:'';l=`ç»™äºˆ${e.name}ï¼š${t}${a}`}else'invite'===a&&(l=`é‚€è¯·${e.name}å…±å¯ï¼Œå¹¶ä¸æ‰“ç®—è½»æ˜“ç¡å»ã€‚`);lt('NPC interaction',l),at(l),x()}function x(){i.value.visible=!1}function D(){s.value=!0}function q(){s.value=!1}function M(e,t='basic'){m.value=e,d.value=t,r.value=!0}function T(e,t){lt('Showing NPC custom info',e.name),c.value={visible:!0,type:'custom',title:`${e.name}çš„è¯¦ç»†ä¿¡æ¯`,position:{x:t.clientX,y:t.clientY},target:{custom:e.custom},equipmentType:'',isEquipped:!1,maxQuantity:99}}function I(){r.value=!1,m.value=null}function F(e){const t=e.match(/^\(([^)]+)\)/);return t?t[1]:e}function O(e){return e||'çŠ¶æ€æœªçŸ¥'}function A(){return a.value?.character?.ov||0}function L(){return a.value?.character?.kv||0}let P='',j=0,X=0;function Y(e,t){if(e!==j||t!==X){let n,a;j=e,X=t,n=e<=-33?'æ··ä¹±':e<=33?'ä¸­ç«‹':'å®ˆåº',a=t<=-33?'é‚ªæ¶':t<=33?'ä¸­ç«‹':'å–„è‰¯',P='å®ˆåº'===n&&'å–„è‰¯'===a?'å®ˆåºå–„è‰¯':'å®ˆåº'===n&&'ä¸­ç«‹'===a?'å®ˆåºä¸­ç«‹':'å®ˆåº'===n&&'é‚ªæ¶'===a?'å®ˆåºé‚ªæ¶':'ä¸­ç«‹'===n&&'å–„è‰¯'===a?'ä¸­ç«‹å–„è‰¯':'ä¸­ç«‹'===n&&'ä¸­ç«‹'===a?'ç»å¯¹ä¸­ç«‹':'ä¸­ç«‹'===n&&'é‚ªæ¶'===a?'ä¸­ç«‹é‚ªæ¶':'æ··ä¹±'===n&&'å–„è‰¯'===a?'æ··ä¹±å–„è‰¯':'æ··ä¹±'===n&&'ä¸­ç«‹'===a?'æ··ä¹±ä¸­ç«‹':'æ··ä¹±'===n&&'é‚ªæ¶'===a?'æ··ä¹±é‚ªæ¶':'æœªçŸ¥é˜µè¥'}return P}function U(e){const t=e.match(/(\d+)\s*\/\s*(\d+)/);if(!t)return'0%';const[,n,a]=t;return`${parseFloat(a)>0?parseFloat(n)/parseFloat(a)*100:0}%`}function R(e){return e<-33?'#FFA500':e>33?'#00BFFF':'#6b7280'}function W(e){return e<-33?'#DC143C':e>33?'#00FF7F':'#6b7280'}function H(e){return et(e).map(e=>({name:Ze(e),color:Je(e)}))}function Q(){const e=a.value?.character?.inventory;return!!(e?.weapon||e?.armor||e?.accessories)}function Z(){const e=a.value?.character?.inventory;return!!(e?.upperClothing||e?.lowerClothing||e?.shoes||e?.underwear)}function J(e){return{upper:'ä¸Šè¡£',lower:'ä¸‹è¡£',underwear:'ä¸­è¡£',shoes:'é‹å­'}[e]}function G(e){return{upper:'#1E90FF',lower:'#FFD700',shoes:'#32CD32',underwear:'#FF69B4'}[e]}function K(e,t,n){lt('Showing equipment menu for',e);const l=a.value?.character?.inventory?.equipment?.[e];c.value={visible:!0,type:'equipment',title:e,position:{x:n.clientX,y:n.clientY},target:{name:e,type:l?.type||'',bonus:l?.bonus||'',description:l?.description||''},equipmentType:t,isEquipped:!0,maxQuantity:99}}function ee(e){const t='string'==typeof e?e:e.name||e;lt('Giving item',t),i.value={visible:!0,position:{x:300,y:200},itemName:t,quantity:1,actionType:'give',title:'é€‰æ‹©ç»™äºˆå¯¹è±¡'}}function te(e){lt('Showing NPC inventory for',e.name),M(e,'inventory')}return(0,n.onMounted)(()=>{!function(){try{const e=localStorage.getItem(xe);if(e){const t=JSON.parse(e);qe.value={...De,...t}}}catch(e){console.error('è¯»å–è®°å¿†å¤±è´¥:',e)}}()}),(e,t)=>((0,n.openBlock)(),(0,n.createElementBlock)('div',{class:(0,n.normalizeClass)(['fate-console',u.value]),'data-effects-enabled':(0,n.unref)(Ie)?'true':'false','data-direct-send-enabled':(0,n.unref)(Fe)?'true':'false'},[(0,n.createCommentVNode)(' æ§åˆ¶é¢æ¿ '),(0,n.createElementVNode)('div',mi,[(0,n.createElementVNode)('div',di,[((0,n.openBlock)(),(0,n.createElementBlock)(n.Fragment,null,(0,n.renderList)(o,e=>(0,n.createElementVNode)('div',{key:e,class:(0,n.normalizeClass)(['theme-stone',{active:(0,n.unref)(Te)===e}]),'data-theme':e,title:V(e),onClick:t=>(0,n.unref)(Pe)(e)},null,10,ui)),64))]),(0,n.createElementVNode)('div',{id:'direct-send-toggle-btn',class:'console-control-btn',title:g.value,onClick:t[0]||(t[0]=(...e)=>(0,n.unref)(Ue)&&(0,n.unref)(Ue)(...e))},[(0,n.createElementVNode)('span',vi,(0,n.toDisplayString)(E.value),1),(0,n.createElementVNode)('span',fi,(0,n.toDisplayString)(E.value),1)],8,pi),(0,n.createElementVNode)('div',{id:'effects-toggle-btn',class:'console-control-btn',title:k.value,onClick:t[1]||(t[1]=(...e)=>(0,n.unref)(Ye)&&(0,n.unref)(Ye)(...e))},[(0,n.createElementVNode)('span',ki,(0,n.toDisplayString)(b.value),1),(0,n.createElementVNode)('span',gi,(0,n.toDisplayString)(N.value),1)],8,yi),(0,n.createElementVNode)('div',{id:'layout-toggle-btn',class:'console-control-btn',title:f.value,onClick:t[2]||(t[2]=(...e)=>(0,n.unref)(Xe)&&(0,n.unref)(Xe)(...e))},[(0,n.createElementVNode)('span',bi,(0,n.toDisplayString)(y.value),1),(0,n.createElementVNode)('span',Ni,(0,n.toDisplayString)(y.value),1)],8,Ei),(0,n.createElementVNode)('div',{id:'console-toggle-btn',class:'console-control-btn',title:p.value,onClick:t[3]||(t[3]=(...e)=>(0,n.unref)(je)&&(0,n.unref)(je)(...e))},[(0,n.createElementVNode)('span',Vi,(0,n.toDisplayString)(v.value),1),(0,n.createElementVNode)('span',Ci,(0,n.toDisplayString)(v.value),1)],8,hi)]),(0,n.createCommentVNode)(' æŠ˜å è§†å›¾ '),(0,n.createElementVNode)('div',Bi,[a.value?.character?((0,n.openBlock)(),(0,n.createElementBlock)('div',Si,[(0,n.createElementVNode)('h3',wi,(0,n.toDisplayString)((0,n.unref)(He)('collapsedCharTitle')),1),(0,n.createElementVNode)('div',xi,[(0,n.createElementVNode)('div',Di,(0,n.toDisplayString)(a.value.character.name)+' - '+(0,n.toDisplayString)(O(a.value.character.status)),1),(0,n.createElementVNode)('div',qi,[(0,n.createElementVNode)('span',Mi,(0,n.toDisplayString)((0,n.unref)(We)('alignment')),1),(0,n.createElementVNode)('span',Ti,(0,n.toDisplayString)(Y(A(),L())),1),(0,n.createElementVNode)('div',{style:(0,n.normalizeStyle)({background:R(A())}),class:'alignment-circle ov-circle'},(0,n.toDisplayString)(A()),5),(0,n.createElementVNode)('div',{style:(0,n.normalizeStyle)({background:W(L())}),class:'alignment-circle kv-circle'},(0,n.toDisplayString)(L()),5)])]),(0,n.createElementVNode)('div',_i,[a.value.character.hp?((0,n.openBlock)(),(0,n.createElementBlock)('div',$i,[(0,n.createElementVNode)('div',{class:'progress-bar-fill hp',style:(0,n.normalizeStyle)({width:U(a.value.character.hp)})},null,4),(0,n.createElementVNode)('span',Ii,(0,n.toDisplayString)(a.value.character.hp),1)])):(0,n.createCommentVNode)('v-if',!0),a.value.character.mp?((0,n.openBlock)(),(0,n.createElementBlock)('div',Fi,[(0,n.createElementVNode)('div',{class:'progress-bar-fill mp',style:(0,n.normalizeStyle)({width:U(a.value.character.mp)})},null,4),(0,n.createElementVNode)('span',Oi,(0,n.toDisplayString)(a.value.character.mp),1)])):(0,n.createCommentVNode)('v-if',!0),a.value.character.sta?((0,n.openBlock)(),(0,n.createElementBlock)('div',Ai,[(0,n.createElementVNode)('div',{class:'progress-bar-fill sta',style:(0,n.normalizeStyle)({width:U(a.value.character.sta)})},null,4),(0,n.createElementVNode)('span',zi,(0,n.toDisplayString)(a.value.character.sta),1)])):(0,n.createCommentVNode)('v-if',!0)]),a.value.character.info?((0,n.openBlock)(),(0,n.createElementBlock)('div',Li,[(0,n.createElementVNode)('span',Pi,(0,n.toDisplayString)(a.value.character.info),1)])):(0,n.createCommentVNode)('v-if',!0),a.value.character.power?((0,n.openBlock)(),(0,n.createElementBlock)('div',ji,[(0,n.createElementVNode)('span',Xi,(0,n.toDisplayString)((0,n.unref)(We)('power')),1),(0,n.createElementVNode)('span',Yi,(0,n.toDisplayString)(a.value.character.power),1)])):(0,n.createCommentVNode)('v-if',!0),a.value.character.effects.length?((0,n.openBlock)(),(0,n.createElementBlock)('div',Ui,[(0,n.createElementVNode)('span',Ri,(0,n.toDisplayString)((0,n.unref)(We)('effects')),1),(0,n.createElementVNode)('div',Wi,[((0,n.openBlock)(!0),(0,n.createElementBlock)(n.Fragment,null,(0,n.renderList)(a.value.character.effects,e=>((0,n.openBlock)(),(0,n.createElementBlock)('span',{key:e.name,class:'tag'},(0,n.toDisplayString)(e.name),1))),128))])])):(0,n.createCommentVNode)('v-if',!0)])):(0,n.createCommentVNode)('v-if',!0),a.value?.world?((0,n.openBlock)(),(0,n.createElementBlock)('div',Hi,[(0,n.createElementVNode)('h3',Qi,(0,n.toDisplayString)((0,n.unref)(He)('collapsedWorldTitle')),1),a.value.world.time?((0,n.openBlock)(),(0,n.createElementBlock)('div',Zi,[(0,n.createElementVNode)('span',Ji,(0,n.toDisplayString)((0,n.unref)(We)('time')),1),(0,n.createElementVNode)('span',Gi,(0,n.toDisplayString)(a.value.world.time),1)])):(0,n.createCommentVNode)('v-if',!0),a.value.world.location?((0,n.openBlock)(),(0,n.createElementBlock)('div',Ki,[(0,n.createElementVNode)('span',es,(0,n.toDisplayString)((0,n.unref)(We)('location')),1),(0,n.createElementVNode)('span',ts,(0,n.toDisplayString)(a.value.world.location),1)])):(0,n.createCommentVNode)('v-if',!0),a.value.world.environment?((0,n.openBlock)(),(0,n.createElementBlock)('div',ns,[(0,n.createElementVNode)('span',as,(0,n.toDisplayString)((0,n.unref)(We)('environment')),1),(0,n.createElementVNode)('span',ls,(0,n.toDisplayString)(a.value.world.environment),1)])):(0,n.createCommentVNode)('v-if',!0),a.value.world.dynamics?((0,n.openBlock)(),(0,n.createElementBlock)('div',os,[(0,n.createElementVNode)('span',cs,(0,n.toDisplayString)((0,n.unref)(We)('dynamics')),1),(0,n.createElementVNode)('span',is,(0,n.toDisplayString)(a.value.world.dynamics),1)])):(0,n.createCommentVNode)('v-if',!0)])):(0,n.createCommentVNode)('v-if',!0)]),(0,n.createCommentVNode)(' å±•å¼€è§†å›¾ '),(0,n.createElementVNode)('div',ss,[(0,n.createElementVNode)('nav',rs,[(0,n.createElementVNode)('button',{class:(0,n.normalizeClass)(['tab-btn',{active:'fate-scroll'===l.value}]),onClick:t[4]||(t[4]=e=>l.value='fate-scroll')},(0,n.toDisplayString)((0,n.unref)(He)('tab1')),3),(0,n.createElementVNode)('button',{class:(0,n.normalizeClass)(['tab-btn',{active:'annals'===l.value}]),onClick:t[5]||(t[5]=e=>l.value='annals')},(0,n.toDisplayString)((0,n.unref)(He)('tab2')),3),(0,n.createElementVNode)('button',{class:(0,n.normalizeClass)(['tab-btn',{active:'fate-scroll-2'===l.value}]),onClick:t[6]||(t[6]=e=>l.value='fate-scroll-2')},(0,n.toDisplayString)((0,n.unref)(He)('tab3')),3),(0,n.createElementVNode)('button',{class:(0,n.normalizeClass)(['tab-btn',{active:'music-player'===l.value}]),onClick:t[7]||(t[7]=e=>l.value='music-player')},(0,n.toDisplayString)((0,n.unref)(He)('tab4')),3),(0,n.createElementVNode)('button',{class:(0,n.normalizeClass)(['tab-btn',{active:'map'===l.value}]),onClick:t[8]||(t[8]=e=>l.value='map')},(0,n.toDisplayString)((0,n.unref)(He)('tab5')),3)]),(0,n.createCommentVNode)(' å±±æ²³å†Œ/å¤©æœºå·/é£ç‰©å¿—/æ­¦æ—è°±/ä¸‡è±¡å½• æ ‡ç­¾é¡µ '),(0,n.createElementVNode)('div',{id:'fate-scroll',class:(0,n.normalizeClass)(['tab-panel',{active:'fate-scroll'===l.value}])},[(0,n.createElementVNode)('div',ms,[(0,n.createCommentVNode)(' è§’è‰²ä¿¡æ¯åˆ— '),a.value?.character?((0,n.openBlock)(),(0,n.createElementBlock)('div',ds,[(0,n.createElementVNode)('div',us,[(0,n.createElementVNode)('h2',ps,[(0,n.createElementVNode)('span',{class:'char-name clickable',onClick:t[9]||(t[9]=e=>{return t=e,lt('Showing custom info',''),void(c.value={visible:!0,type:'custom',title:'è¯¦ç»†ä¿¡æ¯',position:{x:t.clientX,y:t.clientY},target:{custom:a.value?.character?.custom},equipmentType:'',isEquipped:!1,maxQuantity:99});var t})},(0,n.toDisplayString)(a.value.character.name),1),t[12]||(t[12]=(0,n.createElementVNode)('span',null,'-',-1)),(0,n.createElementVNode)('span',{class:'clickable text-lg',onClick:t[10]||(t[10]=e=>{return t=e,lt('Showing rest menu',''),void(c.value={visible:!0,type:'rest',title:'ä¼‘æ¯é€‰é¡¹',position:{x:t.clientX,y:t.clientY},target:{name:'rest'},equipmentType:'',isEquipped:!1,maxQuantity:99});var t})},(0,n.toDisplayString)(O(a.value.character.status)),1)]),(0,n.createElementVNode)('div',vs,[a.value.character.hp?((0,n.openBlock)(),(0,n.createElementBlock)('div',fs,[(0,n.createElementVNode)('div',{style:(0,n.normalizeStyle)({width:U(a.value.character.hp)}),class:'progress-bar-fill hp'},null,4),(0,n.createElementVNode)('span',ys,(0,n.toDisplayString)(a.value.character.hp),1)])):(0,n.createCommentVNode)('v-if',!0),a.value.character.mp?((0,n.openBlock)(),(0,n.createElementBlock)('div',ks,[(0,n.createElementVNode)('div',{style:(0,n.normalizeStyle)({width:U(a.value.character.mp)}),class:'progress-bar-fill mp'},null,4),(0,n.createElementVNode)('span',gs,(0,n.toDisplayString)(a.value.character.mp),1)])):(0,n.createCommentVNode)('v-if',!0),a.value.character.sta?((0,n.openBlock)(),(0,n.createElementBlock)('div',Es,[(0,n.createElementVNode)('div',{style:(0,n.normalizeStyle)({width:U(a.value.character.sta)}),class:'progress-bar-fill sta'},null,4),(0,n.createElementVNode)('span',bs,(0,n.toDisplayString)(a.value.character.sta),1)])):(0,n.createCommentVNode)('v-if',!0)]),a.value.character.info?((0,n.openBlock)(),(0,n.createElementBlock)('div',Ns,[(0,n.createElementVNode)('span',hs,(0,n.toDisplayString)(a.value.character.info),1)])):(0,n.createCommentVNode)('v-if',!0),(0,n.createElementVNode)('div',Vs,[(0,n.createElementVNode)('span',Cs,(0,n.toDisplayString)((0,n.unref)(We)('alignment')),1),(0,n.createElementVNode)('span',Bs,(0,n.toDisplayString)(Y(A(),L())),1),(0,n.createElementVNode)('div',{style:(0,n.normalizeStyle)({background:R(A())}),class:'alignment-circle ov-circle'},(0,n.toDisplayString)(A()),5),(0,n.createElementVNode)('div',{style:(0,n.normalizeStyle)({background:W(L())}),class:'alignment-circle kv-circle'},(0,n.toDisplayString)(L()),5)]),(0,n.createElementVNode)('div',Ss,[(0,n.createElementVNode)('span',ws,(0,n.toDisplayString)((0,n.unref)(We)('power')),1),(0,n.createElementVNode)('span',xs,(0,n.toDisplayString)(a.value.character.power),1)]),a.value.character.abilities.length?((0,n.openBlock)(),(0,n.createElementBlock)('div',Ds,[(0,n.createElementVNode)('span',qs,(0,n.toDisplayString)((0,n.unref)(We)('abilities')),1),(0,n.createElementVNode)('div',Ms,[((0,n.openBlock)(!0),(0,n.createElementBlock)(n.Fragment,null,(0,n.renderList)(a.value.character.abilities,e=>((0,n.openBlock)(),(0,n.createElementBlock)('span',{key:e.name,class:'tag clickable',onClick:t=>function(e,t){console.log('Showing ability menu for:',e),c.value={visible:!0,type:'ability',title:`${e.name}`,position:{x:t.clientX,y:t.clientY},target:{name:e.name,proficiency:e.proficiency,effect:e.effect},equipmentType:'',isEquipped:!1,maxQuantity:99}}(e,t)},(0,n.toDisplayString)(e.name),9,Ts))),128))])])):(0,n.createCommentVNode)('v-if',!0),a.value.character.titles.length?((0,n.openBlock)(),(0,n.createElementBlock)('div',_s,[(0,n.createElementVNode)('span',$s,(0,n.toDisplayString)((0,n.unref)(We)('titles')),1),(0,n.createElementVNode)('div',Is,[((0,n.openBlock)(!0),(0,n.createElementBlock)(n.Fragment,null,(0,n.renderList)(a.value.character.titles,e=>((0,n.openBlock)(),(0,n.createElementBlock)('span',{key:e,class:'tag'},(0,n.toDisplayString)(e),1))),128))])])):(0,n.createCommentVNode)('v-if',!0),a.value.character.effects.length?((0,n.openBlock)(),(0,n.createElementBlock)('div',Fs,[(0,n.createElementVNode)('span',Os,(0,n.toDisplayString)((0,n.unref)(We)('effects')),1),(0,n.createElementVNode)('div',As,[((0,n.openBlock)(!0),(0,n.createElementBlock)(n.Fragment,null,(0,n.renderList)(a.value.character.effects,e=>((0,n.openBlock)(),(0,n.createElementBlock)('span',{key:e.name,class:'tag clickable',onClick:t=>function(e,t){console.log('Showing effect menu for:',e),c.value={visible:!0,type:'effect',title:`${e.name}`,position:{x:t.clientX,y:t.clientY},target:{name:e.name,description:e.description,remainingRounds:e.remainingRounds},equipmentType:'',isEquipped:!1,maxQuantity:99}}(e,t)},(0,n.toDisplayString)(e.name),9,zs))),128))])])):(0,n.createCommentVNode)('v-if',!0)]),(0,n.createCommentVNode)(' ç‰©å“æ  '),a.value.character.inventory?((0,n.openBlock)(),(0,n.createElementBlock)('div',Ls,[(0,n.createElementVNode)('h2',Ps,(0,n.toDisplayString)((0,n.unref)(He)('inventory')),1),(0,n.createCommentVNode)(' è´¢å¯Œæ  '),a.value.character.inventory.currency||a.value.character.inventory.wealthStatus?((0,n.openBlock)(),(0,n.createElementBlock)('div',js,[(0,n.createElementVNode)('span',Xs,(0,n.toDisplayString)((0,n.unref)(We)('currency')),1),(0,n.createElementVNode)('span',Ys,(0,n.toDisplayString)(a.value.character.inventory.currency)+(0,n.toDisplayString)(a.value.character.inventory.wealthStatus?` (${a.value.character.inventory.wealthStatus})`:''),1)])):(0,n.createCommentVNode)('v-if',!0),(0,n.createCommentVNode)(' ç©¿æˆ´è£…å¤‡ '),Q()?((0,n.openBlock)(),(0,n.createElementBlock)('div',Us,[(0,n.createElementVNode)('span',{class:'info-label clickable',onClick:t[11]||(t[11]=e=>function(e){lt('Showing equipment list menu','');const t=a.value?.character?.inventory?.equipment||{},n={};Object.keys(t).forEach(e=>{t[e].equipped||(n[e]=t[e])}),c.value={visible:!0,type:'equipment-list',title:'è£…å¤‡åˆ—è¡¨',position:{x:e.clientX,y:e.clientY},target:{equipment:n},equipmentType:'',isEquipped:!1,maxQuantity:99}}(e))},(0,n.toDisplayString)((0,n.unref)(We)('equipment')),1),(0,n.createElementVNode)('div',Rs,[a.value.character.inventory.weapon?((0,n.openBlock)(),(0,n.createElementBlock)('div',Ws,[t[13]||(t[13]=(0,n.createElementVNode)('span',{class:'equipment-icon'},'âš”ï¸',-1)),(0,n.createElementVNode)('span',Hs,[((0,n.openBlock)(!0),(0,n.createElementBlock)(n.Fragment,null,(0,n.renderList)(H(a.value.character.inventory.weapon),(e,t)=>((0,n.openBlock)(),(0,n.createElementBlock)('span',{key:t,style:(0,n.normalizeStyle)({color:e.color}),class:'equipment-item clickable',onClick:t=>K(e.name,'weapon',t)},(0,n.toDisplayString)(e.name)+(0,n.toDisplayString)(t<H(a.value.character.inventory.weapon).length-1?', ':''),13,Qs))),128))])])):(0,n.createCommentVNode)('v-if',!0),a.value.character.inventory.armor?((0,n.openBlock)(),(0,n.createElementBlock)('div',Zs,[t[14]||(t[14]=(0,n.createElementVNode)('span',{class:'equipment-icon'},'ğŸ›¡ï¸',-1)),(0,n.createElementVNode)('span',Js,[((0,n.openBlock)(!0),(0,n.createElementBlock)(n.Fragment,null,(0,n.renderList)(H(a.value.character.inventory.armor),(e,t)=>((0,n.openBlock)(),(0,n.createElementBlock)('span',{key:t,style:(0,n.normalizeStyle)({color:e.color}),class:'equipment-item clickable',onClick:t=>K(e.name,'armor',t)},(0,n.toDisplayString)(e.name)+(0,n.toDisplayString)(t<H(a.value.character.inventory.armor).length-1?', ':''),13,Gs))),128))])])):(0,n.createCommentVNode)('v-if',!0),a.value.character.inventory.accessories?((0,n.openBlock)(),(0,n.createElementBlock)('div',Ks,[t[15]||(t[15]=(0,n.createElementVNode)('span',{class:'equipment-icon'},'ğŸ’',-1)),(0,n.createElementVNode)('span',er,[((0,n.openBlock)(!0),(0,n.createElementBlock)(n.Fragment,null,(0,n.renderList)(H(a.value.character.inventory.accessories),(e,t)=>((0,n.openBlock)(),(0,n.createElementBlock)('span',{key:t,style:(0,n.normalizeStyle)({color:e.color}),class:'equipment-item clickable',onClick:t=>K(e.name,'accessories',t)},(0,n.toDisplayString)(e.name)+(0,n.toDisplayString)(t<H(a.value.character.inventory.accessories).length-1?', ':''),13,tr))),128))])])):(0,n.createCommentVNode)('v-if',!0)])])):(0,n.createCommentVNode)('v-if',!0),(0,n.createCommentVNode)(' è¡£å† æ  '),Z()?((0,n.openBlock)(),(0,n.createElementBlock)('div',nr,[(0,n.createElementVNode)('span',ar,(0,n.toDisplayString)(We('clothing')),1),(0,n.createElementVNode)('div',lr,[a.value.character.inventory.upperClothing?((0,n.openBlock)(),(0,n.createElementBlock)('div',or,[(0,n.createElementVNode)('span',{class:'equipment-icon',style:(0,n.normalizeStyle)({color:G('upper')})},(0,n.toDisplayString)(J('upper')),5),(0,n.createElementVNode)('span',cr,[(0,n.createElementVNode)('span',{class:'equipment-item',style:(0,n.normalizeStyle)({color:G('upper')})},'ã€'+(0,n.toDisplayString)(a.value.character.inventory.upperClothing)+'ã€‘',5)])])):(0,n.createCommentVNode)('v-if',!0),a.value.character.inventory.lowerClothing?((0,n.openBlock)(),(0,n.createElementBlock)('div',ir,[(0,n.createElementVNode)('span',{class:'equipment-icon',style:(0,n.normalizeStyle)({color:G('lower')})},(0,n.toDisplayString)(J('lower')),5),(0,n.createElementVNode)('span',sr,[(0,n.createElementVNode)('span',{class:'equipment-item',style:(0,n.normalizeStyle)({color:G('lower')})},'ã€'+(0,n.toDisplayString)(a.value.character.inventory.lowerClothing)+'ã€‘',5)])])):(0,n.createCommentVNode)('v-if',!0),a.value.character.inventory.underwear?((0,n.openBlock)(),(0,n.createElementBlock)('div',rr,[(0,n.createElementVNode)('span',{class:'equipment-icon',style:(0,n.normalizeStyle)({color:G('underwear')})},(0,n.toDisplayString)(J('underwear')),5),(0,n.createElementVNode)('span',mr,[(0,n.createElementVNode)('span',{class:'equipment-item',style:(0,n.normalizeStyle)({color:G('underwear')})},'ã€'+(0,n.toDisplayString)(a.value.character.inventory.underwear)+'ã€‘',5)])])):(0,n.createCommentVNode)('v-if',!0),a.value.character.inventory.shoes?((0,n.openBlock)(),(0,n.createElementBlock)('div',dr,[(0,n.createElementVNode)('span',{class:'equipment-icon',style:(0,n.normalizeStyle)({color:G('shoes')})},(0,n.toDisplayString)(J('shoes')),5),(0,n.createElementVNode)('span',ur,[(0,n.createElementVNode)('span',{class:'equipment-item',style:(0,n.normalizeStyle)({color:G('shoes')})},'ã€'+(0,n.toDisplayString)(a.value.character.inventory.shoes)+'ã€‘',5)])])):(0,n.createCommentVNode)('v-if',!0)])])):(0,n.createCommentVNode)('v-if',!0),a.value.character.inventory.items?.length?((0,n.openBlock)(),(0,n.createElementBlock)('div',pr,[(0,n.createElementVNode)('span',vr,(0,n.toDisplayString)((0,n.unref)(We)('items')),1),(0,n.createElementVNode)('div',fr,[((0,n.openBlock)(!0),(0,n.createElementBlock)(n.Fragment,null,(0,n.renderList)(a.value.character.inventory.items,e=>{return(0,n.openBlock)(),(0,n.createElementBlock)('span',{key:'string'==typeof e?e:e.name,class:'tag clickable',style:(0,n.normalizeStyle)({color:'string'==typeof e?'var(--text-main)':(t=e.quality,Qe[t]||Qe['æ™®é€š'])}),onClick:t=>function(e,t){lt('Showing item menu for',e);const n=e.match(/\((æ™®é€š|ç²¾è‰¯|ç¨€æœ‰|å²è¯—|ä¼ å¥‡)\)$/);if(n){const l=Ze(e),o=n[1],i=a.value?.character?.inventory?.equipment?.[l];c.value={visible:!0,type:'equipment',title:l,position:{x:t.clientX,y:t.clientY},target:{name:l,quality:o,type:i?.type||'',bonus:i?.bonus||'',description:i?.description||''},equipmentType:'weapon',isEquipped:!1,maxQuantity:99}}else{const n=e.match(/\((\d+)\)$/),l=n?parseInt(n[1],10):1,o=e.replace(/\s*\(\d+\)$/,''),i=a.value?.character?.inventory?.items?.find(e=>'object'==typeof e&&e.name===o);c.value={visible:!0,type:'item',title:o,position:{x:t.clientX,y:t.clientY},target:{name:o,count:'object'==typeof i&&i?.count?i.count:l,type:'object'==typeof i?i?.type:'',effect:'object'==typeof i?i?.effect:'',description:'object'==typeof i?i?.description:''},equipmentType:'',isEquipped:!1,maxQuantity:l}}}('string'==typeof e?e:e.name,t)},(0,n.toDisplayString)('string'==typeof e?e:`${e.name}(${e.count})`),13,yr);var t}),128))])])):(0,n.createCommentVNode)('v-if',!0)])):(0,n.createCommentVNode)('v-if',!0)])):(0,n.createCommentVNode)('v-if',!0),(0,n.createCommentVNode)(' ä¸–ç•Œä¿¡æ¯åˆ— '),a.value?.world?((0,n.openBlock)(),(0,n.createElementBlock)('div',kr,[(0,n.createElementVNode)('div',gr,[(0,n.createElementVNode)('h2',Er,(0,n.toDisplayString)((0,n.unref)(He)('worldStatus')),1),a.value.world.time?((0,n.openBlock)(),(0,n.createElementBlock)('div',br,[(0,n.createElementVNode)('span',Nr,(0,n.toDisplayString)((0,n.unref)(We)('time')),1),(0,n.createElementVNode)('span',hr,(0,n.toDisplayString)(a.value.world.time),1)])):(0,n.createCommentVNode)('v-if',!0),a.value.world.location?((0,n.openBlock)(),(0,n.createElementBlock)('div',Vr,[(0,n.createElementVNode)('span',Cr,(0,n.toDisplayString)((0,n.unref)(We)('location')),1),(0,n.createElementVNode)('span',Br,(0,n.toDisplayString)(a.value.world.location),1)])):(0,n.createCommentVNode)('v-if',!0),a.value.world.environment?((0,n.openBlock)(),(0,n.createElementBlock)('div',Sr,[(0,n.createElementVNode)('span',wr,(0,n.toDisplayString)((0,n.unref)(We)('environment')),1),(0,n.createElementVNode)('span',xr,(0,n.toDisplayString)(a.value.world.environment),1)])):(0,n.createCommentVNode)('v-if',!0),a.value.world.dynamics?((0,n.openBlock)(),(0,n.createElementBlock)('div',Dr,[(0,n.createElementVNode)('span',qr,(0,n.toDisplayString)((0,n.unref)(We)('dynamics')),1),(0,n.createElementVNode)('span',Mr,(0,n.toDisplayString)(a.value.world.dynamics),1)])):(0,n.createCommentVNode)('v-if',!0)]),(0,n.createCommentVNode)(' ä»»åŠ¡æ—¥å¿— '),a.value.world.quests.length?((0,n.openBlock)(),(0,n.createElementBlock)('div',Tr,[(0,n.createElementVNode)('h2',_r,(0,n.toDisplayString)((0,n.unref)(He)('journal')),1),(0,n.createElementVNode)('div',$r,[((0,n.openBlock)(!0),(0,n.createElementBlock)(n.Fragment,null,(0,n.renderList)(a.value.world.quests,e=>{return(0,n.openBlock)(),(0,n.createElementBlock)('div',{key:e.content,class:(0,n.normalizeClass)(['info-line','quest-'+('ä¸»çº¿'===e.type?'main':'side')])},[(0,n.createElementVNode)('span',Ir,(0,n.toDisplayString)((0,n.unref)(We)('ä¸»çº¿'===e.type?'questMain':'questSide')),1),(0,n.createElementVNode)('span',Fr,[(0,n.createElementVNode)('span',{class:'quest-title clickable',onClick:t=>function(e,t){console.log('Showing quest menu for:',e),c.value={visible:!0,type:'quest',title:`ä»»åŠ¡ï¼š${F(e.content)}`,position:{x:t.clientX,y:t.clientY},target:{name:F(e.content),content:e.content},equipmentType:'',isEquipped:!1,maxQuantity:99}}(e,t)},(0,n.toDisplayString)(F(e.content)),9,Or),(0,n.createTextVNode)(' '+(0,n.toDisplayString)((t=e.content,t.replace(/^\([^)]+\)\s*/,'')))+' ',1),void 0!==e.bcd?((0,n.openBlock)(),(0,n.createElementBlock)('span',Ar,(0,n.toDisplayString)(e.status)+'ï¼š'+(0,n.toDisplayString)(e.bcd)+'å¼€å§‹',1)):void 0!==e.ecd?((0,n.openBlock)(),(0,n.createElementBlock)('span',zr,(0,n.toDisplayString)(e.status)+'ï¼š'+(0,n.toDisplayString)(e.ecd)+'ç»“æŸ',1)):(0,n.createCommentVNode)('v-if',!0)])],2);var t}),128))])])):(0,n.createCommentVNode)('v-if',!0),(0,n.createCommentVNode)(' æ´¾ç³» '),a.value.world.factions.length?((0,n.openBlock)(),(0,n.createElementBlock)('div',Lr,[(0,n.createElementVNode)('h2',Pr,(0,n.toDisplayString)((0,n.unref)(He)('factions')),1),((0,n.openBlock)(!0),(0,n.createElementBlock)(n.Fragment,null,(0,n.renderList)(a.value.world.factions,e=>((0,n.openBlock)(),(0,n.createElementBlock)('div',{key:e.name,class:'info-line'},[(0,n.createElementVNode)('span',{class:'info-label faction-clickable clickable',onClick:t=>function(e,t){console.log('Showing faction menu for:',e),c.value={visible:!0,type:'faction',title:`åŠ¿åŠ›ï¼š${e.name}`,position:{x:t.clientX,y:t.clientY},target:e,equipmentType:'',isEquipped:!1,maxQuantity:99}}(e,t)},(0,n.toDisplayString)(e.name)+':',9,jr),(0,n.createElementVNode)('span',Xr,(0,n.toDisplayString)(e.value),1),e.alignment||e.location?((0,n.openBlock)(),(0,n.createElementBlock)('span',Yr,[e.alignment?((0,n.openBlock)(),(0,n.createElementBlock)('span',Ur,'('+(0,n.toDisplayString)(e.alignment)+')',1)):(0,n.createCommentVNode)('v-if',!0),e.alignment&&e.location?((0,n.openBlock)(),(0,n.createElementBlock)('span',Rr,' | ')):(0,n.createCommentVNode)('v-if',!0),e.location?((0,n.openBlock)(),(0,n.createElementBlock)('span',Wr,(0,n.toDisplayString)(e.location),1)):(0,n.createCommentVNode)('v-if',!0)])):(0,n.createCommentVNode)('v-if',!0)]))),128))])):(0,n.createCommentVNode)('v-if',!0)])):(0,n.createCommentVNode)('v-if',!0)])],2),(0,n.createCommentVNode)(' ç¬¬ä¸‰ä¸ªæ ‡ç­¾é¡µ - é€‰é¡¹åŒºåŸŸ '),(0,n.createElementVNode)('div',{id:'fate-scroll-2',class:(0,n.normalizeClass)(['tab-panel',{active:'fate-scroll-2'===l.value}])},[(0,n.createElementVNode)('div',Hr,[(0,n.createElementVNode)('div',Qr,[(0,n.createElementVNode)('div',Zr,[(0,n.createElementVNode)('div',Jr,[(0,n.createElementVNode)('h2',Gr,(0,n.toDisplayString)((0,n.unref)(He)('optionsTitle')),1)]),(0,n.createElementVNode)('div',Kr,[((0,n.openBlock)(!0),(0,n.createElementBlock)(n.Fragment,null,(0,n.renderList)(a.value?.options,e=>((0,n.openBlock)(),(0,n.createElementBlock)('div',{key:e.id,class:(0,n.normalizeClass)(['option-card',{disabled:e.disabled}]),onClick:t=>!e.disabled&&function(e){lt('Selected option',e.content),at(e.content)}(e)},[(0,n.createElementVNode)('div',tm,[(0,n.createElementVNode)('span',nm,[(0,n.createTextVNode)((0,n.toDisplayString)(e.content),1),e.type?((0,n.openBlock)(),(0,n.createElementBlock)('span',am,'('+(0,n.toDisplayString)(e.type)+')',1)):(0,n.createCommentVNode)('v-if',!0)])])],10,em))),128)),a.value?.options?.length?(0,n.createCommentVNode)('v-if',!0):((0,n.openBlock)(),(0,n.createElementBlock)('div',lm,'æš‚æ— é€‰é¡¹'))])])])])],2),(0,n.createCommentVNode)(' éŸ¶åéŸ³/äº‘æ°´è°£/ä¿šä¿—è°ƒ/é•¿é£æ­Œ/å¤ªè™šåŸ/èƒ§å¤œæ›² æ ‡ç­¾é¡µ '),(0,n.createElementVNode)('div',{id:'music-player',class:(0,n.normalizeClass)(['tab-panel',{active:'music-player'===l.value}])},[(0,n.createElementVNode)('div',om,[(0,n.createElementVNode)('div',cm,[(0,n.createElementVNode)('div',im,[(0,n.createElementVNode)('h2',sm,(0,n.toDisplayString)((0,n.unref)(He)('tab4')),1),(0,n.createVNode)(Cl)])])])],2),(0,n.createCommentVNode)(' ç‹åœŸå¿—/æ˜Ÿæ§è½¨/é—¾å··è°±/æµ®è¸ªè®°/ç•Œå°˜è¾‘/ç™¾é¬¼å¸– æ ‡ç­¾é¡µ '),(0,n.createElementVNode)('div',{id:'map',class:(0,n.normalizeClass)(['tab-panel',{active:'map'===l.value}])},[(0,n.createElementVNode)('div',rm,[(0,n.createElementVNode)('div',mm,[(0,n.createElementVNode)('div',dm,[(0,n.createElementVNode)('h2',um,(0,n.toDisplayString)((0,n.unref)(He)('tab5')),1),(0,n.createVNode)(si)])])])],2),(0,n.createCommentVNode)(' è¡£å† è°±/ä»™ç¼˜å½•/å¼‚é—»å½•/æ©ä»‡å½•/ç¥é­‚è°± æ ‡ç­¾é¡µ '),(0,n.createElementVNode)('div',{id:'annals',class:(0,n.normalizeClass)(['tab-panel',{active:'annals'===l.value}])},[(0,n.createElementVNode)('div',pm,[(0,n.createCommentVNode)(' ç¾ç»Šè§’è‰² '),a.value?.bondedNpcs.length?((0,n.openBlock)(),(0,n.createElementBlock)('div',vm,[(0,n.createElementVNode)('div',fm,[(0,n.createElementVNode)('h2',ym,(0,n.toDisplayString)((0,n.unref)(He)('bonded')),1),(0,n.createElementVNode)('div',km,[((0,n.openBlock)(!0),(0,n.createElementBlock)(n.Fragment,null,(0,n.renderList)(a.value.bondedNpcs,e=>((0,n.openBlock)(),(0,n.createBlock)(mo,{key:e.name,npc:e,bonded:!0,onShowNpcInventory:te,onShowNpcDetail:M,onShowNpcCustomInfo:T},null,8,['npc']))),128))])])])):(0,n.createCommentVNode)('v-if',!0),(0,n.createCommentVNode)(' é™„è¿‘NPC '),a.value?.nearbyNpcs.length?((0,n.openBlock)(),(0,n.createElementBlock)('div',gm,[(0,n.createElementVNode)('div',Em,[(0,n.createElementVNode)('h2',bm,(0,n.toDisplayString)((0,n.unref)(He)('nearby')),1),(0,n.createElementVNode)('div',Nm,[((0,n.openBlock)(!0),(0,n.createElementBlock)(n.Fragment,null,(0,n.renderList)(a.value.nearbyNpcs,e=>((0,n.openBlock)(),(0,n.createBlock)(mo,{key:e.name,npc:e,bonded:!1,onShowNpcInventory:te,onShowNpcDetail:M,onShowNpcCustomInfo:T},null,8,['npc']))),128))])])])):(0,n.createCommentVNode)('v-if',!0)])],2)]),(0,n.createCommentVNode)(' æ—¥å¿—åŒºåŸŸ '),(0,n.createElementVNode)('div',hm,[(0,n.createElementVNode)('h3',Vm,[(0,n.createElementVNode)('span',{class:'log-title-text',onClick:D},(0,n.toDisplayString)((0,n.unref)(He)('logTitle')),1)]),(0,n.createElementVNode)('div',Cm,[a.value?.log&&0!==h.value.length?((0,n.openBlock)(!0),(0,n.createElementBlock)(n.Fragment,{key:1},(0,n.renderList)(h.value,e=>((0,n.openBlock)(),(0,n.createElementBlock)('p',{key:e,class:'log-entry'},(0,n.toDisplayString)(e),1))),128)):((0,n.openBlock)(),(0,n.createElementBlock)('p',Bm,'å½“å‰æš‚æ— æ•°æ®è®°å½•'))])]),(0,n.createCommentVNode)(' åŠ¨ä½œèœå• '),(0,n.createVNode)(Ve,{visible:c.value.visible,type:c.value.type,title:c.value.title,position:c.value.position,'max-quantity':c.value.maxQuantity,'is-equipped':c.value.isEquipped,target:c.value.target,onSelect:C,onClose:B},null,8,['visible','type','title','position','max-quantity','is-equipped','target']),(0,n.createCommentVNode)(' NPCé€‰æ‹©èœå• '),(0,n.createVNode)(bo,{visible:i.value.visible,position:i.value.position,'available-npcs':S(),title:i.value.title,'action-type':i.value.actionType,onSelect:w,onClose:x},null,8,['visible','position','available-npcs','title','action-type']),(0,n.createCommentVNode)(' ä½œè€…ä¿¡æ¯æ¨¡æ€æ¡† '),(0,n.createVNode)(Be,{visible:s.value,onClose:q},null,8,['visible']),(0,n.createCommentVNode)(' NPCè¯¦æƒ…æ¨¡æ€æ¡† '),(0,n.createVNode)(Oa,{visible:r.value,npc:m.value,'default-tab':d.value,onClose:I},null,8,['visible','npc','default-tab'])],10,ri))}});$(()=>{(0,n.createApp)(Sm).mount('#app')});</script><style>@import url(https://fonts.googleapis.com/css2?family=Ma+Shan+Zheng&display=swap);
@import url(https://fonts.googleapis.com/css2?family=Noto+Serif+SC:wght@400;700&display=swap);
.action-menu-overlay[data-v-b163bff0]{position:fixed;top:0;left:0;right:0;bottom:0;background:rgba(0,0,0,.3);z-index:1000;display:flex;align-items:center;justify-content:center}.action-menu[data-v-b163bff0]{background:var(--bg-panel);border:2px solid var(--primary-color);border-radius:8px;box-shadow:0 4px 20px rgba(0,0,0,.5);min-width:200px;max-width:400px;max-height:500px;z-index:1001}.action-menu-header[data-v-b163bff0]{padding:12px 16px;border-bottom:1px solid var(--border-section);background:var(--bg-section)}.action-menu-header h4[data-v-b163bff0]{margin:0;color:var(--text-header);font-size:1.1em;font-weight:bold;display:flex;align-items:center;gap:8px}.action-menu-header h4 .menu-icon[data-v-b163bff0]{font-size:1.2em;opacity:.9}.action-menu-content[data-v-b163bff0]{padding:12px 16px;overflow-y:auto;max-height:440px}.action-menu-content[data-v-b163bff0]::-webkit-scrollbar{width:6px}.action-menu-content[data-v-b163bff0]::-webkit-scrollbar-track{background:rgba(0,0,0,.1);border-radius:3px}.action-menu-content[data-v-b163bff0]::-webkit-scrollbar-thumb{background:var(--primary-color);border-radius:3px;box-shadow:inset 0 0 3px rgba(0,0,0,.3)}.action-menu-content[data-v-b163bff0]::-webkit-scrollbar-thumb:hover{background:var(--glow-color)}.action-menu-content[data-v-b163bff0]::-webkit-scrollbar-corner{background:rgba(0,0,0,0)}.action-menu-content .ability-info[data-v-b163bff0],.action-menu-content .item-info[data-v-b163bff0],.action-menu-content .equipment-info[data-v-b163bff0],.action-menu-content .effect-info[data-v-b163bff0],.action-menu-content .faction-info[data-v-b163bff0]{margin-bottom:12px;padding:8px;background:var(--bg-card);border-radius:4px;border:1px solid var(--border-section)}.action-menu-content .ability-info .info-line[data-v-b163bff0],.action-menu-content .item-info .info-line[data-v-b163bff0],.action-menu-content .equipment-info .info-line[data-v-b163bff0],.action-menu-content .effect-info .info-line[data-v-b163bff0],.action-menu-content .faction-info .info-line[data-v-b163bff0]{display:flex;align-items:center;margin-bottom:4px}.action-menu-content .ability-info .info-line[data-v-b163bff0]:last-child,.action-menu-content .item-info .info-line[data-v-b163bff0]:last-child,.action-menu-content .equipment-info .info-line[data-v-b163bff0]:last-child,.action-menu-content .effect-info .info-line[data-v-b163bff0]:last-child,.action-menu-content .faction-info .info-line[data-v-b163bff0]:last-child{margin-bottom:0}.action-menu-content .ability-info .info-line .info-label[data-v-b163bff0],.action-menu-content .item-info .info-line .info-label[data-v-b163bff0],.action-menu-content .equipment-info .info-line .info-label[data-v-b163bff0],.action-menu-content .effect-info .info-line .info-label[data-v-b163bff0],.action-menu-content .faction-info .info-line .info-label[data-v-b163bff0]{color:var(--text-header);font-weight:bold;min-width:60px;margin-right:8px}.action-menu-content .ability-info .info-line .info-value[data-v-b163bff0],.action-menu-content .item-info .info-line .info-value[data-v-b163bff0],.action-menu-content .equipment-info .info-line .info-value[data-v-b163bff0],.action-menu-content .effect-info .info-line .info-value[data-v-b163bff0],.action-menu-content .faction-info .info-line .info-value[data-v-b163bff0]{color:var(--text-main);flex:1}.action-menu-content .custom-info[data-v-b163bff0]{margin-bottom:12px;padding:8px;background:var(--bg-card);border-radius:4px;border:1px solid var(--border-section)}.action-menu-content .custom-info .custom-item[data-v-b163bff0]{margin-bottom:12px}.action-menu-content .custom-info .custom-item[data-v-b163bff0]:last-child{margin-bottom:0}.action-menu-content .custom-info .custom-item .custom-header[data-v-b163bff0]{display:flex;align-items:center;margin-bottom:4px}.action-menu-content .custom-info .custom-item .custom-header .custom-icon[data-v-b163bff0]{color:var(--primary-color);font-size:1.4em;margin-right:8px;opacity:.8;flex-shrink:0}.action-menu-content .custom-info .custom-item .custom-header .info-label[data-v-b163bff0]{color:var(--text-header);font-weight:bold;font-size:1em}.action-menu-content .custom-info .custom-item .custom-content[data-v-b163bff0]{margin-left:32px}.action-menu-content .custom-info .custom-item .custom-content .info-value[data-v-b163bff0]{color:var(--text-main);line-height:1.4;word-wrap:break-word}.action-menu-content .equipment-list[data-v-b163bff0]{margin-bottom:12px;padding:8px;background:var(--bg-card);border-radius:4px;border:1px solid var(--border-section)}.action-menu-content .equipment-list .equipment-select-all[data-v-b163bff0]{margin-bottom:12px;padding-bottom:8px;border-bottom:1px solid var(--border-section)}.action-menu-content .equipment-list .equipment-select-all .checkbox-label[data-v-b163bff0]{display:flex;align-items:center;gap:6px;cursor:pointer;font-weight:bold;color:var(--text-header)}.action-menu-content .equipment-list .equipment-select-all .checkbox-label .checkbox-text[data-v-b163bff0]{font-size:.9em}.action-menu-content .equipment-list .equipment-item-line[data-v-b163bff0]{margin-bottom:8px}.action-menu-content .equipment-list .equipment-item-line[data-v-b163bff0]:last-child{margin-bottom:0}.action-menu-content .equipment-list .equipment-item-line .equipment-item-info[data-v-b163bff0]{display:flex;align-items:center;gap:8px}.action-menu-content .equipment-list .equipment-item-line .equipment-item-info .checkbox-label[data-v-b163bff0]{display:flex;align-items:center;gap:6px;cursor:pointer;flex:1}.action-menu-content .equipment-list .equipment-item-line .equipment-item-info .checkbox-label .equipment-item-name[data-v-b163bff0]{color:var(--text-main);cursor:pointer;font-weight:500}.action-menu-content .equipment-list .equipment-item-line .equipment-item-info .checkbox-label .equipment-item-name[data-v-b163bff0]:hover{color:var(--primary-color)}.action-menu-content .equipment-list .equipment-item-line .equipment-item-info .equipment-equipped-indicator[data-v-b163bff0]{background:var(--primary-color);color:#000;padding:2px 6px;border-radius:3px;font-size:.8em;font-weight:bold}.action-menu-content .equipment-list .equipment-batch-actions[data-v-b163bff0]{margin-top:12px;padding-top:8px;border-top:1px solid var(--border-section);display:flex;gap:6px}.action-menu-content .equipment-list .equipment-batch-actions .batch-btn[data-v-b163bff0]{flex:1;font-size:.85em;padding:6px 8px}.action-menu-content .no-info[data-v-b163bff0]{margin-bottom:12px;padding:8px;background:var(--bg-card);border-radius:4px;border:1px solid var(--border-section);text-align:center}.action-menu-content .no-info .no-info-text[data-v-b163bff0]{color:var(--text-main);opacity:.7;font-size:.9em}.action-menu-content .action-btn[data-v-b163bff0]{display:block;width:100%;padding:8px 12px;margin:4px 0;background:var(--primary-color);color:#000;font-weight:bold;border:none;border-radius:4px;cursor:pointer;font-size:.9em;transition:all .2s ease}.action-menu-content .action-btn[data-v-b163bff0]:hover{background:var(--glow-color);transform:translateY(-1px)}.action-menu-content .quantity-input[data-v-b163bff0]{display:flex;align-items:center;gap:4px;margin-bottom:12px}.action-menu-content .quantity-input label[data-v-b163bff0]{color:var(--text-main);font-size:.9em}.action-menu-content .quantity-input .quantity-controls[data-v-b163bff0]{display:flex;align-items:center;gap:2px}.action-menu-content .quantity-input .quantity-controls .quantity-btn[data-v-b163bff0]{width:24px;height:24px;padding:0;border:1px solid var(--border-section);border-radius:4px;background:var(--bg-card);color:var(--text-main);font-size:1em;font-weight:bold;display:flex;align-items:center;justify-content:center;cursor:pointer;transition:transform .2s ease}.action-menu-content .quantity-input .quantity-controls .quantity-btn[data-v-b163bff0]:hover:not(:disabled){background:var(--bg-card);border-color:var(--border-section)}.action-menu-content .quantity-input .quantity-controls .quantity-btn[data-v-b163bff0]:active:not(:disabled){transform:scale(0.95)}.action-menu-content .quantity-input .quantity-controls .quantity-btn[data-v-b163bff0]:disabled{cursor:not-allowed;opacity:.5}.action-menu-content .quantity-input .quantity-controls .quantity-field[data-v-b163bff0]{width:50px;padding:4px 6px;border:1px solid var(--border-section);border-radius:4px;background:var(--bg-card);color:var(--text-main);text-align:center;-webkit-appearance:none;appearance:textfield}.action-menu-content .quantity-input .quantity-controls .quantity-field[data-v-b163bff0]:focus{outline:none;border-color:var(--primary-color)}.action-menu-content .quantity-input .quantity-controls .quantity-field[data-v-b163bff0]::-webkit-outer-spin-button,.action-menu-content .quantity-input .quantity-controls .quantity-field[data-v-b163bff0]::-webkit-inner-spin-button{-webkit-appearance:none;appearance:none;margin:0}.action-menu-content .quantity-input .quantity-controls .quantity-field[data-v-b163bff0]::-moz-number-spin-box{display:none}.action-menu-content .quantity-input .quantity-max[data-v-b163bff0]{color:var(--text-main);font-size:.9em;opacity:.8}.action-menu-content .equipment-checkbox[data-v-b163bff0]{width:16px;height:16px;accent-color:var(--primary-color);cursor:pointer}.action-menu-content .checkbox-label[data-v-b163bff0]{cursor:pointer;-webkit-user-select:none;user-select:none}
.author-modal-overlay[data-v-7e660640]{position:fixed;top:0;left:0;right:0;bottom:0;background:rgba(0,0,0,.7);display:flex;align-items:center;justify-content:center;z-index:10000;backdrop-filter:blur(5px)}.author-modal[data-v-7e660640]{background:var(--bg-panel);border:2px solid var(--primary-color);border-radius:12px;padding:0;max-width:400px;width:90%;max-height:80vh;overflow:hidden;box-shadow:0 0 30px var(--glow-color),0 8px 25px rgba(0,0,0,.5),inset 0 0 20px rgba(0,0,0,.3);animation:modal-appear-7e660640 .3s ease-out}@keyframes modal-appear-7e660640{from{opacity:0;transform:scale(0.9) translateY(-20px)}to{opacity:1;transform:scale(1) translateY(0)}}.author-modal-header[data-v-7e660640]{display:flex;justify-content:space-between;align-items:center;padding:20px 24px 16px;border-bottom:1px solid var(--border-section);background:linear-gradient(135deg,var(--bg-section),rgba(200,155,60,0.1))}.author-modal-title[data-v-7e660640]{font-family:"Ma Shan Zheng","åæ–‡è¡Œæ¥·","åæ–‡æ¥·ä½“","KaiTi",cursive;font-size:1.8em;color:var(--text-header);margin:0;text-shadow:0 0 10px var(--glow-color);letter-spacing:.1em}.author-modal-close[data-v-7e660640]{background:none;border:none;font-size:2em;color:var(--text-main);cursor:pointer;padding:0;width:32px;height:32px;display:flex;align-items:center;justify-content:center;border-radius:50%;transition:all .2s ease}.author-modal-close[data-v-7e660640]:hover{background:rgba(200,155,60,.2);color:var(--primary-color);transform:scale(1.1)}.author-modal-content[data-v-7e660640]{padding:24px}.author-info[data-v-7e660640],.author-note[data-v-7e660640]{margin-bottom:20px}.author-info[data-v-7e660640]:last-child,.author-note[data-v-7e660640]:last-child{margin-bottom:0}.author-label[data-v-7e660640],.note-label[data-v-7e660640]{font-size:1.1em;color:var(--text-header);font-weight:bold;margin-bottom:8px;text-shadow:0 0 5px var(--glow-color)}.author-name[data-v-7e660640]{font-size:1.4em;color:var(--primary-color);font-weight:bold;text-shadow:0 0 8px var(--glow-color);padding:8px 16px;background:rgba(200,155,60,.1);border-radius:8px;border:1px solid var(--border-section);display:inline-block}.note-content[data-v-7e660640]{font-size:1em;color:var(--text-main);line-height:1.6;padding:12px 16px;background:rgba(0,0,0,.2);border-radius:8px;border:1px solid var(--border-section);opacity:.9}@media (max-width:768px){.author-modal[data-v-7e660640]{width:95%;margin:20px}.author-modal-header[data-v-7e660640]{padding:16px 20px 12px}.author-modal-title[data-v-7e660640]{font-size:1.5em}.author-modal-content[data-v-7e660640]{padding:20px}.author-name[data-v-7e660640]{font-size:1.2em;padding:6px 12px}.note-content[data-v-7e660640]{font-size:.9em;padding:10px 12px}}
.npc-detail-modal-overlay[data-v-4c08f391]{position:fixed;top:0;left:0;right:0;bottom:0;background:rgba(0,0,0,.7);display:flex;align-items:center;justify-content:center;z-index:10000;backdrop-filter:blur(5px)}.npc-detail-modal[data-v-4c08f391]{background:var(--bg-panel);border:2px solid var(--primary-color);border-radius:12px;padding:0;max-width:600px;width:90%;max-height:80vh;overflow-y:auto;box-shadow:0 0 30px var(--glow-color),0 8px 25px rgba(0,0,0,.5),inset 0 0 20px rgba(0,0,0,.3);animation:modal-appear-4c08f391 .3s ease-out}.npc-detail-modal[data-v-4c08f391]::-webkit-scrollbar{width:8px}.npc-detail-modal[data-v-4c08f391]::-webkit-scrollbar-track{background:rgba(0,0,0,.1);border-radius:4px}.npc-detail-modal[data-v-4c08f391]::-webkit-scrollbar-thumb{background:var(--primary-color);border-radius:4px;box-shadow:inset 0 0 5px rgba(0,0,0,.3)}.npc-detail-modal[data-v-4c08f391]::-webkit-scrollbar-thumb:hover{background:var(--glow-color)}.npc-detail-modal[data-v-4c08f391]::-webkit-scrollbar-corner{background:rgba(0,0,0,0)}@keyframes modal-appear-4c08f391{from{opacity:0;transform:scale(0.9) translateY(-20px)}to{opacity:1;transform:scale(1) translateY(0)}}.npc-detail-modal-header[data-v-4c08f391]{display:flex;justify-content:space-between;align-items:flex-start;padding:20px 24px 16px;border-bottom:1px solid var(--border-section);background:var(--bg-panel);position:sticky;top:0;z-index:1;backdrop-filter:blur(10px);box-shadow:0 2px 8px rgba(0,0,0,.3)}.header-left[data-v-4c08f391]{flex:1;display:flex;flex-direction:column;gap:12px}.npc-detail-modal-title[data-v-4c08f391]{font-family:"Ma Shan Zheng","åæ–‡è¡Œæ¥·","åæ–‡æ¥·ä½“","KaiTi",cursive;font-size:1.8em;color:var(--text-header);margin:0;text-shadow:0 0 10px var(--glow-color);letter-spacing:.1em}.npc-detail-modal-close[data-v-4c08f391]{background:none;border:none;font-size:2em;color:var(--text-main);cursor:pointer;padding:0;width:32px;height:32px;display:flex;align-items:center;justify-content:center;border-radius:50%;transition:all .2s ease}.npc-detail-modal-close[data-v-4c08f391]:hover{background:rgba(200,155,60,.2);color:var(--primary-color);transform:scale(1.1)}.npc-detail-modal-content[data-v-4c08f391]{padding:24px}.detail-section[data-v-4c08f391]{margin-bottom:24px}.detail-section[data-v-4c08f391]:last-child{margin-bottom:0}.section-title[data-v-4c08f391]{font-size:1.2em;color:var(--text-header);margin:0 0 12px 0;padding-bottom:8px;border-bottom:1px solid var(--border-section);text-shadow:0 0 5px var(--glow-color)}.info-grid[data-v-4c08f391]{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:12px}.info-item[data-v-4c08f391]{display:flex;align-items:center;padding:8px 12px;background:rgba(0,0,0,.2);border-radius:6px;border:1px solid var(--border-section)}.info-label[data-v-4c08f391]{font-weight:bold;color:var(--text-header);min-width:60px}.info-value[data-v-4c08f391]{color:var(--text-main);flex:1}.info-text[data-v-4c08f391]{color:var(--text-main);line-height:1.6;padding:12px 16px;background:rgba(0,0,0,.2);border-radius:8px;border:1px solid var(--border-section)}.status-bars[data-v-4c08f391]{display:flex;flex-direction:column;gap:8px}.status-bar[data-v-4c08f391]{display:flex;align-items:center;padding:8px 12px;background:rgba(0,0,0,.2);border-radius:6px;border:1px solid var(--border-section)}.status-label[data-v-4c08f391]{font-weight:bold;color:var(--text-header);min-width:50px}.status-value[data-v-4c08f391]{color:var(--text-main);flex:1}.bond-info[data-v-4c08f391]{display:grid;grid-template-columns:repeat(auto-fit,minmax(150px,1fr));gap:12px}.bond-item[data-v-4c08f391]{display:flex;align-items:center;padding:8px 12px;background:rgba(0,0,0,.2);border-radius:6px;border:1px solid var(--border-section)}.bond-label[data-v-4c08f391]{font-weight:bold;color:var(--text-header);min-width:60px}.bond-value[data-v-4c08f391]{color:var(--text-main);flex:1}.bond-value.sr-active[data-v-4c08f391]{color:var(--primary-color);font-weight:bold;text-shadow:0 0 5px var(--glow-color)}.tags-container[data-v-4c08f391]{display:flex;flex-wrap:wrap;gap:8px}.tag[data-v-4c08f391]{padding:4px 8px;background:rgba(200,155,60,.2);color:var(--primary-color);border-radius:4px;font-size:.9em;border:1px solid var(--border-section)}.tag.effect-tag[data-v-4c08f391]{background:rgba(100,100,200,.2);color:skyblue}.inventory-content[data-v-4c08f391]{display:flex;flex-direction:column;gap:12px}.inventory-item[data-v-4c08f391]{padding:12px 16px;background:rgba(0,0,0,.2);border-radius:8px;border:1px solid var(--border-section)}.inventory-label[data-v-4c08f391]{font-weight:bold;color:var(--text-header);display:block;margin-bottom:8px}.inventory-value[data-v-4c08f391]{line-height:1.4}.equipment-details[data-v-4c08f391]{margin-top:16px;padding-top:16px;border-top:1px solid var(--border-section)}.equipment-detail-item[data-v-4c08f391]{margin-bottom:8px;padding:8px;background:rgba(0,0,0,.2);border-radius:6px;border:1px solid var(--border-section)}.equipment-section[data-v-4c08f391]{margin-bottom:20px}.equipment-section[data-v-4c08f391]:last-child{margin-bottom:0}.equipment-section-title[data-v-4c08f391]{font-size:1em;color:var(--text-header);margin:0 0 8px 0;padding-bottom:4px;border-bottom:1px solid var(--border-section);text-shadow:0 0 3px var(--glow-color)}.equipment-list[data-v-4c08f391]{display:flex;flex-direction:column;gap:4px}.equipment-detail-header[data-v-4c08f391]{display:flex;justify-content:space-between;align-items:center;margin-bottom:8px;cursor:pointer;padding:4px;border-radius:4px;transition:background-color .2s ease}.equipment-detail-header[data-v-4c08f391]:hover{background:rgba(200,155,60,.1)}.expand-icon[data-v-4c08f391]{font-size:.8em;color:var(--text-main);opacity:.7;margin-left:8px;transition:transform .2s ease}.equipment-detail-name[data-v-4c08f391]{font-weight:bold;font-size:1.1em}.equipment-equipped-indicator[data-v-4c08f391]{background:var(--primary-color);color:#000;padding:2px 6px;border-radius:3px;font-size:.8em;font-weight:bold;margin-left:8px}.equipment-detail-bonus[data-v-4c08f391],.equipment-detail-description[data-v-4c08f391]{margin:4px 0;font-size:.9em;color:var(--text-main)}.equipment-detail-bonus[data-v-4c08f391]{color:var(--primary-color)}.item-details[data-v-4c08f391]{margin-top:4px;padding:8px;background:rgba(0,0,0,.3);border-radius:4px;border:1px solid var(--border-section);max-height:0;overflow:hidden;transition:max-height .3s ease,padding .3s ease}.item-details.expanded[data-v-4c08f391]{max-height:200px;padding:8px}.item-detail-line[data-v-4c08f391]{font-size:.85em;color:var(--text-main);margin:2px 0;line-height:1.3}.clothing-list[data-v-4c08f391]{display:flex;flex-direction:column;gap:4px}.clothing-item[data-v-4c08f391]{color:var(--text-main);padding:2px 0}.items-list[data-v-4c08f391]{display:flex;flex-wrap:wrap;gap:6px}.abilities-list[data-v-4c08f391]{display:flex;flex-direction:column;gap:4px}.effects-list[data-v-4c08f391]{display:flex;flex-direction:column;gap:4px}.effect-details[data-v-4c08f391]{margin-top:8px;padding:8px;background:rgba(0,0,0,.3);border-radius:4px;border:1px solid var(--border-section);max-height:0;overflow:hidden;transition:max-height .3s ease,padding .3s ease}.effect-details.expanded[data-v-4c08f391]{max-height:200px;padding:8px}.effect-detail-content[data-v-4c08f391]{margin-bottom:8px}.effect-detail-content[data-v-4c08f391]:last-child{margin-bottom:0}.effect-detail-line[data-v-4c08f391]{font-size:.85em;color:var(--text-main);margin:2px 0;line-height:1.3}.ability-item[data-v-4c08f391]{padding:8px;background:rgba(0,0,0,.2);border-radius:6px;border:1px solid var(--border-section)}.ability-header[data-v-4c08f391]{display:flex;justify-content:space-between;align-items:center;cursor:pointer;padding:4px;border-radius:4px;transition:background-color .2s ease}.ability-header[data-v-4c08f391]:hover{background:rgba(200,155,60,.1)}.ability-name[data-v-4c08f391]{font-weight:bold;color:var(--text-main)}.ability-details[data-v-4c08f391]{margin-top:4px;padding:8px;background:rgba(0,0,0,.3);border-radius:4px;border:1px solid var(--border-section);max-height:0;overflow:hidden;transition:max-height .3s ease,padding .3s ease}.ability-details.expanded[data-v-4c08f391]{max-height:200px;padding:8px}.ability-detail-line[data-v-4c08f391]{font-size:.85em;color:var(--text-main);margin:2px 0;line-height:1.3}.item-tag[data-v-4c08f391]{padding:3px 6px;background:rgba(150,150,150,.2);color:var(--text-main);border-radius:3px;font-size:.85em;border:1px solid var(--border-section)}@media (max-width:768px){.npc-detail-modal[data-v-4c08f391]{width:95%;margin:20px;max-height:90vh}.npc-detail-modal-header[data-v-4c08f391]{padding:16px 20px 12px}.npc-detail-modal-title[data-v-4c08f391]{font-size:1.5em}.npc-detail-modal-content[data-v-4c08f391]{padding:20px}.info-grid[data-v-4c08f391]{grid-template-columns:1fr}.bond-info[data-v-4c08f391]{grid-template-columns:1fr}}.tab-nav[data-v-4c08f391]{display:flex;gap:8px}.tab-btn[data-v-4c08f391]{padding:6px 12px;background:rgba(0,0,0,.2);border:1px solid var(--border-section);border-radius:6px;color:var(--text-main);cursor:pointer;transition:all .2s ease;font-size:.9em}.tab-btn[data-v-4c08f391]:hover{background:rgba(200,155,60,.1);color:var(--primary-color)}.tab-btn.active[data-v-4c08f391]{background:var(--primary-color);color:var(--bg-panel);border-color:var(--primary-color);box-shadow:0 0 8px var(--glow-color)}.tab-panel[data-v-4c08f391]{display:none}.tab-panel.active[data-v-4c08f391]{display:block}.steal-section[data-v-4c08f391]{margin-bottom:20px;display:flex;gap:10px;justify-content:center;flex-wrap:wrap}.steal-toggle-btn[data-v-4c08f391]{padding:8px 16px;background:rgba(0,0,0,.2);border:1px solid var(--border-section);border-radius:6px;color:var(--text-main);cursor:pointer;font-size:.9em;transition:all .2s ease}.steal-toggle-btn[data-v-4c08f391]:hover{background:rgba(200,155,60,.1);color:var(--primary-color)}.steal-toggle-btn.active[data-v-4c08f391]{background:var(--primary-color);color:var(--bg-panel);border-color:var(--primary-color);box-shadow:0 0 8px var(--glow-color)}.steal-btn[data-v-4c08f391]{padding:8px 16px;background:var(--primary-color);color:var(--bg-panel);border:none;border-radius:6px;cursor:pointer;font-size:.9em;transition:all .2s ease}.steal-btn[data-v-4c08f391]:hover:not(:disabled){background:var(--glow-color);box-shadow:0 0 8px var(--glow-color)}.steal-btn[data-v-4c08f391]:disabled{background:rgba(100,100,100,.5);cursor:not-allowed;opacity:.6}.item-checkbox[data-v-4c08f391]{margin-right:8px;accent-color:var(--primary-color)}.checkbox-label[data-v-4c08f391]{cursor:pointer;display:flex;align-items:center;width:100%;gap:8px}.item-with-checkbox[data-v-4c08f391]{display:flex;align-items:center;margin-bottom:4px}
.music-player-container[data-v-425d2618]{display:flex;flex-direction:column;gap:15px;width:100%;height:100%;min-height:400px}.music-controls[data-v-425d2618]{display:flex;justify-content:center;align-items:center;gap:15px;padding:15px;background:var(--bg-section);border-radius:8px;border:1px solid var(--border-section)}.music-btn[data-v-425d2618]{background:var(--primary-color);color:#000;border:2px solid var(--primary-color);border-radius:50%;width:50px;height:50px;display:flex;align-items:center;justify-content:center;cursor:pointer;font-size:1.2em;transition:all .3s ease;position:relative;overflow:hidden}.music-btn[data-v-425d2618]:hover:not(:disabled){background:var(--glow-color);transform:scale(1.1);box-shadow:0 0 15px var(--glow-color)}.music-btn[data-v-425d2618]:active:not(:disabled){transform:scale(0.95)}.music-btn[data-v-425d2618]:disabled{opacity:.5;cursor:not-allowed}.music-btn.play-btn[data-v-425d2618]{width:60px;height:60px;font-size:1.5em;background:var(--accent-color);border-color:var(--accent-color)}.music-btn.play-btn.playing[data-v-425d2618]{animation:pulse-playing-425d2618 1.5s ease-in-out infinite}.music-btn.shuffle-btn.active[data-v-425d2618],.music-btn.repeat-btn.active[data-v-425d2618],.music-btn.volume-btn.muted[data-v-425d2618],.music-btn.mode-btn[data-v-425d2618]{background:var(--primary-color);border-color:var(--primary-color);color:#000}.music-btn.shuffle-btn.active[data-v-425d2618]:hover:not(:disabled),.music-btn.repeat-btn.active[data-v-425d2618]:hover:not(:disabled),.music-btn.volume-btn.muted[data-v-425d2618]:hover:not(:disabled),.music-btn.mode-btn[data-v-425d2618]:hover:not(:disabled){background:var(--glow-color);border-color:var(--glow-color);box-shadow:0 0 15px var(--glow-color)}@keyframes pulse-playing-425d2618{0%,100%{transform:scale(1)}50%{transform:scale(1.05)}}.current-track-info[data-v-425d2618]{background:var(--bg-section);border:1px solid var(--border-section);border-radius:8px;padding:15px;text-align:center}.track-title[data-v-425d2618]{font-size:1.3em;font-weight:bold;color:var(--text-header);margin-bottom:5px;text-shadow:0 0 8px var(--glow-color)}.track-artist[data-v-425d2618]{font-size:1em;color:var(--text-main);opacity:.8;margin-bottom:10px}.progress-container[data-v-425d2618]{margin-bottom:10px}.music-progress[data-v-425d2618]{margin-bottom:5px}.music-fill[data-v-425d2618]{background:linear-gradient(90deg,var(--primary-color),var(--accent-color));transition:width .3s ease}.time-display[data-v-425d2618]{display:flex;justify-content:space-between;font-size:.9em;color:var(--text-main);opacity:.8}.entry-switcher[data-v-425d2618]{background:var(--bg-section);border:1px solid var(--border-section);border-radius:8px;padding:12px;margin-bottom:15px}.entry-selector[data-v-425d2618]{display:flex;align-items:center;gap:10px}.entry-label[data-v-425d2618]{font-size:.9em;color:var(--text-main);font-weight:500}.entry-select[data-v-425d2618]{background:var(--bg-card);border:1px solid var(--border-section);border-radius:6px;padding:6px 10px;color:var(--text-main);font-size:.9em;min-width:120px;cursor:pointer}.entry-select[data-v-425d2618]:focus{outline:none;border-color:var(--primary-color);box-shadow:0 0 0 2px rgba(102,126,234,.2)}.entry-select option[data-v-425d2618]{background:var(--bg-card);color:var(--text-main)}.playlist-container[data-v-425d2618]{background:var(--bg-section);border:1px solid var(--border-section);border-radius:8px;padding:15px;flex:1;min-height:200px;max-height:300px}.playlist-title[data-v-425d2618]{font-size:1.2em;color:var(--text-header);margin-bottom:15px;text-align:center;text-shadow:0 0 8px var(--glow-color)}.playlist[data-v-425d2618]{display:flex;flex-direction:column;gap:8px;overflow-y:auto;max-height:100%}.playlist-item[data-v-425d2618]{display:flex;justify-content:space-between;align-items:center;padding:10px 12px;background:var(--bg-card);border:1px solid var(--border-section);border-radius:6px;cursor:pointer;transition:all .3s ease}.playlist-item[data-v-425d2618]:hover{background:var(--bg-card);border-color:var(--primary-color);transform:translateY(-2px);box-shadow:0 4px 8px rgba(0,0,0,.2)}.playlist-item.active[data-v-425d2618]{background:var(--primary-color);border-color:var(--primary-color);color:#000;box-shadow:0 0 15px var(--glow-color)}.track-info[data-v-425d2618]{flex:1}.track-duration[data-v-425d2618]{font-size:.9em;color:var(--text-main);opacity:.7;margin-left:15px}.spectrum-container[data-v-425d2618]{display:flex;align-items:flex-end;justify-content:center;gap:2px;height:80px;margin-top:15px;padding:10px;background:rgba(0,0,0,.2);border-radius:8px;border:1px solid rgba(102,126,234,.3)}.spectrum-bar[data-v-425d2618]{width:6px;min-height:4px;border-radius:3px;transition:height .1s ease-out;box-shadow:0 0 4px currentColor}
.npc-select-overlay[data-v-6fef1136]{position:fixed;top:0;left:0;right:0;bottom:0;background:rgba(0,0,0,.3);z-index:1000;display:flex;align-items:center;justify-content:center}.npc-select-menu[data-v-6fef1136]{background:var(--bg-panel);border:2px solid var(--primary-color);border-radius:8px;box-shadow:0 4px 20px rgba(0,0,0,.5);min-width:200px;max-width:300px;z-index:1001}.npc-select-header[data-v-6fef1136]{padding:12px 16px;border-bottom:1px solid var(--border-section);background:var(--bg-section)}.npc-select-header h4[data-v-6fef1136]{margin:0;color:var(--text-header);font-size:1.1em;font-weight:bold}.npc-select-content[data-v-6fef1136]{padding:8px 0;max-height:300px;overflow-y:auto}.npc-select-content .npc-list .npc-option[data-v-6fef1136]{display:flex;align-items:center;justify-content:space-between;padding:10px 16px;cursor:pointer;transition:background-color .2s ease}.npc-select-content .npc-list .npc-option[data-v-6fef1136]:hover{background:var(--bg-card)}.npc-select-content .npc-list .npc-option .npc-name[data-v-6fef1136]{color:var(--text-main);font-weight:500}.npc-select-content .npc-list .npc-option .npc-location[data-v-6fef1136]{color:var(--text-secondary);font-size:.9em}
.map-view[data-v-1c7379ce]{display:flex;flex-direction:column;height:100%;gap:10px;font-family:"Microsoft YaHei","SimHei","é»‘ä½“",sans-serif;font-size:13px;color:var(--text-main,#ecf0f1);min-height:600px}.map-title-bar[data-v-1c7379ce]{display:flex;justify-content:space-between;align-items:flex-start;padding:12px;background:rgba(0,0,0,.1);border-radius:6px;margin-bottom:8px}.title-section[data-v-1c7379ce]{display:flex;flex-direction:column;gap:6px;flex:1}.map-title[data-v-1c7379ce]{margin:0;font-size:18px;font-weight:600;color:var(--text-main,#ecf0f1)}.current-location-compact[data-v-1c7379ce]{display:flex;align-items:center;gap:8px;font-size:14px;color:var(--text-main,#ecf0f1)}.current-location-compact .current-location-icon[data-v-1c7379ce]{font-size:16px}.current-location-compact .current-location-name[data-v-1c7379ce]{font-weight:600;color:#007bff}.current-location-compact .current-location-coords[data-v-1c7379ce]{color:var(--text-secondary,#bdc3c7);font-size:12px}.current-location-compact .current-location-container[data-v-1c7379ce],.current-location-compact .current-location-floor[data-v-1c7379ce]{color:var(--text-secondary,#bdc3c7);font-size:12px}.map-toolbar[data-v-1c7379ce]{display:flex;gap:8px;padding:8px;background:rgba(0,0,0,.1);border-radius:6px;flex-wrap:wrap}.map-btn[data-v-1c7379ce]{padding:6px 12px;border:none;border-radius:4px;cursor:pointer;font-size:12px;font-weight:500;transition:all .2s ease}.map-btn[data-v-1c7379ce]:hover{transform:translateY(-1px);box-shadow:0 2px 8px rgba(0,0,0,.2)}.map-btn.refresh-btn[data-v-1c7379ce]{background:#007bff;color:#fff}.map-btn.clear-btn[data-v-1c7379ce]{background:#dc3545;color:#fff}.map-btn.import-btn[data-v-1c7379ce]{background:#17a2b8;color:#fff}.map-btn.export-btn[data-v-1c7379ce]{background:#28a745;color:#fff}.map-content[data-v-1c7379ce]{display:flex;gap:10px;min-height:0;flex:0 0 auto;height:350px}.view-container[data-v-1c7379ce]{display:flex;gap:10px;width:100%;height:100%}.map-fullscreen-container[data-v-1c7379ce]{position:absolute;top:0;left:0;right:0;bottom:0;background:rgba(0,0,0,.9);z-index:1000}.map-visualization-fullscreen[data-v-1c7379ce]{display:flex;flex-direction:column;height:100%;padding:20px;gap:15px}.location-list-panel[data-v-1c7379ce],.location-detail-panel[data-v-1c7379ce]{flex:1;background:rgba(0,0,0,.05);border-radius:6px;padding:12px;display:flex;flex-direction:column;min-height:200px;max-height:400px;overflow-y:auto;scrollbar-width:thin;scrollbar-color:var(--primaryColor,#c89b3c) rgba(0,0,0,.2);width:100%;box-sizing:border-box}.location-detail-panel[data-v-1c7379ce]::-webkit-scrollbar{width:6px}.location-detail-panel[data-v-1c7379ce]::-webkit-scrollbar-track{background:rgba(0,0,0,.2);border-radius:3px}.location-detail-panel[data-v-1c7379ce]::-webkit-scrollbar-thumb{background-color:var(--primaryColor,#c89b3c);border-radius:3px}.panel-title[data-v-1c7379ce]{margin:0;font-size:14px;font-weight:600;color:var(--text-main,#ecf0f1)}.panel-title-container[data-v-1c7379ce]{display:flex;justify-content:space-between;align-items:center;margin-bottom:12px}.back-to-list-btn[data-v-1c7379ce]{background:#007bff;color:#fff;border:none;border-radius:4px;padding:2px 6px;cursor:pointer;font-size:11px}.location-tree[data-v-1c7379ce]{flex:1;overflow-y:auto;display:flex;flex-direction:column;gap:8px;font-family:"Microsoft YaHei","SimHei","é»‘ä½“",sans-serif;font-size:13px;color:var(--text-main,#ecf0f1);max-height:300px}.tree-node[data-v-1c7379ce]{display:flex;flex-direction:column}.tree-children[data-v-1c7379ce]{margin-top:4px}.expand-btn[data-v-1c7379ce]{width:16px;text-align:center;color:var(--text-secondary,#bdc3c7);cursor:pointer;-webkit-user-select:none;user-select:none;font-size:12px;margin-right:4px}.expand-btn[data-v-1c7379ce]:hover{color:var(--text-main,#ecf0f1)}.child-expand[data-v-1c7379ce]{font-size:10px}.expand-spacer[data-v-1c7379ce],.child-spacer[data-v-1c7379ce],.grandchild-spacer[data-v-1c7379ce]{width:16px}.child-level[data-v-1c7379ce]{background:rgba(0,0,0,.1)}.grandchild-level[data-v-1c7379ce]{background:rgba(0,0,0,.05)}.deep-level[data-v-1c7379ce]{background:rgba(0,0,0,.03);border-left:2px solid rgba(0,123,255,.1)}.floor-indicator[data-v-1c7379ce]{color:var(--text-secondary,#bdc3c7);font-size:11px;background:rgba(0,0,0,.1);padding:1px 4px;border-radius:3px;margin-left:8px}.location-item[data-v-1c7379ce]{padding:10px;background:rgba(0,0,0,.2);border:1px solid hsla(0,0%,100%,.1);border-radius:6px;cursor:pointer;transition:all .2s ease;position:relative;word-wrap:break-word;overflow-wrap:break-word}.location-item[data-v-1c7379ce]:hover{background:rgba(0,0,0,.3);transform:translateY(-1px);box-shadow:0 2px 8px rgba(0,0,0,.2)}.location-item.selected[data-v-1c7379ce]{background:rgba(0,123,255,.2);border-color:#007bff;box-shadow:0 0 0 2px rgba(0,123,255,.3)}.location-header[data-v-1c7379ce]{display:flex;align-items:center;gap:8px;margin-bottom:4px}.location-icon[data-v-1c7379ce]{font-size:16px}.location-name[data-v-1c7379ce]{font-weight:600;color:var(--text-main,#ecf0f1);flex:1;word-break:break-word;line-height:1.3}.location-coords[data-v-1c7379ce]{font-size:11px;color:var(--text-main,#ecf0f1);background:rgba(0,0,0,.1);padding:2px 6px;border-radius:3px;opacity:.9;white-space:nowrap;flex-shrink:0}.location-desc[data-v-1c7379ce]{font-size:12px;color:var(--text-main,#ecf0f1);line-height:1.4;opacity:.8;margin-bottom:4px;word-wrap:break-word;overflow-wrap:break-word}@media (max-width:768px){.location-desc[data-v-1c7379ce]{display:none}}.location-actions[data-v-1c7379ce]{position:absolute;bottom:8px;right:8px;max-width:60px}@media (max-width:768px){.location-actions[data-v-1c7379ce]{position:absolute;bottom:6px;right:6px;max-width:40px}}.location-container[data-v-1c7379ce]{font-size:11px;color:var(--text-secondary,#bdc3c7);display:flex;align-items:center;gap:4px}.container-label[data-v-1c7379ce]{opacity:.7}.container-name[data-v-1c7379ce]{color:var(--text-main,#ecf0f1);font-weight:500}.container-floor[data-v-1c7379ce]{color:var(--text-secondary,#bdc3c7);background:rgba(0,0,0,.1);padding:1px 4px;border-radius:3px;font-size:10px}.empty-state[data-v-1c7379ce]{flex:1;display:flex;flex-direction:column;align-items:center;justify-content:center;text-align:center;color:#7f8c8d}.empty-icon[data-v-1c7379ce]{font-size:48px;margin-bottom:12px;opacity:.5}.empty-text[data-v-1c7379ce]{font-size:16px;font-weight:500;margin-bottom:4px}.empty-hint[data-v-1c7379ce]{font-size:12px}.location-detail[data-v-1c7379ce]{display:flex;flex-direction:column;gap:12px}.detail-header[data-v-1c7379ce]{display:flex;align-items:center;gap:8px;padding-bottom:8px;border-bottom:1px solid rgba(0,0,0,.1)}.detail-icon[data-v-1c7379ce]{font-size:20px}.detail-name[data-v-1c7379ce]{font-size:18px;font-weight:600;color:var(--text-main,#ecf0f1)}.detail-content[data-v-1c7379ce]{display:flex;flex-direction:column;gap:8px}.detail-row[data-v-1c7379ce]{display:flex;align-items:flex-start;gap:8px}.detail-label[data-v-1c7379ce]{font-weight:500;color:var(--text-main,#ecf0f1);min-width:60px;flex-shrink:0;opacity:.9}.detail-value[data-v-1c7379ce]{color:var(--text-main,#ecf0f1);line-height:1.4;word-wrap:break-word;overflow-wrap:break-word}.detail-floor[data-v-1c7379ce]{color:var(--text-secondary,#bdc3c7);background:rgba(0,0,0,.1);padding:1px 4px;border-radius:3px;font-size:11px;margin-left:8px}.no-selection[data-v-1c7379ce]{flex:1;display:flex;flex-direction:column;align-items:center;justify-content:center;text-align:center;color:#7f8c8d}.no-selection-icon[data-v-1c7379ce]{font-size:32px;margin-bottom:8px}.no-selection-text[data-v-1c7379ce]{font-size:14px}.map-stats[data-v-1c7379ce]{display:flex;gap:20px;flex-wrap:wrap}.current-location-display[data-v-1c7379ce]{padding:8px 12px;background:rgba(0,123,255,.1);border:1px solid rgba(0,123,255,.3);border-radius:6px;font-size:13px}.current-location-header[data-v-1c7379ce]{display:flex;align-items:center;gap:6px;margin-bottom:4px}.current-location-icon[data-v-1c7379ce]{font-size:14px}.current-location-label[data-v-1c7379ce]{color:var(--text-secondary,#bdc3c7);font-weight:500}.current-location-name[data-v-1c7379ce]{color:var(--text-main,#ecf0f1);font-weight:600}.current-location-coords[data-v-1c7379ce]{color:var(--text-secondary,#bdc3c7);font-size:11px;background:rgba(0,0,0,.1);padding:1px 4px;border-radius:3px}.current-location-details[data-v-1c7379ce]{display:flex;gap:12px;font-size:12px;color:var(--text-secondary,#bdc3c7)}.current-location-container[data-v-1c7379ce],.current-location-floor[data-v-1c7379ce]{display:flex;align-items:center;gap:4px}.map-stats[data-v-1c7379ce]{display:flex;gap:20px;padding:8px 12px;background:rgba(0,0,0,.05);border-radius:6px;font-size:12px;flex-wrap:wrap}.stats-item[data-v-1c7379ce]{display:flex;align-items:center;gap:4px}.stats-label[data-v-1c7379ce]{color:var(--text-secondary,#bdc3c7)}@media (max-width:768px){.map-visualization-fullscreen[data-v-1c7379ce]{padding:0;position:relative}.map-controls-top[data-v-1c7379ce],.map-controls-bottom[data-v-1c7379ce],.vertical-ruler-independent[data-v-1c7379ce],.vertical-ruler-labels[data-v-1c7379ce],.horizontal-ruler-independent[data-v-1c7379ce]{display:none}.independent-ruler-layout[data-v-1c7379ce]{position:absolute;top:0;left:0;width:100%;height:100%;display:flex}.map-canvas-independent[data-v-1c7379ce]{flex:1;width:100%;height:100%}.map-canvas[data-v-1c7379ce]{width:100%;height:100%;display:block}.mobile-map-controls[data-v-1c7379ce]{display:flex;flex-direction:column;gap:10px;position:absolute;bottom:15px;right:15px;z-index:10}.map-btn-icon[data-v-1c7379ce]{width:48px;height:48px;border-radius:50%;border:none;background:rgba(26,26,46,.8);color:#fff;font-size:24px;display:flex;align-items:center;justify-content:center;cursor:pointer;box-shadow:0 2px 8px rgba(0,0,0,.3);transition:background .2s}.map-btn-icon[data-v-1c7379ce]:active{background:rgba(40,40,60,.9)}.map-content[data-v-1c7379ce]{flex:1;height:auto}.view-container[data-v-1c7379ce]{flex-direction:column;height:100%}.location-list-panel[data-v-1c7379ce],.location-detail-panel[data-v-1c7379ce]{width:100%;max-height:none;height:100%}}.stats-value[data-v-1c7379ce]{font-weight:600;color:var(--text-main,#ecf0f1)}.breadcrumb-nav[data-v-1c7379ce]{display:flex;justify-content:space-between;align-items:center;padding:12px;background:rgba(0,0,0,.1);border-radius:6px;margin-bottom:8px;font-size:14px}.breadcrumb[data-v-1c7379ce]{display:flex;align-items:center;flex-wrap:wrap;gap:4px}.breadcrumb-item[data-v-1c7379ce]{display:flex;align-items:center;padding:4px 8px;border-radius:4px;cursor:pointer;transition:all .2s ease;color:var(--text-secondary,#bdc3c7)}.breadcrumb-item[data-v-1c7379ce]:hover{background:rgba(0,123,255,.1);color:#007bff}.breadcrumb-item.home[data-v-1c7379ce]{font-weight:600;color:var(--text-main,#ecf0f1)}.breadcrumb-item.active[data-v-1c7379ce]{background:rgba(0,123,255,.2);color:#007bff;font-weight:600}.breadcrumb-separator[data-v-1c7379ce]{margin:0 8px;color:var(--text-secondary,#bdc3c7)}.breadcrumb-icon[data-v-1c7379ce]{margin-right:4px}.breadcrumb-name[data-v-1c7379ce]{font-weight:500}.nav-actions[data-v-1c7379ce]{display:flex;gap:8px}.nav-btn[data-v-1c7379ce]{padding:6px 12px;border:none;border-radius:4px;cursor:pointer;font-size:12px;font-weight:500;transition:all .2s ease}.nav-btn.back-btn[data-v-1c7379ce]{background:#6c757d;color:#fff}.nav-btn.back-btn[data-v-1c7379ce]:hover:not(:disabled){background:#5a6268;transform:translateY(-1px)}.nav-btn.back-btn[data-v-1c7379ce]:disabled{background:#adb5bd;cursor:not-allowed;opacity:.6}.nav-btn.exit-indoor-btn[data-v-1c7379ce]{background:#17a2b8;color:#fff}.nav-btn.exit-indoor-btn[data-v-1c7379ce]:hover{background:#138496;transform:translateY(-1px)}.location-grid-panel[data-v-1c7379ce]{flex:1;background:rgba(0,0,0,.05);border-radius:6px;padding:12px;display:flex;flex-direction:column;min-height:200px;max-height:400px}.location-grid[data-v-1c7379ce]{flex:1;display:grid;grid-template-columns:repeat(auto-fill,minmax(200px,1fr));gap:12px;overflow-y:auto;padding:4px}.location-card[data-v-1c7379ce]{background:rgba(0,0,0,.2);border:1px solid hsla(0,0%,100%,.1);border-radius:6px;padding:8px;cursor:pointer;transition:all .2s ease;display:flex;flex-direction:column;gap:4px;min-height:80px;max-height:120px}.location-card[data-v-1c7379ce]:hover{background:rgba(0,0,0,.3);transform:translateY(-1px);box-shadow:0 2px 8px rgba(0,0,0,.2);border-color:rgba(0,123,255,.3)}.location-card.has-children[data-v-1c7379ce]{border-left:3px solid #007bff}.card-header[data-v-1c7379ce]{display:flex;align-items:center;justify-content:space-between;gap:8px}.card-icon[data-v-1c7379ce]{font-size:18px;flex-shrink:0}.card-name[data-v-1c7379ce]{font-weight:600;color:var(--text-main,#ecf0f1);flex:1;font-size:14px}.child-indicator[data-v-1c7379ce]{font-size:11px;color:var(--text-secondary,#bdc3c7);background:rgba(0,123,255,.1);padding:2px 6px;border-radius:10px;white-space:nowrap}.card-coords[data-v-1c7379ce]{font-size:12px;color:var(--text-secondary,#bdc3c7);background:rgba(0,0,0,.1);padding:2px 6px;border-radius:3px;align-self:flex-start}.card-desc[data-v-1c7379ce]{font-size:12px;color:var(--text-main,#ecf0f1);line-height:1.4;opacity:.8;flex:1}.card-floor[data-v-1c7379ce]{font-size:11px;color:var(--text-secondary,#bdc3c7);background:rgba(0,0,0,.1);padding:2px 6px;border-radius:3px;align-self:flex-start}.empty-level[data-v-1c7379ce]{flex:1;display:flex;flex-direction:column;align-items:center;justify-content:center;text-align:center;color:#7f8c8d}.empty-level-icon[data-v-1c7379ce]{font-size:48px;margin-bottom:12px;opacity:.5}.empty-level-text[data-v-1c7379ce]{font-size:16px;font-weight:500;margin-bottom:4px}.level-count[data-v-1c7379ce]{color:var(--text-secondary,#bdc3c7);font-size:12px;margin-left:8px}.detail-actions[data-v-1c7379ce]{margin-top:12px;padding-top:12px;border-top:1px solid rgba(0,0,0,.1);display:flex;flex-direction:column;gap:8px}@media (max-width:768px){.detail-actions[data-v-1c7379ce]{flex-direction:row;flex-wrap:wrap;gap:6px}}.action-btn[data-v-1c7379ce]{width:100%;padding:8px 12px;border:none;border-radius:4px;cursor:pointer;font-size:12px;font-weight:500;transition:all .2s ease;background:#007bff;color:#fff}.action-btn[data-v-1c7379ce]:hover{background:#0056b3;transform:translateY(-1px)}.action-btn.enter-btn[data-v-1c7379ce]{background:var(--primaryColor,#28a745);height:32px}.action-btn.enter-btn[data-v-1c7379ce]:hover{background:var(--primaryColor,#218838);filter:brightness(0.9)}.action-btn.travel-btn[data-v-1c7379ce]{background:#17a2b8;height:32px}.action-btn.travel-btn[data-v-1c7379ce]:hover{background:#138496;filter:brightness(0.9)}.card-actions[data-v-1c7379ce]{margin-top:8px;display:flex;justify-content:flex-end}.enter-btn[data-v-1c7379ce]{padding:4px 8px;border:none;border-radius:3px;cursor:pointer;font-size:11px;font-weight:500;transition:all .2s ease;background:#007bff;color:#fff}.enter-btn[data-v-1c7379ce]:hover{background:#0056b3;transform:translateY(-1px)}.enter-btn-small[data-v-1c7379ce]{padding:2px 6px;border:none;border-radius:3px;cursor:pointer;font-size:10px;font-weight:500;transition:all .2s ease;background:var(--primaryColor,#007bff);color:#fff;text-align:center;white-space:nowrap}.enter-btn-small[data-v-1c7379ce]:hover{background:var(--primaryColor,#0056b3);filter:brightness(0.9);transform:translateY(-1px)}.view-tabs[data-v-1c7379ce]{display:flex;margin-bottom:8px;background:rgba(0,0,0,.1);border-radius:6px;padding:4px}.tab-btn[data-v-1c7379ce]{flex:1;padding:8px 16px;border:none;border-radius:4px;cursor:pointer;font-size:14px;font-weight:500;transition:all .2s ease;background:rgba(0,0,0,0);color:var(--text-secondary,#bdc3c7)}.tab-btn[data-v-1c7379ce]:hover{background:rgba(0,123,255,.1);color:#007bff}.tab-btn.active[data-v-1c7379ce]{background:var(--primaryColor,#007bff) !important;color:#fff !important}.map-visualization-panel[data-v-1c7379ce]{flex:1;background:rgba(0,0,0,.05);border-radius:6px;padding:12px;display:flex;flex-direction:column;min-height:300px}.map-controls[data-v-1c7379ce]{display:flex;gap:16px;margin-bottom:12px;flex-wrap:wrap;align-items:center}.control-group[data-v-1c7379ce]{display:flex;align-items:center;gap:8px}.control-label[data-v-1c7379ce]{font-size:12px;color:var(--text-secondary,#bdc3c7);font-weight:500}.scale-slider[data-v-1c7379ce]{width:100px}.scale-value[data-v-1c7379ce]{font-size:12px;color:var(--text-main,#ecf0f1);min-width:35px;text-align:center}.control-btn[data-v-1c7379ce]{padding:6px 12px;border:none;border-radius:4px;cursor:pointer;font-size:12px;font-weight:500;transition:all .2s ease;background:#6c757d;color:#fff}.control-btn[data-v-1c7379ce]:hover{background:#5a6268;transform:translateY(-1px)}.control-btn.exit-btn[data-v-1c7379ce]{background:#dc3545}.control-btn.exit-btn[data-v-1c7379ce]:hover{background:#c82333}.control-btn.jump-btn[data-v-1c7379ce]{background:#28a745;width:100%}.control-btn.jump-btn[data-v-1c7379ce]:hover{background:#218838}.map-canvas-fullscreen[data-v-1c7379ce]{flex:1;position:relative;border-radius:8px;overflow:hidden;min-height:400px;box-shadow:0 0 50px rgba(0,0,0,.5)}.map-canvas[data-v-1c7379ce]{width:100%;height:100%;cursor:grab}.map-canvas[data-v-1c7379ce]:active{cursor:grabbing}.map-legend[data-v-1c7379ce]{position:absolute;top:10px;right:10px;background:rgba(0,0,0,.8);padding:8px;border-radius:4px;font-size:11px}.legend-item[data-v-1c7379ce]{display:flex;align-items:center;gap:6px;margin-bottom:4px}.legend-item[data-v-1c7379ce]:last-child{margin-bottom:0}.legend-color[data-v-1c7379ce]{width:12px;height:12px;border-radius:50%}.legend-text[data-v-1c7379ce]{color:#fff;font-size:11px}.map-control-panel[data-v-1c7379ce]{width:200px;background:rgba(0,0,0,.05);border-radius:6px;padding:12px;display:flex;flex-direction:column;gap:16px}.control-section[data-v-1c7379ce]{display:flex;flex-direction:column;gap:8px}.section-title[data-v-1c7379ce]{font-size:12px;font-weight:600;color:var(--text-main,#ecf0f1);margin:0}.layer-controls[data-v-1c7379ce]{display:flex;flex-direction:column;gap:6px}.layer-checkbox[data-v-1c7379ce]{display:flex;align-items:center;gap:8px;font-size:12px;color:var(--text-main,#ecf0f1);cursor:pointer}.layer-checkbox input[type=checkbox][data-v-1c7379ce]{display:none}.layer-checkbox .checkmark[data-v-1c7379ce]{width:14px;height:14px;border:1px solid var(--text-secondary,#bdc3c7);border-radius:2px;position:relative;transition:all .2s ease}.layer-checkbox .checkmark[data-v-1c7379ce]::after{content:"";position:absolute;left:4px;top:1px;width:4px;height:8px;border:solid #fff;border-width:0 2px 2px 0;transform:rotate(45deg);opacity:0;transition:opacity .2s ease}.layer-checkbox input:checked+.checkmark[data-v-1c7379ce]{background:#007bff;border-color:#007bff}.layer-checkbox input:checked+.checkmark[data-v-1c7379ce]::after{opacity:1}.current-pos-display[data-v-1c7379ce]{display:flex;flex-direction:column;gap:4px;font-size:12px}.pos-item[data-v-1c7379ce]{display:flex;gap:8px}.pos-label[data-v-1c7379ce]{color:var(--text-secondary,#bdc3c7);font-weight:500;min-width:40px}.pos-value[data-v-1c7379ce]{color:var(--text-main,#ecf0f1)}.no-position[data-v-1c7379ce]{font-size:12px;color:var(--text-secondary,#bdc3c7);font-style:italic}.coord-jump-controls[data-v-1c7379ce]{display:flex;flex-direction:column;gap:8px}.coord-inputs[data-v-1c7379ce]{display:flex;gap:6px}.coord-input[data-v-1c7379ce]{flex:1;padding:6px 8px;border:1px solid var(--text-secondary,#bdc3c7);border-radius:4px;background:rgba(0,0,0,.2);color:var(--text-main,#ecf0f1);font-size:12px;text-align:center}.coord-input[data-v-1c7379ce]:focus{outline:none;border-color:#007bff;box-shadow:0 0 0 2px rgba(0,123,255,.25)}.coord-input[data-v-1c7379ce]::placeholder{color:var(--text-secondary,#bdc3c7)}.independent-ruler-layout[data-v-1c7379ce]{position:relative;flex:1;height:100%}.vertical-ruler-independent[data-v-1c7379ce]{position:absolute;left:0;top:32px;width:32px;height:calc(100% - 32px);background:rgba(0,0,0,.1);border-radius:4px;padding:6px 3px;overflow:hidden;z-index:3}.vertical-ruler-labels[data-v-1c7379ce]{position:absolute;left:36px;top:32px;width:16px;height:calc(100% - 32px);display:flex;flex-direction:column;justify-content:space-between;align-items:center;pointer-events:none;z-index:4;font-size:10px;color:var(--text-secondary,#bdc3c7)}.horizontal-ruler-independent[data-v-1c7379ce]{position:absolute;top:0;left:32px;right:0;height:32px;background:rgba(0,0,0,.1);border-radius:4px;padding:3px 6px;z-index:2}.map-canvas-independent[data-v-1c7379ce]{position:absolute;top:32px;left:32px;right:0;bottom:0;border-radius:8px;overflow:hidden;box-shadow:0 0 50px rgba(0,0,0,.5);z-index:1}.horizontal-ruler[data-v-1c7379ce]{position:relative;height:40px;background:rgba(0,0,0,.1);border-radius:4px;padding:4px 8px;margin-bottom:8px}.ruler-slider[data-v-1c7379ce]{-webkit-appearance:none;appearance:none;background:rgba(0,0,0,0);cursor:pointer;position:relative;z-index:5}.ruler-slider[data-v-1c7379ce]::-webkit-slider-thumb{-webkit-appearance:none;appearance:none;width:16px;height:16px;border-radius:50%;background:#007bff;border:2px solid #fff;box-shadow:0 2px 4px rgba(0,0,0,.2);cursor:pointer;-webkit-transition:all .2s ease;transition:all .2s ease;z-index:10}.ruler-slider[data-v-1c7379ce]::-webkit-slider-thumb:hover{background:#0056b3;transform:scale(1.1)}.ruler-slider[data-v-1c7379ce]::-webkit-slider-track{background:rgba(0,0,0,0);height:4px;border-radius:2px}.ruler-slider.vertical[data-v-1c7379ce]{transform:rotate(90deg);transform-origin:center;width:100%;height:20px;margin:auto;position:relative}.ruler-slider.horizontal[data-v-1c7379ce]{width:100%;height:20px}.ruler-slider.vertical-rotated[data-v-1c7379ce]{width:20px;height:100%;writing-mode:vertical-lr;direction:rtl;margin:auto}.vertical-slider-container[data-v-1c7379ce]{position:relative;width:100%;height:100%;background:hsla(0,0%,100%,.1);border-radius:4px;cursor:pointer}.vertical-slider-thumb[data-v-1c7379ce]{position:absolute;left:0;width:100%;height:20px;background:#007bff;border:2px solid #fff;border-radius:10px;cursor:pointer;box-shadow:0 2px 4px rgba(0,0,0,.2);transition:background .2s ease}.vertical-slider-thumb[data-v-1c7379ce]:hover{background:#0056b3}.ruler-labels[data-v-1c7379ce]{display:flex;justify-content:space-between;font-size:10px;color:var(--text-secondary,#bdc3c7);margin-top:4px}.vertical-ruler .ruler-labels[data-v-1c7379ce]{display:none}.horizontal-ruler .ruler-labels[data-v-1c7379ce]{position:absolute;top:0;left:8px;right:8px;height:100%;display:flex;justify-content:space-between;align-items:center;pointer-events:none}.ruler-label[data-v-1c7379ce]{font-size:10px;color:var(--text-secondary,#bdc3c7);text-align:center;z-index:3;position:relative}.map-and-horizontal[data-v-1c7379ce]{display:flex;flex-direction:column;flex:1}.ruler-labels-vertical[data-v-1c7379ce]{position:absolute;top:10px;bottom:10px;left:4px;right:4px;display:flex;flex-direction:column;justify-content:space-between;align-items:center;pointer-events:none;z-index:5}@media (max-width:768px){.map-view[data-v-1c7379ce]{min-height:600px}.map-title-bar[data-v-1c7379ce]{flex-direction:column;gap:12px;align-items:stretch}.title-section[data-v-1c7379ce]{flex-direction:column;gap:8px}.map-toolbar[data-v-1c7379ce]{justify-content:center;flex-wrap:wrap;gap:6px}.map-btn[data-v-1c7379ce]{padding:4px 8px;font-size:11px}.map-stats[data-v-1c7379ce]{flex-wrap:wrap;gap:8px;padding:8px 12px;font-size:12px}.stats-item[data-v-1c7379ce]{flex:1 1 auto;min-width:100px}.breadcrumb-nav[data-v-1c7379ce]{flex-direction:column;gap:8px;align-items:stretch;padding:8px}.nav-actions[data-v-1c7379ce]{justify-content:center}.nav-btn[data-v-1c7379ce]{padding:4px 8px;font-size:11px}.map-content[data-v-1c7379ce]{flex-direction:column;height:450px}.location-list-panel[data-v-1c7379ce]{flex:none;height:150px;max-height:150px;min-height:130px;overflow-x:hidden;overflow-y:auto;box-sizing:border-box;padding:6px}.location-detail-panel[data-v-1c7379ce]{flex:none;height:250px;max-height:250px;min-height:200px;overflow-x:hidden;overflow-y:auto;box-sizing:border-box;padding:6px}.location-tree[data-v-1c7379ce]{max-height:140px;overflow-y:auto}.location-item[data-v-1c7379ce]{padding:8px;margin-bottom:6px;word-wrap:break-word;overflow-wrap:break-word;min-height:50px}.location-header[data-v-1c7379ce]{display:flex;align-items:flex-start;gap:6px;margin-bottom:4px}.location-name[data-v-1c7379ce]{font-size:13px;flex:1;word-break:break-word;line-height:1.3}.location-coords[data-v-1c7379ce]{font-size:10px;flex-shrink:0;white-space:nowrap}.location-desc[data-v-1c7379ce]{font-size:12px;line-height:1.4;word-wrap:break-word;overflow-wrap:break-word}.action-btn[data-v-1c7379ce]{padding:4px 6px;font-size:10px;align-self:flex-start}}@media (max-width:768px)and (max-width:768px){.action-btn[data-v-1c7379ce]{padding:2px 4px;font-size:9px;min-width:30px}}@media (max-width:768px){.map-fullscreen-container[data-v-1c7379ce]{position:fixed;top:0;left:0;right:0;bottom:0;z-index:1000}.map-visualization-fullscreen[data-v-1c7379ce]{padding:8px;gap:8px}.map-controls-top[data-v-1c7379ce]{flex-direction:column;gap:8px;padding:8px}.control-group[data-v-1c7379ce]{justify-content:center;flex-wrap:wrap;gap:8px}.control-label[data-v-1c7379ce]{font-size:11px}.scale-slider[data-v-1c7379ce]{width:150px}.scale-value[data-v-1c7379ce]{font-size:11px}.control-btn[data-v-1c7379ce]{padding:6px 10px;font-size:12px;min-width:60px}.map-canvas-fullscreen[data-v-1c7379ce]{min-height:350px;border-radius:6px}.map-legend[data-v-1c7379ce]{position:absolute;top:8px;right:8px;font-size:10px;padding:6px 8px;background:rgba(0,0,0,.8);border-radius:4px;max-width:120px}.legend-item[data-v-1c7379ce]{margin-bottom:3px;font-size:10px}.legend-color[data-v-1c7379ce]{width:10px;height:10px}.map-controls-bottom[data-v-1c7379ce]{flex-direction:column;gap:10px;padding:8px}.control-section[data-v-1c7379ce]{padding:8px}.section-title[data-v-1c7379ce]{font-size:12px;margin-bottom:6px}.coord-inputs[data-v-1c7379ce]{flex-direction:column;gap:6px}.coord-input[data-v-1c7379ce]{min-width:120px;padding:6px 8px;font-size:13px}.jump-btn[data-v-1c7379ce]{padding:6px 12px;font-size:12px}.layer-controls[data-v-1c7379ce]{gap:6px}.layer-checkbox[data-v-1c7379ce]{font-size:11px}.independent-ruler-layout[data-v-1c7379ce]{flex-direction:column}.vertical-ruler-independent[data-v-1c7379ce]{order:2;width:100%;height:40px;left:0;top:auto}.vertical-ruler-labels[data-v-1c7379ce]{display:none}.horizontal-ruler-independent[data-v-1c7379ce]{order:1;top:0;left:0;right:0;height:40px}.map-canvas-independent[data-v-1c7379ce]{order:3;top:40px;left:0;right:0;bottom:40px}.ruler-slider[data-v-1c7379ce]{height:24px}.ruler-slider.vertical[data-v-1c7379ce]{transform:none;width:100%;height:24px}.ruler-slider.vertical-rotated[data-v-1c7379ce]{width:100%;height:24px}.vertical-slider-thumb[data-v-1c7379ce]{height:24px}}@media (max-width:480px){.map-view[data-v-1c7379ce]{min-height:550px}.map-title[data-v-1c7379ce]{font-size:16px}.current-location-compact[data-v-1c7379ce]{font-size:12px;gap:6px}.current-location-icon[data-v-1c7379ce]{font-size:14px}.map-stats[data-v-1c7379ce]{flex-wrap:wrap;gap:6px;padding:6px 8px;font-size:11px}.stats-item[data-v-1c7379ce]{min-width:80px}.breadcrumb[data-v-1c7379ce]{font-size:12px}.breadcrumb-item[data-v-1c7379ce]{padding:3px 6px}.map-content[data-v-1c7379ce]{height:400px}.location-list-panel[data-v-1c7379ce],.location-detail-panel[data-v-1c7379ce]{height:180px;max-height:180px;padding:6px;overflow-x:hidden;overflow-y:auto;box-sizing:border-box}.panel-title[data-v-1c7379ce]{font-size:13px;margin-bottom:6px}.location-tree[data-v-1c7379ce]{max-height:120px;gap:6px;overflow-y:auto}.location-item[data-v-1c7379ce]{padding:4px;margin-bottom:3px;word-wrap:break-word;overflow-wrap:break-word;min-height:40px}.location-header[data-v-1c7379ce]{display:flex;align-items:flex-start;gap:6px;margin-bottom:4px}.location-icon[data-v-1c7379ce]{font-size:14px;flex-shrink:0}.location-name[data-v-1c7379ce]{font-size:12px;flex:1;word-break:break-word;line-height:1.3}.location-coords[data-v-1c7379ce]{font-size:9px;padding:1px 4px;flex-shrink:0;white-space:nowrap;background:rgba(0,0,0,.1);border-radius:3px;opacity:.9}.location-desc[data-v-1c7379ce]{font-size:11px;margin-bottom:2px;line-height:1.4;word-wrap:break-word;overflow-wrap:break-word}.action-btn[data-v-1c7379ce]{padding:3px 5px;font-size:9px;align-self:flex-start}}@media (max-width:480px)and (max-width:768px){.action-btn[data-v-1c7379ce]{padding:2px 4px;font-size:8px;min-width:28px}}@media (max-width:480px){.detail-content[data-v-1c7379ce]{overflow-y:auto;max-height:100px}.detail-row[data-v-1c7379ce]{margin-bottom:6px}.detail-value[data-v-1c7379ce]{word-wrap:break-word;overflow-wrap:break-word}.detail-actions[data-v-1c7379ce]{margin-top:8px;padding-top:6px}.detail-row[data-v-1c7379ce]{gap:6px}.detail-label[data-v-1c7379ce]{font-size:11px;min-width:50px}.detail-value[data-v-1c7379ce]{font-size:12px}.map-visualization-fullscreen[data-v-1c7379ce]{padding:6px;gap:6px}.map-controls-top[data-v-1c7379ce]{padding:6px}.control-group[data-v-1c7379ce]{gap:6px}.control-btn[data-v-1c7379ce]{padding:5px 8px;font-size:11px;min-width:50px}.map-canvas-fullscreen[data-v-1c7379ce]{min-height:300px}.map-legend[data-v-1c7379ce]{top:6px;right:6px;font-size:9px;padding:4px 6px;max-width:100px}.legend-item[data-v-1c7379ce]{margin-bottom:2px;font-size:9px}.legend-color[data-v-1c7379ce]{width:8px;height:8px}.map-controls-bottom[data-v-1c7379ce]{gap:8px;padding:6px}.control-section[data-v-1c7379ce]{padding:6px}.coord-inputs[data-v-1c7379ce]{gap:4px}.coord-input[data-v-1c7379ce]{min-width:100px;padding:5px 6px;font-size:12px}.jump-btn[data-v-1c7379ce]{padding:5px 10px;font-size:11px}.layer-controls[data-v-1c7379ce]{gap:4px}.layer-checkbox[data-v-1c7379ce]{font-size:10px;gap:6px}.checkmark[data-v-1c7379ce]{width:12px;height:12px}.vertical-ruler-independent[data-v-1c7379ce],.horizontal-ruler-independent[data-v-1c7379ce]{height:36px}.map-canvas-independent[data-v-1c7379ce]{top:36px;bottom:36px}.ruler-slider[data-v-1c7379ce]{height:20px}.vertical-slider-thumb[data-v-1c7379ce]{height:20px}.ruler-labels[data-v-1c7379ce]{font-size:9px}}
/*! tailwindcss v4.1.14 | MIT License | https://tailwindcss.com */:root{--bg-card:#2a231c;--card-texture:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAKCAYAAACNMs+9AAAAAXNSR0IArs4c6QAAAD5JREFUKFN1jKENADAIAsie//9n7g5W1sAIgtA54h7M47n4LpweR45zYAUkI5Oi6VEvrp/fGBsQhAEd8q23fQGWbALfWzvxjAAAAABJRU5ErkJggg==");--font-header:"Ma Shan Zheng",cursive;--font-body:"Noto Serif SC",serif;--primary-color:#c89b3c;--glow-color:rgba(255,215,0,0.6);--accent-color:#e74c3c;--bonded-color:#f472b6;--bg-panel:rgba(30,25,20,0.85);--bg-section:rgba(10,5,0,0.4);--border-section:rgba(200,155,60,0.3);--text-main:#f0e6d2;--text-header:var(--primary-color);--hp-color:#c0392b;--mp-color:#2980b9;--sta-color:#27ae60;--sd-color:#e879f9;--affection-color:#f1c40f;--bg-image:url("https://www.transparenttextures.com/patterns/paper-3.png");--title-icon-content:"";--title-icon-svg:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='currentColor'%3E%3Cpath d='M12,2A10,10,0,1,0,22,12,10,10,0,0,0,12,2Zm0,18a8,8,0,1,1,8-8A8,8,0,0,1,12,20ZM15,8H9V16h6Z'/%3E%3C/svg%3E");--wrapper-border-radius:10px}.theme-xianxia{--primary-color:#34d399;--glow-color:rgba(167,243,208,0.7);--accent-color:#f59e0b;--bonded-color:#e53e3e;--bg-panel:rgba(15,30,25,0.85);--bg-section:rgba(5,15,10,0.4);--border-section:rgba(52,211,153,0.3);--text-main:#e0f2f1;--text-header:var(--primary-color);--bg-image:url("https://www.transparenttextures.com/patterns/xv.png");--title-icon-content:"â˜¯";--title-icon-svg:none;--bg-card:#182825}.theme-minsu{--primary-color:#ef4444;--glow-color:rgba(252,165,165,0.7);--accent-color:#facc15;--bonded-color:var(--accent-color);--bg-panel:rgba(40,10,10,0.85);--bg-section:rgba(20,0,0,0.4);--border-section:rgba(239,68,68,0.3);--text-main:#fef2f2;--text-header:#fca5a5;--bg-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='80' height='80'%3E%3Cg fill='%23a11d1d' opacity='0.35'%3E%3Cpath d='M15 8 C 10 5, 5 10, 8 15 L 12 18 C 15 22, 22 20, 20 15 Z' /%3E%3Ccircle cx='50' cy='10' r='5' /%3E%3Cellipse cx='65' cy='60' rx='8' ry='4' transform='rotate(45 65 60)' /%3E%3Cpath d='M30 70 C 25 75, 35 80, 40 75 L 42 72 C 45 68, 38 65, 35 68 Z' /%3E%3Ccircle cx='10' cy='50' r='3' /%3E%3Ccircle cx='70' cy='30' r='2' /%3E%3C/g%3E%3C/svg%3E");--title-icon-content:"ğŸ®";--title-icon-svg:none;--bg-card:#3a1a1a}.theme-wuxia{--primary-color:#e5e7eb;--glow-color:rgba(255,255,255,0.3);--accent-color:#dc2626;--bonded-color:#34d399;--bg-panel:rgba(17,24,39,0.9);--bg-section:rgba(31,41,55,0.5);--border-section:rgba(229,231,235,0.3);--text-main:#f9fafb;--text-header:var(--primary-color);--bg-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='40' height='40'%3E%3Cpath d='M0 10 H15 V25 H0 V40 H30 V10 H40 V0 H10 V-10' fill='none' stroke='rgba(229, 231, 235, 0.15)' stroke-width='2'/%3E%3C/svg%3E");--title-icon-content:"";--title-icon-svg:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='currentColor'%3E%3Cpath d='M12.5,2C10.8,2,9.5,3.3,9.5,5s1.3,3,3,3,3-1.3,3-3S14.2,2,12.5,2z M12,9C7.58,9,4,12.58,4,17s3.58,8,8,8,8-3.58,8-8S16.42,9,12,9z'/%3E%3C/svg%3E");--wrapper-border-radius:2px;--bg-card:#2c3342}.theme-xuanhuan{--primary-color:#8b5cf6;--glow-color:rgba(196,181,253,0.6);--accent-color:#38bdf8;--bonded-color:var(--accent-color);--bg-panel:rgba(5,5,15,0.9);--bg-section:rgba(0,0,0,0.4);--border-section:rgba(139,92,246,0.3);--text-main:#e9d5ff;--text-header:#c4b5fd;--bg-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='100' height='100'%3E%3Crect width='100' height='100' fill='rgba(5,5,15,0)'/%3E%3Ccircle cx='10' cy='15' r='1.5' fill='rgba(233,213,255,0.7)'/%3E%3Ccircle cx='80' cy='10' r='1' fill='rgba(233,213,255,0.5)'/%3E%3Ccircle cx='50' cy='30' r='2' fill='rgba(233,213,255,0.9)'/%3E%3Ccircle cx='30' cy='60' r='1.2' fill='rgba(233,213,255,0.6)'/%3E%3Ccircle cx='90' cy='70' r='1.8' fill='rgba(233,213,255,0.8)'/%3E%3Ccircle cx='60' cy='90' r='1' fill='rgba(233,213,255,0.5)'/%3E%3Ccircle cx='5' cy='80' r='1.3' fill='rgba(233,213,255,0.7)'/%3E%3Ccircle cx='70' cy='50' r='1.5' fill='rgba(233,213,255,0.9)'/%3E%3C/svg%3E");--title-icon-content:"";--title-icon-svg:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='currentColor'%3E%3Cpath d='M12,2A10,10,0,0,0,4.2,5.23a1,1,0,0,0,1.28,1.52,7.91,7.91,0,0,1,13.06,0,1,1,0,0,0,1.28-1.52A10,10,0,0,0,12,2Zm0,20a10,10,0,0,0,7.8-3.23,1,1,0,0,0-1.28-1.52,7.91,7.91,0,0,1-13.06,0,1,1,0,1,0-1.28,1.52A10,10,0,0,0,12,22Zm-2-8a2,2,0,1,1,2,2A2,2,0,0,1,10,14Zm6.46-5.8a1,1,0,0,0-1.63-.5,5.92,5.92,0,0,0-9.66,0,1,1,0,1,0-1.63.5,8,8,0,0,1,12.92,0Z'/%3E%3C/svg%3E");--bg-card:#1f1d2e}.theme-nihon{--primary-color:#ff69b4;--glow-color:rgba(255,105,180,0.6);--accent-color:#ff9800;--bonded-color:#ffffff;--bg-panel:rgba(40,20,30,0.85);--bg-section:rgba(20,5,15,0.4);--border-section:rgba(233,30,99,0.3);--text-main:#fce4ec;--text-header:#e91e63;--bg-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='80' height='80'%3E%3Cdefs%3E%3Cpattern id='sakura' patternUnits='userSpaceOnUse' width='80' height='80'%3E%3Cg opacity='0.08'%3E%3Cpath d='M40 10 C 35 5, 25 5, 20 10 C 15 15, 15 25, 20 30 C 25 35, 35 35, 40 30 C 45 25, 45 15, 40 10 Z' fill='%23ff69b4'/%3E%3Cpath d='M60 30 C 55 25, 45 25, 40 30 C 35 35, 35 45, 40 50 C 45 55, 55 55, 60 50 C 65 45, 65 35, 60 30 Z' fill='%23ffb3d9'/%3E%3Cpath d='M20 50 C 15 45, 5 45, 0 50 C -5 55, -5 65, 0 70 C 5 75, 15 75, 20 70 C 25 65, 25 55, 20 50 Z' fill='%23ff69b4'/%3E%3C/g%3E%3C/pattern%3E%3C/defs%3E%3Crect width='100%25' height='100%25' fill='url(%23sakura)'/%3E%3C/svg%3E");--title-icon-content:"ğŸŒ¸";--title-icon-svg:none;--bg-card:#2d1b2d}.theme-jrpg{--primary-color:#4a90e2;--glow-color:rgba(74,144,226,0.6);--accent-color:#f5a623;--bonded-color:#e91e63;--bg-panel:rgba(10,25,47,0.9);--bg-section:rgba(19,47,76,0.6);--border-section:rgba(74,144,226,0.4);--text-main:#d0e1f9;--text-header:#f5a623;--bg-image:url("https://www.transparenttextures.com/patterns/climpek.png");--title-icon-content:"ğŸ’";--title-icon-svg:none;--bg-card:#132f4c;--wrapper-border-radius:5px}.fate-console{position:relative;font-family:var(--font-body);background-color:var(--bg-panel);background-image:var(--bg-image);border:3px solid rgba(0,0,0,0);border-image:linear-gradient(to bottom right,var(--primary-color),#ffd700,var(--primary-color)) 1;border-radius:var(--wrapper-border-radius);padding:15px;padding-top:45px;margin:10px 0;box-shadow:0 0 20px var(--glow-color),inset 0 0 15px rgba(0,0,0,.7),0 0 0 1px hsla(0,0%,100%,.1),0 4px 8px rgba(0,0,0,.3);color:var(--text-main);backdrop-filter:blur(3px);transition:all .4s ease-in-out;animation:fade-in .6s ease-out;transition:all .3s ease;overflow:hidden}.fate-console[data-effects-enabled=true]::after{content:"";position:absolute;top:-3px;left:-3px;right:-3px;bottom:-3px;background:linear-gradient(45deg,transparent,var(--primary-color),transparent,var(--glow-color),transparent,var(--primary-color),transparent);background-size:400% 400%;border-radius:var(--wrapper-border-radius);opacity:.3;animation:shimmer 3s ease-in-out infinite;pointer-events:none;z-index:-1}.fate-console[data-effects-enabled=true]::before{content:"";position:absolute;top:-2px;left:-2px;right:-2px;bottom:-2px;background:repeating-linear-gradient(0deg,transparent,transparent 3px,rgba(255,255,255,0.1) 3px,rgba(255,255,255,0.1) 6px),repeating-linear-gradient(90deg,transparent,transparent 3px,rgba(255,255,255,0.1) 3px,rgba(255,255,255,0.1) 6px),linear-gradient(135deg,var(--primary-color),transparent,var(--primary-color));background-size:20px 20px,20px 20px,100% 100%;border-radius:var(--wrapper-border-radius);opacity:.3;animation:border-pattern 8s linear infinite;pointer-events:none;-webkit-mask:linear-gradient(#fff 0 0) content-box,linear-gradient(#fff 0 0);mask:linear-gradient(#fff 0 0) content-box,linear-gradient(#fff 0 0);-webkit-mask-composite:xor;mask-composite:xor;-webkit-mask:linear-gradient(#fff 0 0) content-box,linear-gradient(#fff 0 0);-webkit-mask-composite:xor;padding:2px}@keyframes border-pattern{0%{background-position:0 0,0 0,0 0}100%{background-position:20px 20px,20px 20px,100% 100%}}.theme-xianxia .fate-console{border-image:none;border:3px solid rgba(0,0,0,0);box-shadow:0 0 10px var(--primary-color),0 0 25px var(--glow-color),inset 0 0 15px rgba(0,0,0,.7)}.theme-minsu .fate-console{border-image:none;border:3px dashed var(--primary-color)}.theme-wuxia .fate-console{border-image-source:url("data:image/svg+xml;charset=utf-8,%3Csvg width='100' height='100' viewBox='0 0 100 100' xmlns='http://www.w3.org/2000/svg'%3E%3Cstyle%3Epath%7Bfill:%23e5e7eb%7D%3C/style%3E%3Cpath d='M2.1-2.1c-1.7 1.7-1.7 4.5 0 6.1l6.1 6.1c1.7 1.7 4.5 1.7 6.1 0l-6.1-6.1c-1.7-1.7-4.4-1.7-6.1 0zM10.3 6.1c-1.7 1.7-1.7 4.5 0 6.1l6.1 6.1c1.7 1.7 4.5 1.7 6.1 0l-6.1-6.1c-1.7-1.7-4.4-1.7-6.1 0zM18.4 14.2c-1.7 1.7-1.7 4.5 0 6.1l6.1 6.1c1.7 1.7 4.5 1.7 6.1 0l-6.1-6.1c-1.7-1.7-4.4-1.7-6.1 0zM26.5 22.3c-1.7 1.7-1.7 4.5 0 6.1l6.1 6.1c1.7 1.7 4.5 1.7 6.1 0l-6.1-6.1c-1.7-1.7-4.4-1.7-6.1 0zM34.6 30.4c-1.7 1.7-1.7 4.5 0 6.1l6.1 6.1c1.7 1.7 4.5 1.7 6.1 0l-6.1-6.1c-1.7-1.7-4.4-1.7-6.1 0zM42.7 38.5c-1.7 1.7-1.7 4.5 0 6.1l6.1 6.1c1.7 1.7 4.5 1.7 6.1 0l-6.1-6.1c-1.7-1.7-4.4-1.7-6.1 0zM50.8 46.6c-1.7 1.7-1.7 4.5 0 6.1l6.1 6.1c1.7 1.7 4.5 1.7 6.1 0l-6.1-6.1c-1.7-1.7-4.4-1.7-6.1 0zM58.9 54.7c-1.7 1.7-1.7 4.5 0 6.1l6.1 6.1c1.7 1.7 4.5 1.7 6.1 0l-6.1-6.1c-1.7-1.7-4.4-1.7-6.1 0zM67.1 62.9c-1.7 1.7-1.7 4.5 0 6.1l6.1 6.1c1.7 1.7 4.5 1.7 6.1 0l-6.1-6.1c-1.7-1.7-4.4-1.7-6.1 0zM75.2 71c-1.7 1.7-1.7 4.5 0 6.1l6.1 6.1c1.7 1.7 4.5 1.7 6.1 0l-6.1-6.1c-1.7-1.7-4.4-1.7-6.1 0zM83.3 79.1c-1.7 1.7-1.7 4.5 0 6.1l6.1 6.1c1.7 1.7 4.5 1.7 6.1 0l-6.1-6.1c-1.7-1.7-4.4-1.7-6.1 0zM91.4 87.2c-1.7 1.7-1.7 4.5 0 6.1l6.1 6.1c1.7 1.7 4.5 1.7 6.1 0l-6.1-6.1c-1.7-1.7-4.4-1.7-6.1 0z'/%3E%3C/svg%3E");border-image-slice:5;border-image-width:5px;border-image-repeat:stretch;border-width:5px}.theme-xuanhuan .fate-console{border-image:none;border:3px solid rgba(0,0,0,0);box-shadow:0 0 8px var(--glow-color),0 0 16px var(--primary-color),0 0 24px var(--accent-color),inset 0 0 15px rgba(0,0,0,.7)}.theme-nihon .fate-console{border-image:none;border:3px solid rgba(0,0,0,0);box-shadow:0 0 10px var(--glow-color),0 0 20px var(--primary-color),inset 0 0 15px rgba(0,0,0,.7)}.theme-jrpg .fate-console{border-image:linear-gradient(to bottom right,var(--primary-color),var(--accent-color),var(--primary-color)) 1;box-shadow:0 0 15px var(--glow-color),inset 0 0 10px rgba(0,0,0,.7)}.theme-nihon .section-title::before{background-color:rgba(0,0,0,0);filter:drop-shadow(0 0 3px var(--primary-color))}.theme-jrpg .section-title::before{background-color:rgba(0,0,0,0);filter:drop-shadow(0 0 5px var(--accent-color));animation:jrpg-icon-glow 2s ease-in-out infinite alternate}@keyframes fade-in{from{opacity:0;transform:scale(0.98)}to{opacity:1;transform:scale(1)}}@keyframes shimmer{0%{background-position:-200% 0}100%{background-position:200% 0}}@keyframes float{0%,100%{transform:translateY(0px)}50%{transform:translateY(-5px)}}@keyframes sparkle{0%,100%{opacity:0;transform:scale(0.8)}50%{opacity:1;transform:scale(1.2)}}@keyframes aurora{0%{background-position:0% 50%}50%{background-position:100% 50%}100%{background-position:0% 50%}}@keyframes rotate-slow{from{transform:rotate(0deg)}to{transform:rotate(360deg)}}@keyframes shake{0%,100%{transform:translateX(0)}10%,30%,50%,70%,90%{transform:translateX(-2px)}20%,40%,60%,80%{transform:translateX(2px)}}@keyframes sway{0%,100%{transform:rotate(-5deg)}50%{transform:rotate(5deg)}}@keyframes card-glow{0%,100%{box-shadow:0 6px 20px rgba(0,0,0,.5),0 0 8px var(--glow-color),0 0 15px var(--primary-color),inset 0 1px 3px rgba(0,0,0,.5)}50%{box-shadow:0 8px 25px rgba(0,0,0,.6),0 0 12px var(--glow-color),0 0 20px var(--primary-color),inset 0 1px 3px rgba(0,0,0,.5)}}@keyframes bonded-card-glow{0%,100%{box-shadow:0 6px 20px rgba(0,0,0,.4),0 0 15px var(--bonded-color),0 0 25px var(--bonded-color),inset 0 1px 3px rgba(0,0,0,.5)}50%{box-shadow:0 8px 25px rgba(0,0,0,.5),0 0 20px var(--bonded-color),0 0 35px var(--bonded-color),inset 0 1px 3px rgba(0,0,0,.5)}}@keyframes button-click{0%{transform:scale(1)}50%{transform:scale(0.95)}100%{transform:scale(1)}}.console-controls{position:absolute;top:10px;right:12px;display:flex;align-items:center;gap:8px;z-index:10}.console-control-btn{font-size:1.2em;color:var(--primary-color);cursor:pointer;transition:transform .2s,color .2s;font-family:sans-serif;position:relative;overflow:hidden}.console-control-btn::before{content:"";position:absolute;top:50%;left:50%;width:0;height:0;background:radial-gradient(circle,var(--glow-color) 0%,transparent 70%);border-radius:50%;transform:translate(-50%,-50%);transition:width .3s ease,height .3s ease;pointer-events:none}.console-control-btn:hover::before{width:40px;height:40px}.console-control-btn:hover{color:var(--glow-color);transform:scale(1.15)}.fate-console.collapsed .console-control-btn .icon-collapse{display:none}.fate-console.collapsed .console-control-btn .icon-expand{display:block}.fate-console.fixed-layout .console-control-btn .icon-fixed{display:none}.fate-console.fixed-layout .console-control-btn .icon-diffusion{display:block}.fate-console[data-effects-enabled=false] .console-control-btn .icon-effects-on{display:none}.fate-console[data-effects-enabled=false] .console-control-btn .icon-effects-off{display:block}.fate-console[data-effects-enabled=true] .console-control-btn .icon-effects-on{display:block}.fate-console[data-effects-enabled=true] .console-control-btn .icon-effects-off{display:none}.fate-console[data-direct-send-enabled=false] .console-control-btn .icon-direct-send-on{display:block}.fate-console[data-direct-send-enabled=false] .console-control-btn .icon-direct-send-off{display:none}.fate-console[data-direct-send-enabled=true] .console-control-btn .icon-direct-send-on{display:none}.fate-console[data-direct-send-enabled=true] .console-control-btn .icon-direct-send-off{display:block}.icon-expand,.icon-diffusion,.icon-effects-off,.icon-direct-send-off{display:none}.theme-switcher{display:flex;gap:6px}.theme-stone{width:18px;height:18px;border-radius:50%;cursor:pointer;border:2px solid hsla(0,0%,100%,.3);transition:all .2s;position:relative;overflow:hidden}.theme-stone::before{content:"";position:absolute;top:50%;left:50%;width:0;height:0;background:radial-gradient(circle,rgba(255,255,255,0.8) 0%,transparent 70%);border-radius:50%;transform:translate(-50%,-50%);transition:width .3s ease,height .3s ease;pointer-events:none}.theme-stone:hover::before{width:30px;height:30px}.theme-stone:hover{transform:scale(1.2)}.theme-stone.active{border-color:#fff;transform:scale(1.1);box-shadow:0 0 10px #fff}.theme-stone[data-theme=gufeng]{background:#c89b3c}.theme-stone[data-theme=xianxia]{background:#34d399}.theme-stone[data-theme=minsu]{background:#ef4444}.theme-stone[data-theme=wuxia]{background:#e5e7eb}.theme-stone[data-theme=xuanhuan]{background:#8b5cf6}.theme-stone[data-theme=nihon]{background:#e91e63}.theme-stone[data-theme=jrpg]{background:#4a90e2}.collapsed-view{display:none}.fate-console.collapsed{padding:15px;padding-top:45px}.fate-console.collapsed .expanded-view,.fate-console.collapsed .log-container{display:none}.fate-console.collapsed .collapsed-view{display:grid;grid-template-columns:1fr 1fr;gap:12px}.collapsed-block{background:var(--bg-section);border:1px solid var(--border-section);border-radius:6px;padding:10px 12px}.collapsed-title{font-family:"Ma Shan Zheng","åæ–‡è¡Œæ¥·","åæ–‡æ¥·ä½“","KaiTi",cursive;font-size:1.5em;color:var(--text-header);margin-bottom:8px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;font-weight:normal;letter-spacing:.15em;text-shadow:0 0 8px var(--glow-color);transform:rotate(-1deg)}.fate-console.fixed-layout .expanded-view{height:70vw;overflow-y:auto;padding-right:8px;scrollbar-width:thin;scrollbar-color:var(--primary-color) rgba(0,0,0,.2)}.fate-console.fixed-layout .expanded-view::-webkit-scrollbar{width:6px}.fate-console.fixed-layout .expanded-view::-webkit-scrollbar-track{background:rgba(0,0,0,.2);border-radius:3px}.fate-console.fixed-layout .expanded-view::-webkit-scrollbar-thumb{background-color:var(--primary-color);border-radius:3px}.tab-nav{display:flex;gap:5px;border-bottom:2px solid var(--primary-color);margin-bottom:15px}.tab-btn{font-family:"Ma Shan Zheng","åæ–‡è¡Œæ¥·","åæ–‡æ¥·ä½“","KaiTi",cursive;font-size:1.8em;color:gray;background:rgba(0,0,0,.2);border:2px solid var(--primary-color);border-bottom:none;padding:5px 20px;border-radius:8px 8px 0 0;cursor:pointer;transform:translateY(2px);transition:all .2s ease;font-weight:normal;letter-spacing:.08em}.tab-btn:hover{color:var(--text-header);background:rgba(50,40,30,.4)}.tab-btn.active{color:var(--text-header);background:var(--bg-section);border-color:var(--primary-color);text-shadow:0 0 8px var(--glow-color)}.tab-panel{display:none}.tab-panel.active{display:block;animation:fade-in .4s}.tab-panel-grid,.character-annals-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(350px,1fr));gap:20px}.grid-column{display:flex;flex-direction:column;gap:15px}.section-box{background:var(--bg-section);border:1px solid var(--border-section);border-radius:6px;padding:12px;overflow:hidden;position:relative}.section-box::before{content:"";position:absolute;top:-1px;left:-1px;right:-1px;bottom:-1px;background:linear-gradient(135deg,transparent 0%,var(--primary-color) 20%,transparent 40%,var(--primary-color) 60%,transparent 80%,var(--primary-color) 100%);background-size:200% 200%;border-radius:6px;opacity:.2;animation:section-glow 4s ease-in-out infinite alternate;pointer-events:none}@keyframes section-glow{0%{opacity:.1;background-position:0% 0%}100%{opacity:.3;background-position:100% 100%}}.section-title{font-family:"Ma Shan Zheng","åæ–‡è¡Œæ¥·","åæ–‡æ¥·ä½“","KaiTi",cursive;font-size:1.8em;color:var(--text-header);text-shadow:0 0 8px var(--glow-color);padding-bottom:10px;margin:0 0 10px 0;display:flex;align-items:center;justify-content:center;gap:10px;border-bottom:none;font-weight:normal;letter-spacing:.1em;position:relative}.section-title::before{content:var(--title-icon-content,"");font-family:sans-serif;font-size:1.2em;color:var(--primary-color);display:inline-block;width:1.2em;height:1.2em;line-height:1.2em;text-align:center;flex-shrink:0;background-color:var(--primary-color);-webkit-mask-image:var(--title-icon-svg);mask-image:var(--title-icon-svg);-webkit-mask-repeat:no-repeat;mask-repeat:no-repeat;-webkit-mask-size:contain;mask-size:contain;-webkit-mask-position:center;mask-position:center}.theme-xianxia .section-title::before,.theme-minsu .section-title::before{background-color:rgba(0,0,0,0)}.theme-xianxia .section-title::before{animation:rotate-slow 8s linear infinite}.theme-nihon .section-title::before{animation:rotate-slow 6s linear infinite reverse}.theme-jrpg .fate-console{border-image:linear-gradient(to bottom right,var(--primary-color),var(--accent-color),var(--primary-color)) 1;box-shadow:0 0 15px var(--glow-color),inset 0 0 10px rgba(0,0,0,.7)}.theme-jrpg .section-title::before{background-color:rgba(0,0,0,0);filter:drop-shadow(0 0 5px var(--accent-color));animation:jrpg-icon-glow 2s ease-in-out infinite alternate}@keyframes jrpg-icon-glow{0%{filter:drop-shadow(0 0 5px var(--accent-color)) brightness(1)}100%{filter:drop-shadow(0 0 15px var(--accent-color)) brightness(1.2)}}@keyframes jrpg-border-pulse{0%{border-image-slice:1}50%{border-image-slice:5}100%{border-image-slice:1}}.theme-minsu .section-title::before{animation:sway 4s ease-in-out infinite;filter:drop-shadow(0 0 6px var(--primary-color)) drop-shadow(0 0 12px var(--accent-color))}.theme-wuxia .section-title::before{animation:pulse-icon 3s ease-in-out infinite}.theme-xuanhuan .section-title::before{animation:rotate-slow 7s linear infinite;filter:drop-shadow(0 0 4px var(--primary-color)) drop-shadow(0 0 8px var(--accent-color))}.theme-gufeng .section-title::before{animation:breathe-glow 3s ease-in-out infinite;filter:drop-shadow(0 0 6px var(--primary-color)) drop-shadow(0 0 12px var(--glow-color));transform-origin:center}@keyframes pulse-icon{0%,100%{transform:scale(1);opacity:.8}50%{transform:scale(1.1);opacity:1}}@keyframes glow-icon{0%{filter:drop-shadow(0 0 4px var(--primary-color)) drop-shadow(0 0 8px var(--accent-color)) brightness(1);transform:scale(1)}100%{filter:drop-shadow(0 0 12px var(--primary-color)) drop-shadow(0 0 20px var(--accent-color)) brightness(1.2);transform:scale(1.05)}}@keyframes shake-icon{0%,100%{transform:translateX(0px) rotate(0deg);filter:drop-shadow(0 0 6px var(--primary-color)) drop-shadow(0 0 12px var(--glow-color))}10%,30%,50%,70%,90%{transform:translateX(-1px) rotate(-1deg);filter:drop-shadow(0 0 8px var(--primary-color)) drop-shadow(0 0 15px var(--glow-color))}20%,40%,60%,80%{transform:translateX(1px) rotate(1deg);filter:drop-shadow(0 0 8px var(--primary-color)) drop-shadow(0 0 15px var(--glow-color))}}@keyframes breathe-glow{0%,100%{opacity:.8;transform:scale(1);filter:drop-shadow(0 0 6px var(--primary-color)) drop-shadow(0 0 12px var(--glow-color))}50%{opacity:1;transform:scale(1.05);filter:drop-shadow(0 0 10px var(--primary-color)) drop-shadow(0 0 20px var(--glow-color))}}.section-title::after{content:"";flex-grow:1;height:1px;background:linear-gradient(to right,var(--primary-color),transparent)}.char-name{font-size:1.2em;font-weight:bold}.custom-info-icon{font-size:1.2em;font-weight:bold;margin-left:4px;vertical-align:middle}.progress-bar-group{display:flex;flex-direction:column;gap:8px;margin:10px 0}.progress-bar{width:100%;height:20px;background-color:#2c1d12;border-radius:5px;overflow:hidden;position:relative;border:1px solid #4a3c2d;box-shadow:inset 0 1px 3px rgba(0,0,0,.5);box-sizing:border-box}.progress-bar-fill{height:100%;transition:width .5s ease-in-out;background-image:repeating-linear-gradient(-45deg,transparent,transparent 5px,rgba(255,255,255,0.1) 5px,rgba(255,255,255,0.1) 10px)}.progress-bar-fill.hp{background-color:var(--hp-color)}.progress-bar-fill.mp{background-color:var(--mp-color)}.progress-bar-fill.sta{background-color:var(--sta-color)}.progress-bar-fill.sd{background-color:var(--sd-color)}.progress-bar-fill.affection{background-color:var(--affection-color)}.progress-bar-text{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);color:#fff;font-size:.8em;font-weight:bold;text-shadow:1px 1px 2px #000;white-space:nowrap}.info-line{display:flex;margin:6px 0;align-items:baseline}.alignment-circles{display:flex;gap:6px;margin-left:8px;align-items:center}.alignment-circle{width:24px;height:24px;border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:.75em;font-weight:bold;color:#fff;text-shadow:1px 1px 2px rgba(0,0,0,.8);border:1px solid hsla(0,0%,100%,.3);box-shadow:0 2px 4px rgba(0,0,0,.2);transition:transform .2s ease}.alignment-circle:hover{transform:scale(1.1)}.ov-circle{background:linear-gradient(135deg,#3b82f6,#1d4ed8)}.kv-circle{background:linear-gradient(135deg,#8b5cf6,#7c3aed)}.info-label{color:var(--text-header);font-weight:bold;margin-right:8px;white-space:nowrap;flex-shrink:0}.tags-container{display:flex;flex-wrap:wrap;gap:6px;margin-top:5px}.tag{background:rgba(200,155,60,.15);border:1px solid var(--primary-color);color:var(--text-main);padding:3px 10px;border-radius:4px;font-size:.85em;position:relative;overflow:hidden;transition:all .3s ease}.tag::before{content:"";position:absolute;top:0;left:-100%;width:100%;height:100%;background:linear-gradient(90deg,transparent,rgba(255,255,255,0.2),transparent);transition:left .5s ease}.tag:hover::before{left:100%}.tag.clickable{cursor:pointer;transition:all .2s ease}.tag.clickable:hover{background:rgba(200,155,60,.3);border-color:var(--glow-color);transform:translateY(-1px);box-shadow:0 2px 4px rgba(0,0,0,.2)}.quest-title{background:rgba(200,155,60,.15);border:1px solid var(--primary-color);color:var(--text-main);padding:3px 10px;border-radius:4px;font-size:1em;font-weight:bold;cursor:pointer;transition:all .2s ease}.quest-title:hover{background:rgba(200,155,60,.3);border-color:var(--glow-color);transform:translateY(-1px);box-shadow:0 2px 4px rgba(0,0,0,.2)}.equipped-items{display:flex;flex-direction:column;gap:6px;margin-top:8px}.equipment-line{display:flex;align-items:center;gap:8px}.equipment-icon{font-size:1.2em;min-width:20px;text-align:center}.equipment-list{flex:1;line-height:1.4}.equipment-item{font-weight:bold;margin-right:4px}.quest-list .info-line{border-left:3px solid var(--primary-color);padding-left:10px}.quest-list .quest-main .info-label{color:#f1c40f}.quest-list .quest-side .info-label{color:#3498db}.quest-countdown{display:inline;font-size:.85em;color:var(--text-header);opacity:.8;margin-left:8px;font-style:italic}.npc-grid{display:grid;grid-template-columns:1fr;gap:15px}.bonded-section .section-title::after{content:"âˆ";color:var(--bonded-color);font-size:1.2em;animation:pulse-red 2.5s infinite ease-in-out;background:none;margin-left:auto;flex-grow:0}@keyframes pulse-red{0%{opacity:.7}50%{opacity:1}100%{opacity:.7}}.npc-card{position:relative;cursor:pointer;border:1px solid var(--primary-color);border-radius:8px;padding:10px;box-sizing:border-box;box-shadow:inset 0 1px 3px rgba(0,0,0,.5);transition:transform .3s ease,box-shadow .3s ease,border-color .3s ease;background:linear-gradient(145deg,rgba(255,255,255,0.08),transparent),var(--card-texture),var(--bg-card);overflow:hidden}.npc-card::before{content:"";position:absolute;top:-2px;left:-2px;right:-2px;bottom:-2px;background:linear-gradient(45deg,transparent,rgba(255,255,255,0.1),transparent,var(--primary-color),transparent);border-radius:10px;opacity:0;transition:opacity .3s ease;pointer-events:none;z-index:-1}.npc-card:hover::before{opacity:.6;animation:shimmer 2s ease-in-out infinite}.npc-card:hover{transform:translateY(-5px) scale(1.03);border-color:var(--primary-color);box-shadow:0 6px 20px rgba(0,0,0,.5),0 0 8px var(--glow-color),0 0 15px var(--primary-color),inset 0 1px 3px rgba(0,0,0,.5)}.npc-card::after{content:"â†º";position:absolute;bottom:5px;right:10px;color:var(--primary-color);opacity:.5;transition:opacity .3s,transform .3s;z-index:5}.npc-card:hover::after{opacity:1;transform:rotate(360deg)}.npc-card.bonded{border-color:var(--bonded-color);box-shadow:0 0 10px var(--bonded-color),inset 0 1px 3px rgba(0,0,0,.5)}.npc-card.bonded:hover{border-color:var(--bonded-color);animation:bonded-card-glow 2s ease-in-out infinite}.npc-card.bonded::after{color:var(--bonded-color)}.npc-header{display:flex;justify-content:space-between;align-items:center;border-bottom:1px dashed var(--primary-color);padding-bottom:5px;margin-bottom:8px;flex-shrink:0}.npc-info-section{margin-right:20px}.npc-name{font-size:1.2em;font-weight:bold;color:#e67e22}.npc-name.sr-active{color:#ff6b6b}.npc-status{font-size:.9em;color:var(--text-main);font-weight:normal;margin-left:6px}.npc-location{font-size:.8em;color:#bdc3c7;font-style:italic}.affection-bar-horizontal{width:100%;height:8px;background:rgba(0,0,0,.3);border-radius:4px;margin-top:8px;overflow:hidden;border:1px solid hsla(0,0%,100%,.2)}.affection-fill-horizontal{height:100%;transition:all .5s ease;border-radius:3px}.affection-fill.affection{background:#e91e63}.affection-fill.affection.affection-gray{background:#7f8c8d}.affection-fill.affection.affection-white{background:#fff}.affection-fill.affection.affection-yellow{background:#f1c40f}.affection-fill.affection.affection-pink{background:#e91e63}.progress-bar-fill.affection{background:var(--affection-color)}.affection-bar{position:relative}.affection-bar .progress-bar-fill.affection{background:var(--affection-color);background-image:repeating-linear-gradient(-45deg,transparent,transparent 5px,rgba(255,255,255,0.1) 5px,rgba(255,255,255,0.1) 10px);transition:background-color .3s ease}.affection-bar[data-negative=true] .progress-bar-fill.affection{background:linear-gradient(135deg,#87ceeb,#add8e6);background-image:repeating-linear-gradient(-45deg,transparent,transparent 5px,rgba(255,255,255,0.2) 5px,rgba(255,255,255,0.2) 10px);box-shadow:inset 0 0 8px rgba(173,216,230,.8)}.affection-bar[data-negative=true]{border:2px solid skyblue;box-shadow:inset 0 0 10px rgba(173,216,230,.5)}.affection-bar[data-negative=true]::before{content:"";position:absolute;top:0;left:0;right:0;bottom:0;background:linear-gradient(45deg,rgba(173,216,230,0.2) 0%,transparent 25%,rgba(173,216,230,0.2) 50%,transparent 75%,rgba(173,216,230,0.2) 100%);background-size:20px 20px;animation:ice-effect 2s linear infinite;pointer-events:none}@keyframes ice-effect{0%{background-position:0 0}100%{background-position:20px 20px}}.card-front{display:block}.card-back{display:none}.is-flipped .card-front{display:none}.is-flipped .card-back{display:block;animation:fade-in .3s}.log-container{margin-top:15px}.log-title{font-family:"Ma Shan Zheng","åæ–‡è¡Œæ¥·","åæ–‡æ¥·ä½“","KaiTi",cursive;margin:0 0 8px 4px;color:var(--text-main);font-size:1em;font-weight:normal;letter-spacing:.05em;text-shadow:0 0 5px var(--glow-color);transition:all .3s ease}.log-title .log-title-text{cursor:pointer}.log-title .log-title-text:hover{color:var(--primary-color);text-shadow:0 0 10px var(--glow-color);transform:scale(1.02)}.log-box{background:rgba(0,0,0,.4);border-left:4px solid var(--primary-color);padding:8px 12px;max-height:3.7rem;overflow-y:auto;scrollbar-width:thin;scrollbar-color:var(--primary-color) rgba(0,0,0,.2)}.log-box::-webkit-scrollbar{width:6px}.log-box::-webkit-scrollbar-track{background:rgba(0,0,0,.2);border-radius:3px}.log-box::-webkit-scrollbar-thumb{background-color:var(--primary-color);border-radius:3px}.log-entry{margin:0 0 5px;font-style:italic;color:#bdc3c7;line-height:1.5}.log-entry:last-child{margin-bottom:0}.options-placeholder{color:var(--text-main);opacity:.7;font-style:italic;text-align:center;padding:20px}.options-section{display:block;padding:0}.options-grid{display:flex;flex-direction:column;gap:8px;width:100%;padding:20px;padding-top:60px}.options-title-container{position:relative;width:100%;margin-bottom:20px}.options-title{text-align:center;justify-content:center;position:absolute;left:50%;top:0;transform:translateX(-50%);z-index:10;background:rgba(0,0,0,0);padding:0 10px}.option-card{position:relative;cursor:pointer;border:1px solid var(--primary-color);border-radius:8px;padding:8px 30px;box-sizing:border-box;box-shadow:inset 0 1px 3px rgba(0,0,0,.5),0 0 15px rgba(200,155,60,.15),0 2px 4px rgba(0,0,0,.1);transition:transform .3s ease,box-shadow .3s ease,border-color .3s ease;background:linear-gradient(145deg,rgba(255,255,255,0.1),rgba(200,155,60,0.02)),radial-gradient(circle at 30% 30%,rgba(255,215,0,0.05) 0%,transparent 50%),radial-gradient(circle at 70% 70%,rgba(200,155,60,0.03) 0%,transparent 50%),var(--bg-card);width:100%;display:flex;flex-direction:column;min-height:40px;justify-content:center}.option-card::before{content:"âœ¦";position:absolute;top:50%;left:8px;transform:translateY(-50%);color:var(--primary-color);font-size:1.4em;opacity:.8;pointer-events:none}.option-card::after{content:"âœ¦";position:absolute;top:50%;right:8px;transform:translateY(-50%);color:var(--primary-color);font-size:1.4em;opacity:.8;pointer-events:none}.option-card:hover{transform:translateY(-3px) scale(1.02);border-color:var(--primary-color);box-shadow:0 4px 15px rgba(0,0,0,.3),0 0 8px var(--glow-color),0 0 12px var(--primary-color),inset 0 1px 3px rgba(0,0,0,.5)}.option-card:active{transform:translateY(-1px) scale(0.98);transition:transform .1s ease}.option-card.disabled{opacity:.5;cursor:not-allowed;border-color:#666}.option-card.disabled:hover{transform:none;box-shadow:inset 0 1px 3px rgba(0,0,0,.5)}.option-header{display:none}.option-id{display:none}.option-type{font-size:.9em;color:var(--text-header);background:rgba(200,155,60,.2);padding:2px 8px;border-radius:4px;border:1px solid var(--primary-color)}.option-content{color:var(--text-main);line-height:1.4;white-space:pre-wrap;text-align:center;flex:1;display:flex;align-items:center;justify-content:center;min-height:30px}.option-text{display:inline;font-size:1.2em;font-family:"KaiTi","æ¥·ä½“","æ¥·ä½“_GB2312",serif;font-weight:normal;letter-spacing:.05em}.music-player-container{display:flex;flex-direction:column;gap:20px}.music-controls{display:flex;justify-content:center;align-items:center;gap:15px;padding:15px;background:var(--bg-section);border-radius:8px;border:1px solid var(--border-section)}.music-btn{background:var(--primary-color);color:#000;border:2px solid var(--primary-color);border-radius:50%;width:50px;height:50px;display:flex;align-items:center;justify-content:center;cursor:pointer;font-size:1.2em;transition:all .3s ease;position:relative;overflow:hidden}.music-btn:hover:not(:disabled){background:var(--glow-color);transform:scale(1.1);box-shadow:0 0 15px var(--glow-color)}.music-btn:active:not(:disabled){transform:scale(0.95)}.music-btn:disabled{opacity:.5;cursor:not-allowed}.music-btn.play-btn{width:60px;height:60px;font-size:1.5em;background:var(--accent-color);border-color:var(--accent-color)}.music-btn.play-btn.playing{animation:pulse-playing 1.5s ease-in-out infinite}.music-btn.shuffle-btn.active,.music-btn.repeat-btn.active{background:var(--glow-color);border-color:var(--glow-color);box-shadow:0 0 10px var(--glow-color)}@keyframes pulse-playing{0%,100%{transform:scale(1)}50%{transform:scale(1.05)}}.current-track-info{background:var(--bg-section);border:1px solid var(--border-section);border-radius:8px;padding:15px;text-align:center}.track-title{font-size:1.3em;font-weight:bold;color:var(--text-header);margin-bottom:5px;text-shadow:0 0 8px var(--glow-color)}.track-artist{font-size:1em;color:var(--text-main);opacity:.8;margin-bottom:10px}.progress-container{margin-bottom:10px}.music-progress{margin-bottom:5px}.music-fill{background:linear-gradient(90deg,var(--primary-color),var(--accent-color));transition:width .3s ease}.time-display{display:flex;justify-content:space-between;font-size:.9em;color:var(--text-main);opacity:.8}.playlist-container{background:var(--bg-section);border:1px solid var(--border-section);border-radius:8px;padding:15px;max-height:300px;overflow-y:auto}.playlist-title{font-size:1.2em;color:var(--text-header);margin-bottom:15px;text-align:center;text-shadow:0 0 8px var(--glow-color)}.playlist{display:flex;flex-direction:column;gap:8px}.playlist-item{display:flex;justify-content:space-between;align-items:center;padding:10px 12px;background:var(--bg-card);border:1px solid var(--border-section);border-radius:6px;cursor:pointer;transition:all .3s ease}.playlist-item:hover{background:var(--bg-card);border-color:var(--primary-color);transform:translateY(-2px);box-shadow:0 4px 8px rgba(0,0,0,.2)}.playlist-item.active{background:var(--primary-color);border-color:var(--primary-color);color:#000;box-shadow:0 0 15px var(--glow-color)}.track-info{flex:1}.track-duration{font-size:.9em;color:var(--text-main);opacity:.7;margin-left:15px}@media (max-width:768px){.fate-console{padding:10px;padding-top:45px}.tab-panel-grid,.character-annals-grid,.fate-console.collapsed .collapsed-view{grid-template-columns:1fr;gap:15px}.tab-btn{font-size:1.4em;padding:5px 10px}.section-title{font-size:1.5em}.console-controls{gap:8px;right:8px}.theme-stone{width:16px;height:16px}.console-control-btn{font-size:1.4em}.fate-console.fixed-layout .expanded-view{height:120vw}.options-grid{padding:15px;padding-top:50px}.option-card{min-height:35px}.music-player-container{gap:15px}.music-controls{gap:10px;padding:12px;flex-wrap:wrap;justify-content:center}.music-btn{width:45px;height:45px;font-size:1.1em}.music-btn.play-btn{width:55px;height:55px;font-size:1.3em}.current-track-info{padding:12px}.track-title{font-size:1.2em}.track-artist{font-size:.9em}.entry-switcher{padding:10px}.entry-selector{flex-direction:column;gap:8px;align-items:stretch}.entry-label{font-size:.85em;text-align:center}.entry-select{font-size:.85em;padding:6px 8px;min-width:100%}.playlist-container{padding:12px;max-height:250px}.playlist-item{padding:8px 10px;flex-direction:column;align-items:flex-start;gap:4px}.track-info{width:100%}.track-duration{margin-left:0;align-self:flex-end;font-size:.8em}.spectrum-container{height:60px;gap:1px}.spectrum-bar{width:4px}}@media (max-width:768px)and (max-width:480px){.music-controls{gap:8px;padding:10px}.music-btn{width:40px;height:40px;font-size:1em}.music-btn.play-btn{width:50px;height:50px;font-size:1.2em}.current-track-info{padding:10px}.track-title{font-size:1.1em}.playlist-container{padding:10px;max-height:200px}.spectrum-container{height:50px}}
</style></head><body><div id="app"></div></body>