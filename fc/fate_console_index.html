<head><script type="module">const e=VueRouter,t=Vue;const a={gufeng:{primaryColor:'#c89b3c',glowColor:'rgba(255, 215, 0, 0.6)',accentColor:'#e74c3c',bondedColor:'#f472b6',bgPanel:'rgba(30, 25, 20, 0.85)',bgSection:'rgba(10, 5, 0, 0.4)',borderSection:'rgba(200, 155, 60, 0.3)',textMain:'#f0e6d2',textHeader:'#c89b3c',bgImage:'url("https://www.transparenttextures.com/patterns/old-wall.png")',titleIconContent:'',titleIconSvg:'url("data:image/svg+xml,%3Csvg xmlns=\'http://www.w3.org/2000/svg\' viewBox=\'0 0 24 24\' fill=\'currentColor\'%3E%3Cpath d=\'M12,2A10,10,0,1,0,22,12,10,10,0,0,0,12,2Zm0,18a8,8,0,1,1,8-8A8,8,0,0,1,12,20ZM15,8H9V16h6Z\'/%3E%3C/svg%3E")',bgCard:'#2a231c',wrapperBorderRadius:'10px',labels:{alignment:'礼仁:',power:'功名:',abilities:'六艺:',titles:'风评:',effects:'迹遇:',equipment:'仪仗:',items:'什物:',currency:'金帛:',time:'流年:',location:'方位:',environment:'山水:',dynamics:'风声:',questMain:'天命:',questSide:'浮生:',npcPower:'功名:'},tabNames:{tab1:'山河册',tab2:'衣冠谱',worldStatus:'天下大势',factions:'各方角力',inventory:'随行细软',nearby:'萍水相逢',bonded:'朱丝系命',logTitle:'青史遗痕:',collapsedCharTitle:'青衫风华',collapsedWorldTitle:'江山一探',journal:'案牍纪要'}},xianxia:{primaryColor:'#34d399',glowColor:'rgba(167, 243, 208, 0.7)',accentColor:'#f59e0b',bondedColor:'#e53e3e',bgPanel:'rgba(15, 30, 25, 0.85)',bgSection:'rgba(5, 15, 10, 0.4)',borderSection:'rgba(52, 211, 153, 0.3)',textMain:'#e0f2f1',textHeader:'#34d399',bgImage:'url("https://www.transparenttextures.com/patterns/gplay.png")',titleIconContent:'☯',titleIconSvg:'none',bgCard:'#182825',wrapperBorderRadius:'10px',labels:{alignment:'道心:',power:'道境:',abilities:'神通:',titles:'道号:',effects:'道痕:',equipment:'法宝:',items:'灵物:',currency:'灵资:',time:'仙历:',location:'洞天:',environment:'灵氛:',dynamics:'玄讯:',questMain:'天缘:',questSide:'尘缘:',npcPower:'道行:'},tabNames:{tab1:'天机卷',tab2:'仙缘录',worldStatus:'大道气运',factions:'诸天势力',inventory:'袖里乾坤',nearby:'云游之士',bonded:'命定之人',logTitle:'天机衍变:',collapsedCharTitle:'云笈问道',collapsedWorldTitle:'天机一瞥',journal:'天道机缘'}},minsu:{primaryColor:'#ef4444',glowColor:'rgba(252, 165, 165, 0.7)',accentColor:'#facc15',bondedColor:'#facc15',bgPanel:'rgba(40, 10, 10, 0.85)',bgSection:'rgba(20, 0, 0, 0.4)',borderSection:'rgba(239, 68, 68, 0.3)',textMain:'#fef2f2',textHeader:'#fca5a5',bgImage:'url("data:image/svg+xml,%3Csvg xmlns=\'http://www.w3.org/2000/svg\' width=\'80\' height=\'80\'%3E%3Cg fill=\'%23a11d1d\' opacity=\'0.35\'%3E%3Cpath d=\'M15 8 C 10 5, 5 10, 8 15 L 12 18 C 15 22, 22 20, 20 15 Z\' /%3E%3Ccircle cx=\'50\' cy=\'10\' r=\'5\' /%3E%3Cellipse cx=\'65\' cy=\'60\' rx=\'8\' ry=\'4\' transform=\'rotate(45 65 60)\' /%3E%3Cpath d=\'M30 70 C 25 75, 35 80, 40 75 L 42 72 C 45 68, 38 65, 35 68 Z\' /%3E%3Ccircle cx=\'10\' cy=\'50\' r=\'3\' /%3E%3Ccircle cx=\'70\' cy=\'30\' r=\'2\' /%3E%3C/g%3E%3C/svg%3E")',titleIconContent:'🏮',titleIconSvg:'none',bgCard:'#3a1a1a',wrapperBorderRadius:'10px',labels:{alignment:'情理:',power:'命格:',abilities:'手艺:',titles:'浑号:',effects:'兆象:',equipment:'法器:',items:'杂物:',currency:'俗资:',time:'时辰:',location:'地头:',environment:'风水:',dynamics:'闲话:',questMain:'诡事:',questSide:'奇闻:',npcPower:'斤两:'},tabNames:{tab1:'风物志',tab2:'异闻录',worldStatus:'四时八节',factions:'三教九流',inventory:'百宝褡裢',nearby:'市井群像',bonded:'宿缘牵绊',logTitle:'口耳余韵:',collapsedCharTitle:'烛龙之影',collapsedWorldTitle:'辰光一卜',journal:'乡野奇谭'}},wuxia:{primaryColor:'#e5e7eb',glowColor:'rgba(255, 255, 255, 0.3)',accentColor:'#dc2626',bondedColor:'#34d399',bgPanel:'rgba(17, 24, 39, 0.9)',bgSection:'rgba(31, 41, 55, 0.5)',borderSection:'rgba(229, 231, 235, 0.3)',textMain:'#f9fafb',textHeader:'#e5e7eb',bgImage:'url("data:image/svg+xml,%3Csvg xmlns=\'http://www.w3.org/2000/svg\' width=\'40\' height=\'40\'%3E%3Cpath d=\'M0 10 H15 V25 H0 V40 H30 V10 H40 V0 H10 V-10\' fill=\'none\' stroke=\'rgba(229, 231, 235, 0.15)\' stroke-width=\'2\'/%3E%3C/svg%3E")',titleIconContent:'',titleIconSvg:'url("data:image/svg+xml,%3Csvg xmlns=\'http://www.w3.org/2000/svg\' viewBox=\'0 0 24 24\' fill=\'currentColor\'%3E%3Cpath d=\'M12.5,2C10.8,2,9.5,3.3,9.5,5s1.3,3,3,3,3-1.3,3-3S14.2,2,12.5,2z M12,9C7.58,9,4,12.58,4,17s3.58,8,8,8,8-3.58,8-8S16.42,9,12,9z\'/%3E%3C/svg%3E")',bgCard:'#2c3342',wrapperBorderRadius:'2px',labels:{alignment:'道义:',power:'功力:',abilities:'武学:',titles:'绰号:',effects:'境况:',equipment:'兵甲:',items:'奇物:',currency:'盘缠:',time:'时日:',location:'所在:',environment:'景致:',dynamics:'风波:',questMain:'命途:',questSide:'萍踪:',npcPower:'功力:'},tabNames:{tab1:'武林谱',tab2:'恩仇录',worldStatus:'江湖风云',factions:'门派帮会',inventory:'英雄行囊',nearby:'江湖过客',bonded:'生死之交',logTitle:'江湖余波:',collapsedCharTitle:'肝胆昆仑',collapsedWorldTitle:'风云一望',journal:'江湖悬赏'}},xuanhuan:{primaryColor:'#8b5cf6',glowColor:'rgba(196, 181, 253, 0.6)',accentColor:'#38bdf8',bondedColor:'#38bdf8',bgPanel:'rgba(5, 5, 15, 0.9)',bgSection:'rgba(0, 0, 0, 0.4)',borderSection:'rgba(139, 92, 246, 0.3)',textMain:'#e9d5ff',textHeader:'#c4b5fd',bgImage:'url("data:image/svg+xml,%3Csvg xmlns=\'http://www.w3.org/2000/svg\' width=\'100\' height=\'100\'%3E%3Crect width=\'100\' height=\'100\' fill=\'rgba(5,5,15,0)\'/%3E%3Ccircle cx=\'10\' cy=\'15\' r=\'1.5\' fill=\'rgba(233,213,255,0.7)\'/%3E%3Ccircle cx=\'80\' cy=\'10\' r=\'1\' fill=\'rgba(233,213,255,0.5)\'/%3E%3Ccircle cx=\'50\' cy=\'30\' r=\'2\' fill=\'rgba(233,213,255,0.9)\'/%3E%3Ccircle cx=\'30\' cy=\'60\' r=\'1.2\' fill=\'rgba(233,213,255,0.6)\'/%3E%3Ccircle cx=\'90\' cy=\'70\' r=\'1.8\' fill=\'rgba(233,213,255,0.8)\'/%3E%3Ccircle cx=\'60\' cy=\'90\' r=\'1\' fill=\'rgba(233,213,255,0.5)\'/%3E%3Ccircle cx=\'5\' cy=\'80\' r=\'1.3\' fill=\'rgba(233,213,255,0.7)\'/%3E%3Ccircle cx=\'70\' cy=\'50\' r=\'1.5\' fill=\'rgba(233,213,255,0.9)\'/%3E%3C/svg%3E")',titleIconContent:'',titleIconSvg:'url("data:image/svg+xml,%3Csvg xmlns=\'http://www.w3.org/2000/svg\' viewBox=\'0 0 24 24\' fill=\'currentColor\'%3E%3Cpath d=\'M12,2A10,10,0,0,0,4.2,5.23a1,1,0,0,0,1.28,1.52,7.91,7.91,0,0,1,13.06,0,1,1,0,0,0,1.28-1.52A10,10,0,0,0,12,2Zm0,20a10,10,0,0,0,7.8-3.23,1,1,0,0,0-1.28-1.52,7.91,7.91,0,0,1-13.06,0,1,1,0,1,0-1.28,1.52A10,10,0,0,0,12,22Zm-2-8a2,2,0,1,1,2,2A2,2,0,0,1,10,14Zm6.46-5.8a1,1,0,0,0-1.63-.5,5.92,5.92,0,0,0-9.66,0,1,1,0,1,0-1.63.5,8,8,0,0,1,12.92,0Z\'/%3E%3C/svg%3E")',bgCard:'#1f1d2e',wrapperBorderRadius:'10px',labels:{alignment:'宿命:',power:'位阶:',abilities:'权能:',titles:'尊名:',effects:'迹印:',equipment:'神器:',items:'圣物:',currency:'奇珍:',time:'纪元:',location:'界域:',environment:'万象:',dynamics:'星流:',questMain:'命轨:',questSide:'星尘:',npcPower:'位阶:'},tabNames:{tab1:'万象录',tab2:'神魂谱',worldStatus:'位面法则',factions:'神魔序列',inventory:'虚空之戒',nearby:'异界来客',bonded:'魂之共鸣',logTitle:'因果残响:',collapsedCharTitle:'界旅心灯',collapsedWorldTitle:'位面一窥',journal:'命运之谕'}}},l={COLLAPSE_TEXT:'隐匿命轮',EXPAND_TEXT:'窥见天机',COLLAPSE_ICON:'❖',EXPAND_ICON:'◈',LAYOUT_FIXED_TEXT:'伸缩自如',LAYOUT_DIFFUSION_TEXT:'能屈能伸',LAYOUT_FIXED_ICON:'⇳',LAYOUT_DIFFUSION_ICON:'↕'},n='fate_console_ui_state',o={theme:'gufeng',collapsed:!1,layout:'diffusion'},r=(0,t.ref)({...o}),c=(0,t.computed)(()=>a[r.value.theme]),s=(0,t.computed)(()=>r.value.theme),i=(0,t.computed)(()=>r.value.collapsed),m=(0,t.computed)(()=>r.value.layout);function d(){try{localStorage.setItem(n,JSON.stringify(r.value))}catch(e){console.error('写入记忆失败:',e)}}function p(e){r.value.theme=e,d()}function u(){r.value.collapsed=!r.value.collapsed,d()}function g(){r.value.layout='fixed'===r.value.layout?'diffusion':'fixed',d()}function v(e){return l[e]}function f(e){return c.value.labels[e]||e}function y(e){return c.value.tabNames[e]}const E=['title'],N={class:'console-controls'},k={class:'theme-switcher'},b=['data-theme','title','onClick'],V=['title'],h={class:'icon-fixed'},C={class:'icon-diffusion'},B=['title'],S={class:'icon-collapse'},w={class:'icon-expand'},D={class:'collapsed-view'},x={key:0,class:'collapsed-block'},T={class:'collapsed-title'},q={class:'name-status'},I={class:'mb-2 text-lg font-bold'},L={key:0,class:'info-line'},M={class:'info-label'},A={class:'info-value'},O={class:'progress-bar-group'},F={key:0,class:'progress-bar'},P={class:'progress-bar-text'},X={key:1,class:'progress-bar'},H={class:'progress-bar-text'},U={key:2,class:'progress-bar'},Z={class:'progress-bar-text'},Y={key:1,class:'collapsed-block'},j={class:'collapsed-title'},R={key:0,class:'info-line'},W={class:'info-label'},J={class:'info-value'},G={key:1,class:'info-line'},K={class:'info-label'},Q={class:'info-value'},ee={key:2,class:'info-line'},te={class:'info-label'},ae={class:'info-value'},le={key:3,class:'info-line'},ne={class:'info-label'},oe={class:'info-value'},re={class:'expanded-view'},ce={class:'tab-nav'},se={class:'tab-panel-grid'},ie={key:0,class:'grid-column'},me={class:'section-box'},de={class:'section-title'},pe={class:'char-name'},ue={class:'progress-bar-group'},ge={key:0,class:'progress-bar'},ve={class:'progress-bar-text'},fe={key:1,class:'progress-bar'},ye={class:'progress-bar-text'},Ee={key:2,class:'progress-bar'},Ne={class:'progress-bar-text'},ke={class:'info-line'},be={class:'info-label'},Ve={class:'info-value'},he={class:'info-line'},Ce={class:'info-label'},Be={class:'info-value'},Se={key:0,class:'info-line'},we={class:'info-label'},De={class:'tags-container'},xe={key:1,class:'info-line'},Te={class:'info-label'},qe={class:'tags-container'},Ie={key:2,class:'info-line'},Le={class:'info-label'},Me={class:'tags-container'},_e={key:0,class:'section-box'},Ae={class:'section-title'},Oe={key:0,class:'info-line'},Fe={class:'info-label'},ze={class:'info-value'},Pe={key:1,class:'info-line'},Xe={class:'info-label'},He={class:'tags-container'},Ue={key:2,class:'info-line'},Ze={class:'info-label'},Ye={class:'info-value'},je={key:1,class:'grid-column'},Re={class:'section-box'},We={class:'section-title'},$e={key:0,class:'info-line'},Je={class:'info-label'},Ge={class:'info-value'},Ke={key:1,class:'info-line'},Qe={class:'info-label'},et={class:'info-value'},tt={key:2,class:'info-line'},at={class:'info-label'},lt={class:'info-value'},nt={key:3,class:'info-line'},ot={class:'info-label'},rt={class:'info-value'},ct={key:0,class:'section-box'},st={class:'section-title'},it={class:'quest-list'},mt={class:'info-label'},dt={class:'info-value'},pt={key:1,class:'section-box'},ut={class:'section-title'},gt={class:'info-label'},vt={class:'info-value'},ft={class:'character-annals-grid'},yt={key:0,class:'grid-column'},Et={class:'section-box bonded-section'},Nt={class:'section-title'},kt={class:'npc-grid'},bt={class:'card-front'},Vt={class:'npc-header'},ht={key:0,class:'npc-status'},Ct={class:'npc-header-right'},Bt={key:0,class:'npc-location'},St={class:'info-line'},wt={class:'info-value'},Dt={class:'info-line'},xt={class:'info-label'},Tt={class:'info-value'},qt={key:0,class:'info-line'},It={class:'info-label'},Lt={class:'info-value'},Mt={key:1,class:'info-line'},_t={class:'info-label'},At={class:'tags-container'},Ot={class:'card-back'},Ft={class:'npc-header'},zt={key:0,class:'npc-status'},Pt={key:0,class:'npc-location'},Xt={key:0,class:'progress-bar-group'},Ht={key:0,class:'progress-bar'},Ut={class:'progress-bar-text'},Zt={key:1,class:'progress-bar'},Yt={class:'progress-bar-text'},jt={key:2,class:'progress-bar'},Rt={class:'progress-bar-text'},Wt={key:3,class:'progress-bar'},$t={class:'progress-bar-text'},Jt={key:1,class:'info-line'},Gt={class:'info-label'},Kt={class:'tags-container'},Qt={key:1,class:'grid-column'},ea={class:'section-box'},ta={class:'section-title'},aa={class:'npc-grid'},la={class:'card-front'},na={class:'npc-header'},oa={key:0,class:'npc-status'},ra={key:0,class:'npc-location'},ca={class:'info-line'},sa={class:'info-value'},ia={class:'info-line'},ma={class:'info-label'},da={class:'info-value'},pa={key:0,class:'info-line'},ua={class:'info-label'},ga={class:'info-value'},va={key:1,class:'info-line'},fa={class:'info-label'},ya={class:'tags-container'},Ea={class:'card-back'},Na={class:'npc-header'},ka={key:0,class:'npc-status'},ba={key:0,class:'npc-location'},Va={key:0,class:'progress-bar-group'},ha={key:0,class:'progress-bar'},Ca={class:'progress-bar-text'},Ba={key:1,class:'progress-bar'},Sa={class:'progress-bar-text'},wa={key:2,class:'progress-bar'},Da={class:'progress-bar-text'},xa={key:3,class:'progress-bar'},Ta={class:'progress-bar-text'},qa={key:1,class:'info-line'},Ia={class:'info-label'},La={class:'tags-container'},Ma={key:1,class:'log-container'},_a={class:'log-title'},Aa={class:'log-box'},Oa=(0,t.defineComponent)({__name:'app',setup(e){const a=(0,t.computed)(()=>function(){try{const e=getChatMessages(getCurrentMessageId())[0].message.match(/<fate_console>([\s\S]*?)<\/fate_console>/);if(!e||!e[1])return null;const t='<root>'+e[1].trim()+'</root>',a=(new DOMParser).parseFromString(t,'text/xml');if(a.querySelector('parsererror'))throw new Error('XML Parsing Error.');const l=(e,t=a)=>t.querySelector(e),n=(e,t=a)=>t.querySelectorAll(e),o=(e,t=a)=>t.querySelector(e)?.textContent||'',r={nearbyNpcs:[],bondedNpcs:[],log:o('log')},c=a.querySelector('character');if(c){const e=l('name',c),t=e?.textContent?.trim()||'',n=e?.getAttribute('alias')?.trim();r.character={name:t,alias:n,status:o('status',c),alignment:o('alignment',c).trim(),power:o('power',c).trim(),abilities:o('abilities',c).trim().split(/,|，/).map(e=>e.trim()).filter(Boolean),titles:(n||'').split(/,|，/).map(e=>e.trim()).filter(Boolean),effects:o('effects',c).trim().split(/,|，/).map(e=>e.trim()).filter(Boolean),thought:o('thought',c).trim()};const s=o('status',c),i=s.match(/HP\s*[\d/]+/)?.[0],m=s.match(/MP\s*[\d/]+/)?.[0],d=s.match(/STA\s*[\d/]+/)?.[0];i&&(r.character.hp=i),m&&(r.character.mp=m),d&&(r.character.sta=d);const p=a.querySelector('inventory');p&&(r.character.inventory={equipment:o('equipment',p).trim(),items:o('items',p).trim().split(/,|，/).map(e=>e.trim()).filter(Boolean),currency:o('currency',p).trim()})}const s=a.querySelector('world');s&&(r.world={time:o('time',s).trim(),location:o('location',s).trim(),environment:o('environment',s).trim(),dynamics:o('dynamics',s).trim(),quests:[],factions:[]},n('journal > quest').forEach(e=>{const t=e.getAttribute('type')||'支线',a=e.textContent?.trim()||'';r.world.quests.push({type:t,content:a})}),n('factions > faction').forEach(e=>{const t=e.getAttribute('name')||'',a=e.textContent?.trim()||'';r.world.factions.push({name:t,value:a})}));const i=e=>{const t=o('name',e).trim(),a=o('status',e),l=e.getAttribute('sr'),n=e.getAttribute('sd'),r={name:t,info:o('info',e).trim(),power:o('power',e).trim(),status:a,location:e.getAttribute('location')?.trim(),sr:'是'===l,sd:n?parseInt(n,10):void 0,equipment:o('equipment',e).trim(),abilities:o('abilities',e).trim().split(/,|，/).map(e=>e.trim()).filter(Boolean),effects:o('effects',e).trim().split(/,|，/).map(e=>e.trim()).filter(Boolean)},c=a.match(/HP\s*[\d/]+/)?.[0],s=a.match(/MP\s*[\d/]+/)?.[0],i=a.match(/STA\s*[\d/]+/)?.[0];return c&&(r.hp=c),s&&(r.mp=s),i&&(r.sta=i),r};return n('nearby_npcs > npc').forEach(e=>{r.nearbyNpcs.push(i(e))}),n('bonded_characters > npc').forEach(e=>{r.bondedNpcs.push(i(e))}),r}catch(e){return console.error('命运终端数据解析失败:',e),null}}()),l=(0,t.ref)('fate-scroll'),c=['gufeng','xianxia','minsu','wuxia','xuanhuan'],d=(0,t.computed)(()=>({'console-wrapper':!0,[`theme-${s.value}`]:'gufeng'!==s.value,collapsed:i.value,'fixed-layout':'fixed'===m.value})),Oa=(0,t.computed)(()=>i.value?v('EXPAND_TEXT'):v('COLLAPSE_TEXT')),Fa=(0,t.computed)(()=>v('EXPAND_ICON')),za=(0,t.computed)(()=>v('COLLAPSE_ICON')),Pa=(0,t.computed)(()=>'fixed'===m.value?v('LAYOUT_FIXED_TEXT'):v('LAYOUT_DIFFUSION_TEXT')),Xa=(0,t.computed)(()=>v('LAYOUT_FIXED_ICON')),Ha=(0,t.computed)(()=>v('LAYOUT_DIFFUSION_ICON')),Ua=(0,t.computed)(()=>a.value?.log?a.value.log.split(/\r?\n/).filter(e=>''!==e.trim()).map(e=>e.trim()):[]);function Za(e){return{gufeng:'古风',xianxia:'仙侠',minsu:'民俗',wuxia:'武侠',xuanhuan:'玄幻'}[e]||e}function Ya(e){const t=Math.max(e.lastIndexOf('('),e.lastIndexOf('（')),a=Math.max(e.lastIndexOf(')'),e.lastIndexOf('）'));return t>-1&&a>t?e.slice(t+1,a):'状态未知'}function ja(e){const t=e.match(/(\d+)\s*\/\s*(\d+)/);if(!t)return'0%';const[,a,l]=t;return`${parseFloat(l)>0?parseFloat(a)/parseFloat(l)*100:0}%`}function Ra(e){return e<=24?'❄️':e<=49?'🌙':e<=74?'🔥':'❤️'}function Wa(e){e.currentTarget.classList.toggle('is-flipped')}return(0,t.onMounted)(()=>{!function(){try{const e=localStorage.getItem(n);if(e){const t=JSON.parse(e);r.value={...o,...t}}}catch(e){console.error('读取记忆失败:',e)}}()}),(e,n)=>((0,t.openBlock)(),(0,t.createElementBlock)('div',{class:(0,t.normalizeClass)(['fate-console',d.value])},[(0,t.createCommentVNode)(' 顶部思考显示 '),a.value?.character?.thought?((0,t.openBlock)(),(0,t.createElementBlock)('div',{key:0,class:'top-thought-display',title:a.value.character.thought},(0,t.toDisplayString)(a.value.character.thought),9,E)):(0,t.createCommentVNode)('v-if',!0),(0,t.createCommentVNode)(' 控制面板 '),(0,t.createElementVNode)('div',N,[(0,t.createElementVNode)('div',k,[((0,t.openBlock)(),(0,t.createElementBlock)(t.Fragment,null,(0,t.renderList)(c,e=>(0,t.createElementVNode)('div',{key:e,class:(0,t.normalizeClass)(['theme-stone',{active:(0,t.unref)(s)===e}]),'data-theme':e,title:Za(e),onClick:a=>(0,t.unref)(p)(e)},null,10,b)),64))]),(0,t.createElementVNode)('div',{id:'layout-toggle-btn',class:'console-control-btn',title:Pa.value,onClick:n[0]||(n[0]=(...e)=>(0,t.unref)(g)&&(0,t.unref)(g)(...e))},[(0,t.createElementVNode)('span',h,(0,t.toDisplayString)(Xa.value),1),(0,t.createElementVNode)('span',C,(0,t.toDisplayString)(Ha.value),1)],8,V),(0,t.createElementVNode)('div',{id:'console-toggle-btn',class:'console-control-btn',title:Oa.value,onClick:n[1]||(n[1]=(...e)=>(0,t.unref)(u)&&(0,t.unref)(u)(...e))},[(0,t.createElementVNode)('span',S,(0,t.toDisplayString)(za.value),1),(0,t.createElementVNode)('span',w,(0,t.toDisplayString)(Fa.value),1)],8,B)]),(0,t.createCommentVNode)(' 折叠视图 '),(0,t.createElementVNode)('div',D,[a.value?.character?((0,t.openBlock)(),(0,t.createElementBlock)('div',x,[(0,t.createElementVNode)('h3',T,(0,t.toDisplayString)((0,t.unref)(y)('collapsedCharTitle')),1),(0,t.createElementVNode)('div',q,[(0,t.createElementVNode)('div',I,(0,t.toDisplayString)(a.value.character.name)+' - '+(0,t.toDisplayString)(Ya(a.value.character.status)),1),a.value.character.alignment?((0,t.openBlock)(),(0,t.createElementBlock)('div',L,[(0,t.createElementVNode)('span',M,(0,t.toDisplayString)((0,t.unref)(f)('alignment')),1),(0,t.createElementVNode)('span',A,(0,t.toDisplayString)(a.value.character.alignment),1)])):(0,t.createCommentVNode)('v-if',!0)]),(0,t.createElementVNode)('div',O,[a.value.character.hp?((0,t.openBlock)(),(0,t.createElementBlock)('div',F,[(0,t.createElementVNode)('div',{class:'progress-bar-fill hp',style:(0,t.normalizeStyle)({width:ja(a.value.character.hp)})},null,4),(0,t.createElementVNode)('span',P,(0,t.toDisplayString)(a.value.character.hp),1)])):(0,t.createCommentVNode)('v-if',!0),a.value.character.mp?((0,t.openBlock)(),(0,t.createElementBlock)('div',X,[(0,t.createElementVNode)('div',{class:'progress-bar-fill mp',style:(0,t.normalizeStyle)({width:ja(a.value.character.mp)})},null,4),(0,t.createElementVNode)('span',H,(0,t.toDisplayString)(a.value.character.mp),1)])):(0,t.createCommentVNode)('v-if',!0),a.value.character.sta?((0,t.openBlock)(),(0,t.createElementBlock)('div',U,[(0,t.createElementVNode)('div',{class:'progress-bar-fill sta',style:(0,t.normalizeStyle)({width:ja(a.value.character.sta)})},null,4),(0,t.createElementVNode)('span',Z,(0,t.toDisplayString)(a.value.character.sta),1)])):(0,t.createCommentVNode)('v-if',!0)])])):(0,t.createCommentVNode)('v-if',!0),a.value?.world?((0,t.openBlock)(),(0,t.createElementBlock)('div',Y,[(0,t.createElementVNode)('h3',j,(0,t.toDisplayString)((0,t.unref)(y)('collapsedWorldTitle')),1),a.value.world.time?((0,t.openBlock)(),(0,t.createElementBlock)('div',R,[(0,t.createElementVNode)('span',W,(0,t.toDisplayString)((0,t.unref)(f)('time')),1),(0,t.createElementVNode)('span',J,(0,t.toDisplayString)(a.value.world.time),1)])):(0,t.createCommentVNode)('v-if',!0),a.value.world.location?((0,t.openBlock)(),(0,t.createElementBlock)('div',G,[(0,t.createElementVNode)('span',K,(0,t.toDisplayString)((0,t.unref)(f)('location')),1),(0,t.createElementVNode)('span',Q,(0,t.toDisplayString)(a.value.world.location),1)])):(0,t.createCommentVNode)('v-if',!0),a.value.world.environment?((0,t.openBlock)(),(0,t.createElementBlock)('div',ee,[(0,t.createElementVNode)('span',te,(0,t.toDisplayString)((0,t.unref)(f)('environment')),1),(0,t.createElementVNode)('span',ae,(0,t.toDisplayString)(a.value.world.environment),1)])):(0,t.createCommentVNode)('v-if',!0),a.value.world.dynamics?((0,t.openBlock)(),(0,t.createElementBlock)('div',le,[(0,t.createElementVNode)('span',ne,(0,t.toDisplayString)((0,t.unref)(f)('dynamics')),1),(0,t.createElementVNode)('span',oe,(0,t.toDisplayString)(a.value.world.dynamics),1)])):(0,t.createCommentVNode)('v-if',!0)])):(0,t.createCommentVNode)('v-if',!0)]),(0,t.createCommentVNode)(' 展开视图 '),(0,t.createElementVNode)('div',re,[(0,t.createElementVNode)('nav',ce,[(0,t.createElementVNode)('button',{class:(0,t.normalizeClass)(['tab-btn',{active:'fate-scroll'===l.value}]),onClick:n[2]||(n[2]=e=>l.value='fate-scroll')},(0,t.toDisplayString)((0,t.unref)(y)('tab1')),3),(0,t.createElementVNode)('button',{class:(0,t.normalizeClass)(['tab-btn',{active:'annals'===l.value}]),onClick:n[3]||(n[3]=e=>l.value='annals')},(0,t.toDisplayString)((0,t.unref)(y)('tab2')),3)]),(0,t.createCommentVNode)(' 山河册/天机卷/风物志/武林谱/万象录 标签页 '),(0,t.createElementVNode)('div',{id:'fate-scroll',class:(0,t.normalizeClass)(['tab-panel',{active:'fate-scroll'===l.value}])},[(0,t.createElementVNode)('div',se,[(0,t.createCommentVNode)(' 角色信息列 '),a.value?.character?((0,t.openBlock)(),(0,t.createElementBlock)('div',ie,[(0,t.createElementVNode)('div',me,[(0,t.createElementVNode)('h2',de,[(0,t.createElementVNode)('span',pe,(0,t.toDisplayString)(a.value.character.name),1),n[6]||(n[6]=(0,t.createElementVNode)('span',null,'-',-1)),(0,t.createElementVNode)('span',null,(0,t.toDisplayString)(Ya(a.value.character.status)),1)]),(0,t.createElementVNode)('div',ue,[a.value.character.hp?((0,t.openBlock)(),(0,t.createElementBlock)('div',ge,[(0,t.createElementVNode)('div',{class:'progress-bar-fill hp',style:(0,t.normalizeStyle)({width:ja(a.value.character.hp)})},null,4),(0,t.createElementVNode)('span',ve,(0,t.toDisplayString)(a.value.character.hp),1)])):(0,t.createCommentVNode)('v-if',!0),a.value.character.mp?((0,t.openBlock)(),(0,t.createElementBlock)('div',fe,[(0,t.createElementVNode)('div',{class:'progress-bar-fill mp',style:(0,t.normalizeStyle)({width:ja(a.value.character.mp)})},null,4),(0,t.createElementVNode)('span',ye,(0,t.toDisplayString)(a.value.character.mp),1)])):(0,t.createCommentVNode)('v-if',!0),a.value.character.sta?((0,t.openBlock)(),(0,t.createElementBlock)('div',Ee,[(0,t.createElementVNode)('div',{class:'progress-bar-fill sta',style:(0,t.normalizeStyle)({width:ja(a.value.character.sta)})},null,4),(0,t.createElementVNode)('span',Ne,(0,t.toDisplayString)(a.value.character.sta),1)])):(0,t.createCommentVNode)('v-if',!0)]),(0,t.createElementVNode)('div',ke,[(0,t.createElementVNode)('span',be,(0,t.toDisplayString)((0,t.unref)(f)('alignment')),1),(0,t.createElementVNode)('span',Ve,(0,t.toDisplayString)(a.value.character.alignment),1)]),(0,t.createElementVNode)('div',he,[(0,t.createElementVNode)('span',Ce,(0,t.toDisplayString)((0,t.unref)(f)('power')),1),(0,t.createElementVNode)('span',Be,(0,t.toDisplayString)(a.value.character.power),1)]),a.value.character.abilities.length?((0,t.openBlock)(),(0,t.createElementBlock)('div',Se,[(0,t.createElementVNode)('span',we,(0,t.toDisplayString)((0,t.unref)(f)('abilities')),1),(0,t.createElementVNode)('div',De,[((0,t.openBlock)(!0),(0,t.createElementBlock)(t.Fragment,null,(0,t.renderList)(a.value.character.abilities,e=>((0,t.openBlock)(),(0,t.createElementBlock)('span',{key:e,class:'tag'},(0,t.toDisplayString)(e),1))),128))])])):(0,t.createCommentVNode)('v-if',!0),a.value.character.titles.length?((0,t.openBlock)(),(0,t.createElementBlock)('div',xe,[(0,t.createElementVNode)('span',Te,(0,t.toDisplayString)((0,t.unref)(f)('titles')),1),(0,t.createElementVNode)('div',qe,[((0,t.openBlock)(!0),(0,t.createElementBlock)(t.Fragment,null,(0,t.renderList)(a.value.character.titles,e=>((0,t.openBlock)(),(0,t.createElementBlock)('span',{key:e,class:'tag'},(0,t.toDisplayString)(e),1))),128))])])):(0,t.createCommentVNode)('v-if',!0),a.value.character.effects.length?((0,t.openBlock)(),(0,t.createElementBlock)('div',Ie,[(0,t.createElementVNode)('span',Le,(0,t.toDisplayString)((0,t.unref)(f)('effects')),1),(0,t.createElementVNode)('div',Me,[((0,t.openBlock)(!0),(0,t.createElementBlock)(t.Fragment,null,(0,t.renderList)(a.value.character.effects,e=>((0,t.openBlock)(),(0,t.createElementBlock)('span',{key:e,class:'tag'},(0,t.toDisplayString)(e),1))),128))])])):(0,t.createCommentVNode)('v-if',!0)]),(0,t.createCommentVNode)(' 物品栏 '),a.value.character.inventory?((0,t.openBlock)(),(0,t.createElementBlock)('div',_e,[(0,t.createElementVNode)('h2',Ae,(0,t.toDisplayString)((0,t.unref)(y)('inventory')),1),a.value.character.inventory.equipment?((0,t.openBlock)(),(0,t.createElementBlock)('div',Oe,[(0,t.createElementVNode)('span',Fe,(0,t.toDisplayString)((0,t.unref)(f)('equipment')),1),(0,t.createElementVNode)('span',ze,(0,t.toDisplayString)(a.value.character.inventory.equipment),1)])):(0,t.createCommentVNode)('v-if',!0),a.value.character.inventory.items?.length?((0,t.openBlock)(),(0,t.createElementBlock)('div',Pe,[(0,t.createElementVNode)('span',Xe,(0,t.toDisplayString)((0,t.unref)(f)('items')),1),(0,t.createElementVNode)('div',He,[((0,t.openBlock)(!0),(0,t.createElementBlock)(t.Fragment,null,(0,t.renderList)(a.value.character.inventory.items,e=>((0,t.openBlock)(),(0,t.createElementBlock)('span',{key:e,class:'tag'},(0,t.toDisplayString)(e),1))),128))])])):(0,t.createCommentVNode)('v-if',!0),a.value.character.inventory.currency?((0,t.openBlock)(),(0,t.createElementBlock)('div',Ue,[(0,t.createElementVNode)('span',Ze,(0,t.toDisplayString)((0,t.unref)(f)('currency')),1),(0,t.createElementVNode)('span',Ye,(0,t.toDisplayString)(a.value.character.inventory.currency),1)])):(0,t.createCommentVNode)('v-if',!0)])):(0,t.createCommentVNode)('v-if',!0)])):(0,t.createCommentVNode)('v-if',!0),(0,t.createCommentVNode)(' 世界信息列 '),a.value?.world?((0,t.openBlock)(),(0,t.createElementBlock)('div',je,[(0,t.createElementVNode)('div',Re,[(0,t.createElementVNode)('h2',We,(0,t.toDisplayString)((0,t.unref)(y)('worldStatus')),1),a.value.world.time?((0,t.openBlock)(),(0,t.createElementBlock)('div',$e,[(0,t.createElementVNode)('span',Je,(0,t.toDisplayString)((0,t.unref)(f)('time')),1),(0,t.createElementVNode)('span',Ge,(0,t.toDisplayString)(a.value.world.time),1)])):(0,t.createCommentVNode)('v-if',!0),a.value.world.location?((0,t.openBlock)(),(0,t.createElementBlock)('div',Ke,[(0,t.createElementVNode)('span',Qe,(0,t.toDisplayString)((0,t.unref)(f)('location')),1),(0,t.createElementVNode)('span',et,(0,t.toDisplayString)(a.value.world.location),1)])):(0,t.createCommentVNode)('v-if',!0),a.value.world.environment?((0,t.openBlock)(),(0,t.createElementBlock)('div',tt,[(0,t.createElementVNode)('span',at,(0,t.toDisplayString)((0,t.unref)(f)('environment')),1),(0,t.createElementVNode)('span',lt,(0,t.toDisplayString)(a.value.world.environment),1)])):(0,t.createCommentVNode)('v-if',!0),a.value.world.dynamics?((0,t.openBlock)(),(0,t.createElementBlock)('div',nt,[(0,t.createElementVNode)('span',ot,(0,t.toDisplayString)((0,t.unref)(f)('dynamics')),1),(0,t.createElementVNode)('span',rt,(0,t.toDisplayString)(a.value.world.dynamics),1)])):(0,t.createCommentVNode)('v-if',!0)]),(0,t.createCommentVNode)(' 任务日志 '),a.value.world.quests.length?((0,t.openBlock)(),(0,t.createElementBlock)('div',ct,[(0,t.createElementVNode)('h2',st,(0,t.toDisplayString)((0,t.unref)(y)('journal')),1),(0,t.createElementVNode)('div',it,[((0,t.openBlock)(!0),(0,t.createElementBlock)(t.Fragment,null,(0,t.renderList)(a.value.world.quests,e=>((0,t.openBlock)(),(0,t.createElementBlock)('div',{key:e.content,class:(0,t.normalizeClass)(['info-line','quest-'+('主线'===e.type?'main':'side')])},[(0,t.createElementVNode)('span',mt,(0,t.toDisplayString)((0,t.unref)(f)('主线'===e.type?'questMain':'questSide')),1),(0,t.createElementVNode)('span',dt,(0,t.toDisplayString)(e.content),1)],2))),128))])])):(0,t.createCommentVNode)('v-if',!0),(0,t.createCommentVNode)(' 派系 '),a.value.world.factions.length?((0,t.openBlock)(),(0,t.createElementBlock)('div',pt,[(0,t.createElementVNode)('h2',ut,(0,t.toDisplayString)((0,t.unref)(y)('factions')),1),((0,t.openBlock)(!0),(0,t.createElementBlock)(t.Fragment,null,(0,t.renderList)(a.value.world.factions,e=>((0,t.openBlock)(),(0,t.createElementBlock)('div',{key:e.name,class:'info-line'},[(0,t.createElementVNode)('span',gt,(0,t.toDisplayString)(e.name)+':',1),(0,t.createElementVNode)('span',vt,(0,t.toDisplayString)(e.value),1)]))),128))])):(0,t.createCommentVNode)('v-if',!0)])):(0,t.createCommentVNode)('v-if',!0)])],2),(0,t.createCommentVNode)(' 衣冠谱/仙缘录/异闻录/恩仇录/神魂谱 标签页 '),(0,t.createElementVNode)('div',{id:'annals',class:(0,t.normalizeClass)(['tab-panel',{active:'annals'===l.value}])},[(0,t.createElementVNode)('div',ft,[(0,t.createCommentVNode)(' 羁绊角色 '),a.value?.bondedNpcs.length?((0,t.openBlock)(),(0,t.createElementBlock)('div',yt,[(0,t.createElementVNode)('div',Et,[(0,t.createElementVNode)('h2',Nt,(0,t.toDisplayString)((0,t.unref)(y)('bonded')),1),(0,t.createElementVNode)('div',kt,[((0,t.openBlock)(!0),(0,t.createElementBlock)(t.Fragment,null,(0,t.renderList)(a.value.bondedNpcs,e=>((0,t.openBlock)(),(0,t.createElementBlock)('div',{key:e.name,class:'npc-card bonded',onClick:n[4]||(n[4]=e=>Wa(e))},[(0,t.createElementVNode)('div',bt,[(0,t.createElementVNode)('div',Vt,[(0,t.createElementVNode)('div',null,[(0,t.createElementVNode)('span',{class:(0,t.normalizeClass)(['npc-name',{'sr-active':e.sr}])},(0,t.toDisplayString)(e.name),3),Ya(e.status)?((0,t.openBlock)(),(0,t.createElementBlock)('span',ht,'('+(0,t.toDisplayString)(Ya(e.status))+')',1)):(0,t.createCommentVNode)('v-if',!0)]),(0,t.createElementVNode)('div',Ct,[e.location?((0,t.openBlock)(),(0,t.createElementBlock)('span',Bt,'@ '+(0,t.toDisplayString)(e.location),1)):(0,t.createCommentVNode)('v-if',!0)])]),(0,t.createElementVNode)('div',St,[(0,t.createElementVNode)('span',wt,(0,t.toDisplayString)(e.info),1)]),(0,t.createElementVNode)('div',Dt,[(0,t.createElementVNode)('span',xt,(0,t.toDisplayString)((0,t.unref)(f)('npcPower')),1),(0,t.createElementVNode)('span',Tt,(0,t.toDisplayString)(e.power),1)]),e.equipment?((0,t.openBlock)(),(0,t.createElementBlock)('div',qt,[(0,t.createElementVNode)('span',It,(0,t.toDisplayString)((0,t.unref)(f)('equipment')),1),(0,t.createElementVNode)('span',Lt,(0,t.toDisplayString)(e.equipment),1)])):(0,t.createCommentVNode)('v-if',!0),e.abilities.length?((0,t.openBlock)(),(0,t.createElementBlock)('div',Mt,[(0,t.createElementVNode)('span',_t,(0,t.toDisplayString)((0,t.unref)(f)('abilities')),1),(0,t.createElementVNode)('div',At,[((0,t.openBlock)(!0),(0,t.createElementBlock)(t.Fragment,null,(0,t.renderList)(e.abilities,e=>((0,t.openBlock)(),(0,t.createElementBlock)('span',{key:e,class:'tag'},(0,t.toDisplayString)(e),1))),128))])])):(0,t.createCommentVNode)('v-if',!0)]),(0,t.createElementVNode)('div',Ot,[(0,t.createElementVNode)('div',Ft,[(0,t.createElementVNode)('div',null,[(0,t.createElementVNode)('span',{class:(0,t.normalizeClass)(['npc-name',{'sr-active':e.sr}])},(0,t.toDisplayString)(e.name),3),Ya(e.status)?((0,t.openBlock)(),(0,t.createElementBlock)('span',zt,'('+(0,t.toDisplayString)(Ya(e.status))+')',1)):(0,t.createCommentVNode)('v-if',!0)]),e.location?((0,t.openBlock)(),(0,t.createElementBlock)('span',Pt,'@ '+(0,t.toDisplayString)(e.location),1)):(0,t.createCommentVNode)('v-if',!0)]),e.hp||e.mp||e.sta||void 0!==e.sd?((0,t.openBlock)(),(0,t.createElementBlock)('div',Xt,[e.hp?((0,t.openBlock)(),(0,t.createElementBlock)('div',Ht,[(0,t.createElementVNode)('div',{class:'progress-bar-fill hp',style:(0,t.normalizeStyle)({width:ja(e.hp)})},null,4),(0,t.createElementVNode)('span',Ut,(0,t.toDisplayString)(e.hp),1)])):(0,t.createCommentVNode)('v-if',!0),e.mp?((0,t.openBlock)(),(0,t.createElementBlock)('div',Zt,[(0,t.createElementVNode)('div',{class:'progress-bar-fill mp',style:(0,t.normalizeStyle)({width:ja(e.mp)})},null,4),(0,t.createElementVNode)('span',Yt,(0,t.toDisplayString)(e.mp),1)])):(0,t.createCommentVNode)('v-if',!0),e.sta?((0,t.openBlock)(),(0,t.createElementBlock)('div',jt,[(0,t.createElementVNode)('div',{class:'progress-bar-fill sta',style:(0,t.normalizeStyle)({width:ja(e.sta)})},null,4),(0,t.createElementVNode)('span',Rt,(0,t.toDisplayString)(e.sta),1)])):(0,t.createCommentVNode)('v-if',!0),void 0!==e.sd?((0,t.openBlock)(),(0,t.createElementBlock)('div',Wt,[(0,t.createElementVNode)('div',{class:'progress-bar-fill sd',style:(0,t.normalizeStyle)({width:Math.max(0,Math.min(100,e.sd))+'%'})},null,4),(0,t.createElementVNode)('span',$t,'SD: '+(0,t.toDisplayString)(e.sd)+'/100 '+(0,t.toDisplayString)(Ra(e.sd)),1)])):(0,t.createCommentVNode)('v-if',!0)])):(0,t.createCommentVNode)('v-if',!0),e.effects.length?((0,t.openBlock)(),(0,t.createElementBlock)('div',Jt,[(0,t.createElementVNode)('span',Gt,(0,t.toDisplayString)((0,t.unref)(f)('effects')),1),(0,t.createElementVNode)('div',Kt,[((0,t.openBlock)(!0),(0,t.createElementBlock)(t.Fragment,null,(0,t.renderList)(e.effects,e=>((0,t.openBlock)(),(0,t.createElementBlock)('span',{key:e,class:'tag'},(0,t.toDisplayString)(e),1))),128))])])):(0,t.createCommentVNode)('v-if',!0)])]))),128))])])])):(0,t.createCommentVNode)('v-if',!0),(0,t.createCommentVNode)(' 附近NPC '),a.value?.nearbyNpcs.length?((0,t.openBlock)(),(0,t.createElementBlock)('div',Qt,[(0,t.createElementVNode)('div',ea,[(0,t.createElementVNode)('h2',ta,(0,t.toDisplayString)((0,t.unref)(y)('nearby')),1),(0,t.createElementVNode)('div',aa,[((0,t.openBlock)(!0),(0,t.createElementBlock)(t.Fragment,null,(0,t.renderList)(a.value.nearbyNpcs,e=>((0,t.openBlock)(),(0,t.createElementBlock)('div',{key:e.name,class:'npc-card',onClick:n[5]||(n[5]=e=>Wa(e))},[(0,t.createElementVNode)('div',la,[(0,t.createElementVNode)('div',na,[(0,t.createElementVNode)('div',null,[(0,t.createElementVNode)('span',{class:(0,t.normalizeClass)(['npc-name',{'sr-active':e.sr}])},(0,t.toDisplayString)(e.name),3),Ya(e.status)?((0,t.openBlock)(),(0,t.createElementBlock)('span',oa,'('+(0,t.toDisplayString)(Ya(e.status))+')',1)):(0,t.createCommentVNode)('v-if',!0)]),e.location?((0,t.openBlock)(),(0,t.createElementBlock)('span',ra,'@ '+(0,t.toDisplayString)(e.location),1)):(0,t.createCommentVNode)('v-if',!0)]),(0,t.createElementVNode)('div',ca,[(0,t.createElementVNode)('span',sa,(0,t.toDisplayString)(e.info),1)]),(0,t.createElementVNode)('div',ia,[(0,t.createElementVNode)('span',ma,(0,t.toDisplayString)((0,t.unref)(f)('npcPower')),1),(0,t.createElementVNode)('span',da,(0,t.toDisplayString)(e.power),1)]),e.equipment?((0,t.openBlock)(),(0,t.createElementBlock)('div',pa,[(0,t.createElementVNode)('span',ua,(0,t.toDisplayString)((0,t.unref)(f)('equipment')),1),(0,t.createElementVNode)('span',ga,(0,t.toDisplayString)(e.equipment),1)])):(0,t.createCommentVNode)('v-if',!0),e.abilities.length?((0,t.openBlock)(),(0,t.createElementBlock)('div',va,[(0,t.createElementVNode)('span',fa,(0,t.toDisplayString)((0,t.unref)(f)('abilities')),1),(0,t.createElementVNode)('div',ya,[((0,t.openBlock)(!0),(0,t.createElementBlock)(t.Fragment,null,(0,t.renderList)(e.abilities,e=>((0,t.openBlock)(),(0,t.createElementBlock)('span',{key:e,class:'tag'},(0,t.toDisplayString)(e),1))),128))])])):(0,t.createCommentVNode)('v-if',!0)]),(0,t.createElementVNode)('div',Ea,[(0,t.createElementVNode)('div',Na,[(0,t.createElementVNode)('div',null,[(0,t.createElementVNode)('span',{class:(0,t.normalizeClass)(['npc-name',{'sr-active':e.sr}])},(0,t.toDisplayString)(e.name),3),Ya(e.status)?((0,t.openBlock)(),(0,t.createElementBlock)('span',ka,'('+(0,t.toDisplayString)(Ya(e.status))+')',1)):(0,t.createCommentVNode)('v-if',!0)]),e.location?((0,t.openBlock)(),(0,t.createElementBlock)('span',ba,'@ '+(0,t.toDisplayString)(e.location),1)):(0,t.createCommentVNode)('v-if',!0)]),e.hp||e.mp||e.sta||void 0!==e.sd?((0,t.openBlock)(),(0,t.createElementBlock)('div',Va,[e.hp?((0,t.openBlock)(),(0,t.createElementBlock)('div',ha,[(0,t.createElementVNode)('div',{class:'progress-bar-fill hp',style:(0,t.normalizeStyle)({width:ja(e.hp)})},null,4),(0,t.createElementVNode)('span',Ca,(0,t.toDisplayString)(e.hp),1)])):(0,t.createCommentVNode)('v-if',!0),e.mp?((0,t.openBlock)(),(0,t.createElementBlock)('div',Ba,[(0,t.createElementVNode)('div',{class:'progress-bar-fill mp',style:(0,t.normalizeStyle)({width:ja(e.mp)})},null,4),(0,t.createElementVNode)('span',Sa,(0,t.toDisplayString)(e.mp),1)])):(0,t.createCommentVNode)('v-if',!0),e.sta?((0,t.openBlock)(),(0,t.createElementBlock)('div',wa,[(0,t.createElementVNode)('div',{class:'progress-bar-fill sta',style:(0,t.normalizeStyle)({width:ja(e.sta)})},null,4),(0,t.createElementVNode)('span',Da,(0,t.toDisplayString)(e.sta),1)])):(0,t.createCommentVNode)('v-if',!0),void 0!==e.sd?((0,t.openBlock)(),(0,t.createElementBlock)('div',xa,[(0,t.createElementVNode)('div',{class:'progress-bar-fill sd',style:(0,t.normalizeStyle)({width:Math.max(0,Math.min(100,e.sd))+'%'})},null,4),(0,t.createElementVNode)('span',Ta,'SD: '+(0,t.toDisplayString)(e.sd)+'/100 '+(0,t.toDisplayString)(Ra(e.sd)),1)])):(0,t.createCommentVNode)('v-if',!0)])):(0,t.createCommentVNode)('v-if',!0),e.effects.length?((0,t.openBlock)(),(0,t.createElementBlock)('div',qa,[(0,t.createElementVNode)('span',Ia,(0,t.toDisplayString)((0,t.unref)(f)('effects')),1),(0,t.createElementVNode)('div',La,[((0,t.openBlock)(!0),(0,t.createElementBlock)(t.Fragment,null,(0,t.renderList)(e.effects,e=>((0,t.openBlock)(),(0,t.createElementBlock)('span',{key:e,class:'tag'},(0,t.toDisplayString)(e),1))),128))])])):(0,t.createCommentVNode)('v-if',!0)])]))),128))])])])):(0,t.createCommentVNode)('v-if',!0)])],2)]),(0,t.createCommentVNode)(' 日志区域 '),a.value?.log?((0,t.openBlock)(),(0,t.createElementBlock)('div',Ma,[(0,t.createElementVNode)('h3',_a,(0,t.toDisplayString)((0,t.unref)(y)('logTitle')),1),(0,t.createElementVNode)('div',Aa,[((0,t.openBlock)(!0),(0,t.createElementBlock)(t.Fragment,null,(0,t.renderList)(Ua.value,e=>((0,t.openBlock)(),(0,t.createElementBlock)('p',{key:e,class:'log-entry'},(0,t.toDisplayString)(e),1))),128))])])):(0,t.createCommentVNode)('v-if',!0)],2))}}),Fa=(0,e.createRouter)({history:(0,e.createMemoryHistory)(),routes:[{path:'/',component:Oa}]});Fa.replace('/'),$(()=>{(0,t.createApp)(Oa).use(Fa).mount('#app')});</script><style>:root{--bg-card:#2a231c;--card-texture:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAKCAYAAACNMs+9AAAAAXNSR0IArs4c6QAAAD5JREFUKFN1jKENADAIAsie//9n7g5W1sAIgtA54h7M47n4LpweR45zYAUkI5Oi6VEvrp/fGBsQhAEd8q23fQGWbALfWzvxjAAAAABJRU5ErkJggg==");--font-header:"Ma Shan Zheng",cursive;--font-body:"Noto Serif SC",serif;--primary-color:#c89b3c;--glow-color:rgba(255,215,0,0.6);--accent-color:#e74c3c;--bonded-color:#f472b6;--bg-panel:rgba(30,25,20,0.85);--bg-section:rgba(10,5,0,0.4);--border-section:rgba(200,155,60,0.3);--text-main:#f0e6d2;--text-header:var(--primary-color);--hp-color:#c0392b;--mp-color:#2980b9;--sta-color:#27ae60;--sd-color:#e879f9;--bg-image:url("https://www.transparenttextures.com/patterns/old-wall.png");--title-icon-content:"";--title-icon-svg:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='currentColor'%3E%3Cpath d='M12,2A10,10,0,1,0,22,12,10,10,0,0,0,12,2Zm0,18a8,8,0,1,1,8-8A8,8,0,0,1,12,20ZM15,8H9V16h6Z'/%3E%3C/svg%3E");--wrapper-border-radius:10px}.theme-xianxia{--primary-color:#34d399;--glow-color:rgba(167,243,208,0.7);--accent-color:#f59e0b;--bonded-color:#e53e3e;--bg-panel:rgba(15,30,25,0.85);--bg-section:rgba(5,15,10,0.4);--border-section:rgba(52,211,153,0.3);--text-main:#e0f2f1;--text-header:var(--primary-color);--bg-image:url("https://www.transparenttextures.com/patterns/gplay.png");--title-icon-content:"☯";--title-icon-svg:none;--bg-card:#182825}.theme-minsu{--primary-color:#ef4444;--glow-color:rgba(252,165,165,0.7);--accent-color:#facc15;--bonded-color:var(--accent-color);--bg-panel:rgba(40,10,10,0.85);--bg-section:rgba(20,0,0,0.4);--border-section:rgba(239,68,68,0.3);--text-main:#fef2f2;--text-header:#fca5a5;--bg-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='80' height='80'%3E%3Cg fill='%23a11d1d' opacity='0.35'%3E%3Cpath d='M15 8 C 10 5, 5 10, 8 15 L 12 18 C 15 22, 22 20, 20 15 Z' /%3E%3Ccircle cx='50' cy='10' r='5' /%3E%3Cellipse cx='65' cy='60' rx='8' ry='4' transform='rotate(45 65 60)' /%3E%3Cpath d='M30 70 C 25 75, 35 80, 40 75 L 42 72 C 45 68, 38 65, 35 68 Z' /%3E%3Ccircle cx='10' cy='50' r='3' /%3E%3Ccircle cx='70' cy='30' r='2' /%3E%3C/g%3E%3C/svg%3E");--title-icon-content:"🏮";--title-icon-svg:none;--bg-card:#3a1a1a}.theme-wuxia{--primary-color:#e5e7eb;--glow-color:rgba(255,255,255,0.3);--accent-color:#dc2626;--bonded-color:#34d399;--bg-panel:rgba(17,24,39,0.9);--bg-section:rgba(31,41,55,0.5);--border-section:rgba(229,231,235,0.3);--text-main:#f9fafb;--text-header:var(--primary-color);--bg-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='40' height='40'%3E%3Cpath d='M0 10 H15 V25 H0 V40 H30 V10 H40 V0 H10 V-10' fill='none' stroke='rgba(229, 231, 235, 0.15)' stroke-width='2'/%3E%3C/svg%3E");--title-icon-content:"";--title-icon-svg:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='currentColor'%3E%3Cpath d='M12.5,2C10.8,2,9.5,3.3,9.5,5s1.3,3,3,3,3-1.3,3-3S14.2,2,12.5,2z M12,9C7.58,9,4,12.58,4,17s3.58,8,8,8,8-3.58,8-8S16.42,9,12,9z'/%3E%3C/svg%3E");--wrapper-border-radius:2px;--bg-card:#2c3342}.theme-xuanhuan{--primary-color:#8b5cf6;--glow-color:rgba(196,181,253,0.6);--accent-color:#38bdf8;--bonded-color:var(--accent-color);--bg-panel:rgba(5,5,15,0.9);--bg-section:rgba(0,0,0,0.4);--border-section:rgba(139,92,246,0.3);--text-main:#e9d5ff;--text-header:#c4b5fd;--bg-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='100' height='100'%3E%3Crect width='100' height='100' fill='rgba(5,5,15,0)'/%3E%3Ccircle cx='10' cy='15' r='1.5' fill='rgba(233,213,255,0.7)'/%3E%3Ccircle cx='80' cy='10' r='1' fill='rgba(233,213,255,0.5)'/%3E%3Ccircle cx='50' cy='30' r='2' fill='rgba(233,213,255,0.9)'/%3E%3Ccircle cx='30' cy='60' r='1.2' fill='rgba(233,213,255,0.6)'/%3E%3Ccircle cx='90' cy='70' r='1.8' fill='rgba(233,213,255,0.8)'/%3E%3Ccircle cx='60' cy='90' r='1' fill='rgba(233,213,255,0.5)'/%3E%3Ccircle cx='5' cy='80' r='1.3' fill='rgba(233,213,255,0.7)'/%3E%3Ccircle cx='70' cy='50' r='1.5' fill='rgba(233,213,255,0.9)'/%3E%3C/svg%3E");--title-icon-content:"";--title-icon-svg:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='currentColor'%3E%3Cpath d='M12,2A10,10,0,0,0,4.2,5.23a1,1,0,0,0,1.28,1.52,7.91,7.91,0,0,1,13.06,0,1,1,0,0,0,1.28-1.52A10,10,0,0,0,12,2Zm0,20a10,10,0,0,0,7.8-3.23,1,1,0,0,0-1.28-1.52,7.91,7.91,0,0,1-13.06,0,1,1,0,1,0-1.28,1.52A10,10,0,0,0,12,22Zm-2-8a2,2,0,1,1,2,2A2,2,0,0,1,10,14Zm6.46-5.8a1,1,0,0,0-1.63-.5,5.92,5.92,0,0,0-9.66,0,1,1,0,1,0-1.63.5,8,8,0,0,1,12.92,0Z'/%3E%3C/svg%3E");--bg-card:#1f1d2e}.fate-console{position:relative;font-family:var(--font-body);background-color:var(--bg-panel);background-image:var(--bg-image);border:3px solid rgba(0,0,0,0);border-image:linear-gradient(to bottom right,var(--primary-color),#ffd700,var(--primary-color)) 1;border-radius:var(--wrapper-border-radius);padding:15px;padding-top:45px;margin:10px 0;box-shadow:0 0 20px var(--glow-color),inset 0 0 15px rgba(0,0,0,.7),0 0 0 1px hsla(0,0%,100%,.1),0 4px 8px rgba(0,0,0,.3);color:var(--text-main);backdrop-filter:blur(3px);transition:all .4s ease-in-out;animation:fade-in .6s ease-out}.fate-console::before{content:"";position:absolute;top:-2px;left:-2px;right:-2px;bottom:-2px;background:repeating-linear-gradient(0deg,transparent,transparent 3px,rgba(255,255,255,0.1) 3px,rgba(255,255,255,0.1) 6px),repeating-linear-gradient(90deg,transparent,transparent 3px,rgba(255,255,255,0.1) 3px,rgba(255,255,255,0.1) 6px),linear-gradient(135deg,var(--primary-color),transparent,var(--primary-color));background-size:20px 20px,20px 20px,100% 100%;border-radius:var(--wrapper-border-radius);opacity:.3;animation:border-pattern 8s linear infinite;pointer-events:none;-webkit-mask:linear-gradient(#fff 0 0) content-box,linear-gradient(#fff 0 0);mask:linear-gradient(#fff 0 0) content-box,linear-gradient(#fff 0 0);-webkit-mask-composite:xor;mask-composite:xor;-webkit-mask:linear-gradient(#fff 0 0) content-box,linear-gradient(#fff 0 0);-webkit-mask-composite:xor;padding:2px}@keyframes border-pattern{0%{background-position:0 0,0 0,0 0}100%{background-position:20px 20px,20px 20px,100% 100%}}.theme-xianxia .fate-console{border-image:none;border:3px solid rgba(0,0,0,0);box-shadow:0 0 10px var(--primary-color),0 0 25px var(--glow-color),inset 0 0 15px rgba(0,0,0,.7)}.theme-minsu .fate-console{border-image:none;border:3px dashed var(--primary-color)}.theme-wuxia .fate-console{border-image-source:url("data:image/svg+xml;charset=utf-8,%3Csvg width='100' height='100' viewBox='0 0 100 100' xmlns='http://www.w3.org/2000/svg'%3E%3Cstyle%3Epath%7Bfill:%23e5e7eb%7D%3C/style%3E%3Cpath d='M2.1-2.1c-1.7 1.7-1.7 4.5 0 6.1l6.1 6.1c1.7 1.7 4.5 1.7 6.1 0l-6.1-6.1c-1.7-1.7-4.4-1.7-6.1 0zM10.3 6.1c-1.7 1.7-1.7 4.5 0 6.1l6.1 6.1c1.7 1.7 4.5 1.7 6.1 0l-6.1-6.1c-1.7-1.7-4.4-1.7-6.1 0zM18.4 14.2c-1.7 1.7-1.7 4.5 0 6.1l6.1 6.1c1.7 1.7 4.5 1.7 6.1 0l-6.1-6.1c-1.7-1.7-4.4-1.7-6.1 0zM26.5 22.3c-1.7 1.7-1.7 4.5 0 6.1l6.1 6.1c1.7 1.7 4.5 1.7 6.1 0l-6.1-6.1c-1.7-1.7-4.4-1.7-6.1 0zM34.6 30.4c-1.7 1.7-1.7 4.5 0 6.1l6.1 6.1c1.7 1.7 4.5 1.7 6.1 0l-6.1-6.1c-1.7-1.7-4.4-1.7-6.1 0zM42.7 38.5c-1.7 1.7-1.7 4.5 0 6.1l6.1 6.1c1.7 1.7 4.5 1.7 6.1 0l-6.1-6.1c-1.7-1.7-4.4-1.7-6.1 0zM50.8 46.6c-1.7 1.7-1.7 4.5 0 6.1l6.1 6.1c1.7 1.7 4.5 1.7 6.1 0l-6.1-6.1c-1.7-1.7-4.4-1.7-6.1 0zM58.9 54.7c-1.7 1.7-1.7 4.5 0 6.1l6.1 6.1c1.7 1.7 4.5 1.7 6.1 0l-6.1-6.1c-1.7-1.7-4.4-1.7-6.1 0zM67.1 62.9c-1.7 1.7-1.7 4.5 0 6.1l6.1 6.1c1.7 1.7 4.5 1.7 6.1 0l-6.1-6.1c-1.7-1.7-4.4-1.7-6.1 0zM75.2 71c-1.7 1.7-1.7 4.5 0 6.1l6.1 6.1c1.7 1.7 4.5 1.7 6.1 0l-6.1-6.1c-1.7-1.7-4.4-1.7-6.1 0zM83.3 79.1c-1.7 1.7-1.7 4.5 0 6.1l6.1 6.1c1.7 1.7 4.5 1.7 6.1 0l-6.1-6.1c-1.7-1.7-4.4-1.7-6.1 0zM91.4 87.2c-1.7 1.7-1.7 4.5 0 6.1l6.1 6.1c1.7 1.7 4.5 1.7 6.1 0l-6.1-6.1c-1.7-1.7-4.4-1.7-6.1 0z'/%3E%3C/svg%3E");border-image-slice:5;border-image-width:5px;border-image-repeat:stretch;border-width:5px}.theme-xuanhuan .fate-console{border-image:none;border:3px solid rgba(0,0,0,0);box-shadow:0 0 8px var(--glow-color),0 0 16px var(--primary-color),0 0 24px var(--accent-color),inset 0 0 15px rgba(0,0,0,.7)}@keyframes fade-in{from{opacity:0;transform:scale(0.98)}to{opacity:1;transform:scale(1)}}.console-controls{position:absolute;top:10px;right:12px;display:flex;align-items:center;gap:15px;z-index:10}.console-control-btn{font-size:1.6em;color:var(--primary-color);cursor:pointer;transition:transform .2s,color .2s;font-family:sans-serif}.console-control-btn:hover{color:var(--glow-color);transform:scale(1.15)}.fate-console.collapsed .console-control-btn .icon-collapse{display:none}.fate-console.collapsed .console-control-btn .icon-expand{display:block}.fate-console.fixed-layout .console-control-btn .icon-fixed{display:none}.fate-console.fixed-layout .console-control-btn .icon-diffusion{display:block}.icon-expand,.icon-diffusion{display:none}.theme-switcher{display:flex;gap:6px}.theme-stone{width:18px;height:18px;border-radius:50%;cursor:pointer;border:2px solid hsla(0,0%,100%,.3);transition:all .2s}.theme-stone:hover{transform:scale(1.2)}.theme-stone.active{border-color:#fff;transform:scale(1.1);box-shadow:0 0 10px #fff}.theme-stone[data-theme=gufeng]{background:#c89b3c}.theme-stone[data-theme=xianxia]{background:#34d399}.theme-stone[data-theme=minsu]{background:#ef4444}.theme-stone[data-theme=wuxia]{background:#e5e7eb}.theme-stone[data-theme=xuanhuan]{background:#8b5cf6}.collapsed-view{display:none}.fate-console.collapsed{padding:15px;padding-top:45px}.fate-console.collapsed .expanded-view,.fate-console.collapsed .log-container{display:none}.fate-console.collapsed .collapsed-view{display:grid;grid-template-columns:1fr 1fr;gap:12px}.collapsed-block{background:var(--bg-section);border:1px solid var(--border-section);border-radius:6px;padding:10px 12px}.collapsed-title{font-family:"Ma Shan Zheng","华文行楷","华文楷体","KaiTi",cursive;font-size:1.5em;color:var(--text-header);margin-bottom:8px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;font-weight:normal;letter-spacing:.15em;text-shadow:0 0 8px var(--glow-color);transform:rotate(-1deg)}.fate-console.fixed-layout .expanded-view{max-height:80vw;overflow-y:auto;padding-right:8px;scrollbar-width:thin;scrollbar-color:var(--primary-color) rgba(0,0,0,.2)}.fate-console.fixed-layout .expanded-view::-webkit-scrollbar{width:6px}.fate-console.fixed-layout .expanded-view::-webkit-scrollbar-track{background:rgba(0,0,0,.2);border-radius:3px}.fate-console.fixed-layout .expanded-view::-webkit-scrollbar-thumb{background-color:var(--primary-color);border-radius:3px}.top-thought-display{position:absolute;left:20px;top:13px;max-width:calc(100% - 260px);white-space:nowrap;overflow:hidden;text-overflow:ellipsis;color:var(--text-main);opacity:.75;font-style:italic;font-size:.9em;pointer-events:auto}.tab-nav{display:flex;gap:5px;border-bottom:2px solid var(--primary-color);margin-bottom:15px}.tab-btn{font-family:"Ma Shan Zheng","华文行楷","华文楷体","KaiTi",cursive;font-size:1.8em;color:gray;background:rgba(0,0,0,.2);border:2px solid var(--primary-color);border-bottom:none;padding:5px 20px;border-radius:8px 8px 0 0;cursor:pointer;transform:translateY(2px);transition:all .2s ease;font-weight:normal;letter-spacing:.08em}.tab-btn:hover{color:var(--text-header);background:rgba(50,40,30,.4)}.tab-btn.active{color:var(--text-header);background:var(--bg-section);border-color:var(--primary-color);text-shadow:0 0 8px var(--glow-color)}.tab-panel{display:none}.tab-panel.active{display:block;animation:fade-in .4s}.tab-panel-grid,.character-annals-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(350px,1fr));gap:20px}.grid-column{display:flex;flex-direction:column;gap:15px}.section-box{background:var(--bg-section);border:1px solid var(--border-section);border-radius:6px;padding:12px;overflow:hidden;position:relative}.section-box::before{content:"";position:absolute;top:-1px;left:-1px;right:-1px;bottom:-1px;background:linear-gradient(135deg,transparent 0%,var(--primary-color) 20%,transparent 40%,var(--primary-color) 60%,transparent 80%,var(--primary-color) 100%);background-size:200% 200%;border-radius:6px;opacity:.2;animation:section-glow 4s ease-in-out infinite alternate;pointer-events:none}@keyframes section-glow{0%{opacity:.1;background-position:0% 0%}100%{opacity:.3;background-position:100% 100%}}.section-title{font-family:"Ma Shan Zheng","华文行楷","华文楷体","KaiTi",cursive;font-size:1.8em;color:var(--text-header);text-shadow:0 0 8px var(--glow-color);padding-bottom:10px;margin:0 0 10px 0;display:flex;align-items:center;gap:10px;border-bottom:none;font-weight:normal;letter-spacing:.1em}.section-title::before{content:var(--title-icon-content,"");font-family:sans-serif;font-size:1.2em;color:var(--primary-color);display:inline-block;width:1.2em;height:1.2em;line-height:1.2em;text-align:center;flex-shrink:0;background-color:var(--primary-color);-webkit-mask-image:var(--title-icon-svg);mask-image:var(--title-icon-svg);-webkit-mask-repeat:no-repeat;mask-repeat:no-repeat;-webkit-mask-size:contain;mask-size:contain;-webkit-mask-position:center;mask-position:center}.theme-xianxia .section-title::before,.theme-minsu .section-title::before{background-color:rgba(0,0,0,0)}.section-title::after{content:"";flex-grow:1;height:1px;background:linear-gradient(to right,var(--primary-color),transparent)}.char-name{font-size:1.2em;font-weight:bold}.progress-bar-group{display:flex;flex-direction:column;gap:8px;margin:10px 0}.progress-bar{width:100%;height:20px;background-color:#2c1d12;border-radius:5px;overflow:hidden;position:relative;border:1px solid #4a3c2d;box-shadow:inset 0 1px 3px rgba(0,0,0,.5);box-sizing:border-box}.progress-bar-fill{height:100%;transition:width .5s ease-in-out;background-image:repeating-linear-gradient(-45deg,transparent,transparent 5px,rgba(255,255,255,0.1) 5px,rgba(255,255,255,0.1) 10px)}.progress-bar-fill.hp{background-color:var(--hp-color)}.progress-bar-fill.mp{background-color:var(--mp-color)}.progress-bar-fill.sta{background-color:var(--sta-color)}.progress-bar-fill.sd{background-color:var(--sd-color)}.progress-bar-text{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);color:#fff;font-size:.8em;font-weight:bold;text-shadow:1px 1px 2px #000;white-space:nowrap}.info-line{display:flex;margin:6px 0;align-items:baseline}.info-label{color:var(--text-header);font-weight:bold;margin-right:8px;white-space:nowrap;flex-shrink:0}.tags-container{display:flex;flex-wrap:wrap;gap:6px;margin-top:5px}.tag{background:rgba(200,155,60,.15);border:1px solid var(--primary-color);color:var(--text-main);padding:3px 10px;border-radius:4px;font-size:.85em}.quest-list .info-line{border-left:3px solid var(--primary-color);padding-left:10px}.quest-list .info-label{color:#f1c40f}.quest-list .quest-主线 .info-label{color:#f1c40f}.quest-list .quest-支线 .info-label{color:#3498db}.npc-grid{display:grid;grid-template-columns:1fr;gap:15px}.bonded-section .section-title::after{content:"∞";color:var(--bonded-color);font-size:1.2em;animation:pulse-red 2.5s infinite ease-in-out;background:none;margin-left:auto;flex-grow:0}@keyframes pulse-red{0%{opacity:.7}50%{opacity:1}100%{opacity:.7}}.npc-card{position:relative;cursor:pointer;border:1px solid var(--primary-color);border-radius:8px;padding:10px;box-sizing:border-box;box-shadow:inset 0 1px 3px rgba(0,0,0,.5);transition:transform .3s ease,box-shadow .3s ease,border-color .3s ease;background:linear-gradient(145deg,rgba(255,255,255,0.08),transparent),var(--card-texture),var(--bg-card)}.npc-card:hover{transform:translateY(-5px) scale(1.03);border-color:var(--primary-color);box-shadow:0 6px 20px rgba(0,0,0,.5),0 0 8px var(--glow-color),inset 0 1px 3px rgba(0,0,0,.5)}.npc-card::after{content:"↺";position:absolute;bottom:5px;right:10px;color:var(--primary-color);opacity:.5;transition:opacity .3s,transform .3s;z-index:5}.npc-card:hover::after{opacity:1;transform:rotate(360deg)}.npc-card.bonded{border-color:var(--bonded-color);box-shadow:0 0 10px var(--bonded-color),inset 0 1px 3px rgba(0,0,0,.5)}.npc-card.bonded:hover{border-color:var(--bonded-color);box-shadow:0 6px 20px rgba(0,0,0,.4),0 0 15px var(--bonded-color),inset 0 1px 3px rgba(0,0,0,.5)}.npc-header{display:flex;justify-content:space-between;align-items:center;border-bottom:1px dashed var(--primary-color);padding-bottom:5px;margin-bottom:8px;flex-shrink:0}.npc-card-content{position:relative}.npc-info-section{margin-right:20px}.npc-name{font-size:1.2em;font-weight:bold;color:#e67e22}.npc-name.sr-active{color:#ff6b6b}.npc-status{font-size:.9em;color:var(--text-main);font-weight:normal;margin-left:6px}.npc-location{font-size:.8em;color:#bdc3c7;font-style:italic}.affection-bar-horizontal{width:100%;height:8px;background:rgba(0,0,0,.3);border-radius:4px;margin-top:8px;overflow:hidden;border:1px solid hsla(0,0%,100%,.2)}.affection-fill-horizontal{height:100%;transition:all .5s ease;border-radius:3px}.affection-fill.affection{background:#e91e63}.affection-fill.affection.affection-gray{background:#7f8c8d}.affection-fill.affection.affection-white{background:#fff}.affection-fill.affection.affection-yellow{background:#f1c40f}.affection-fill.affection.affection-pink{background:#e91e63}.progress-bar-fill.affection{background:#e91e63}.progress-bar-fill.affection.affection-gray{background:#7f8c8d}.progress-bar-fill.affection.affection-white{background:#fff}.progress-bar-fill.affection.affection-yellow{background:#f1c40f}.progress-bar-fill.affection.affection-pink{background:#e91e63}.card-front{display:block}.card-back{display:none}.is-flipped .card-front{display:none}.is-flipped .card-back{display:block;animation:fade-in .3s}.log-container{margin-top:15px}.log-title{font-family:"Ma Shan Zheng","华文行楷","华文楷体","KaiTi",cursive;margin:0 0 8px 4px;color:var(--text-main);font-size:1em;font-weight:normal;letter-spacing:.05em;text-shadow:0 0 5px var(--glow-color)}.log-box{background:rgba(0,0,0,.4);border-left:4px solid var(--primary-color);padding:8px 12px;max-height:3.7rem;overflow-y:auto;scrollbar-width:thin;scrollbar-color:var(--primary-color) rgba(0,0,0,.2)}.log-box::-webkit-scrollbar{width:6px}.log-box::-webkit-scrollbar-track{background:rgba(0,0,0,.2);border-radius:3px}.log-box::-webkit-scrollbar-thumb{background-color:var(--primary-color);border-radius:3px}.log-entry{margin:0 0 5px;font-style:italic;color:#bdc3c7;line-height:1.5}.log-entry:last-child{margin-bottom:0}@media (max-width:768px){.fate-console{padding:10px;padding-top:45px}.tab-panel-grid,.character-annals-grid,.fate-console.collapsed .collapsed-view{grid-template-columns:1fr;gap:15px}.tab-btn{font-size:1.4em;padding:5px 10px}.section-title{font-size:1.5em}.console-controls{gap:8px;right:8px}.theme-stone{width:16px;height:16px}.console-control-btn{font-size:1.4em}.top-thought-display{max-width:calc(100% - 180px);left:15px}.fate-console.fixed-layout .expanded-view{max-height:70vw}}
</style></head><body><div id="app"></div></body>